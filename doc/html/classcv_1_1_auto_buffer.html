<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>opencv: cv::AutoBuffer&lt; _Tp, fixed_size &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="namespacecv.html">cv</a>      </li>
      <li><a class="el" href="classcv_1_1_auto_buffer.html">AutoBuffer</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>cv::AutoBuffer&lt; _Tp, fixed_size &gt; Class Template Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="cv::AutoBuffer" -->
<p><code>#include &lt;<a class="el" href="core_8hpp_source.html">core.hpp</a>&gt;</code></p>

<p><a href="classcv_1_1_auto_buffer-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef _Tp&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcv_1_1_auto_buffer.html#afbc953161e91d6455882c315eff66f6d">value_type</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcv_1_1_auto_buffer.html#a1c16dbf31a16748ffc930e796f0dc54b">allocate</a> (size_t _size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">allocates the new buffer of size _size. if the _size is small enough, stack-allocated buffer is used  <a href="#a1c16dbf31a16748ffc930e796f0dc54b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcv_1_1_auto_buffer.html#a990ab2dd088c226def0e59177933c9df">AutoBuffer</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the default contructor  <a href="#a990ab2dd088c226def0e59177933c9df"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcv_1_1_auto_buffer.html#ac498c6689e5a18843e1c9d23441c3a99">AutoBuffer</a> (size_t _size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">constructor taking the real buffer size  <a href="#ac498c6689e5a18843e1c9d23441c3a99"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcv_1_1_auto_buffer.html#aab78aeff0108ad5ba8c96baafd58702b">deallocate</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">deallocates the buffer if it was dynamically allocated  <a href="#aab78aeff0108ad5ba8c96baafd58702b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcv_1_1_auto_buffer.html#abf37a20ae4387196fe2a5684ced410dc">operator _Tp *</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">returns pointer to the real buffer, stack-allocated or head-allocated  <a href="#abf37a20ae4387196fe2a5684ced410dc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcv_1_1_auto_buffer.html#a81f50afa0ddfa46d7f18abc720f55d50">operator const _Tp *</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">returns read-only pointer to the real buffer, stack-allocated or head-allocated  <a href="#a81f50afa0ddfa46d7f18abc720f55d50"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcv_1_1_auto_buffer.html#a310b178f5acd17d7ebf5fb1e8cdc4fc7">~AutoBuffer</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">destructor. calls <a class="el" href="classcv_1_1_auto_buffer.html#aab78aeff0108ad5ba8c96baafd58702b" title="deallocates the buffer if it was dynamically allocated">deallocate()</a>  <a href="#a310b178f5acd17d7ebf5fb1e8cdc4fc7"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">_Tp&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcv_1_1_auto_buffer.html#a46514352b836af6a1c1286732df9ee86">buf</a> [fixed_size]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">pre-allocated buffer  <a href="#a46514352b836af6a1c1286732df9ee86"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">_Tp *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcv_1_1_auto_buffer.html#a194ac92b66c003787e0782bd8a38750b">ptr</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to the real buffer, can point to buf if the buffer is small enough  <a href="#a194ac92b66c003787e0782bd8a38750b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcv_1_1_auto_buffer.html#a7fd44a85e47a66324e2987c67e829a90">size</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">size of the real buffer  <a href="#a7fd44a85e47a66324e2987c67e829a90"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;typename _Tp, size_t fixed_size = 4096/sizeof(_Tp)+8&gt;<br/>
 class cv::AutoBuffer&lt; _Tp, fixed_size &gt;</h3>

<p>Automatically Allocated Buffer Class</p>
<p>The class is used for temporary buffers in functions and methods. If a temporary buffer is usually small (a few K's of memory), but its size depends on the parameters, it makes sense to create a small fixed-size array on stack and use it if it's large enough. If the required buffer size is larger than the fixed size, another buffer of sufficient size is allocated dynamically and released after the processing. Therefore, in typical cases, when the buffer size is small, there is no overhead associated with malloc()/free(). At the same time, there is no limit on the size of processed data.</p>
<p>This is what <a class="el" href="classcv_1_1_auto_buffer.html">AutoBuffer</a> does. The template takes 2 parameters - type of the buffer elements and the number of stack-allocated elements. Here is how the class is used:</p>
<div class="fragment"><pre class="fragment"> <span class="keywordtype">void</span> my_func(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">cv::Mat</a>&amp; m)
 {
    <a class="code" href="classcv_1_1_auto_buffer.html">cv::AutoBuffer&lt;float, 1000&gt;</a> <a class="code" href="classcv_1_1_auto_buffer.html#a46514352b836af6a1c1286732df9ee86" title="pre-allocated buffer">buf</a>; <span class="comment">// create automatic buffer containing 1000 floats</span>
 
    buf.<a class="code" href="classcv_1_1_auto_buffer.html#a1c16dbf31a16748ffc930e796f0dc54b" title="allocates the new buffer of size _size. if the _size is small enough, stack-allocated buffer is used...">allocate</a>(m.<a class="code" href="classcv_1_1_mat.html#abed816466c45234254d25bc59c31245e" title="the number of rows and columns or (-1, -1) when the matrix has more than 2 dimensions">rows</a>); <span class="comment">// if m.rows &lt;= 1000, the pre-allocated buffer is used,</span>
                          <span class="comment">// otherwise the buffer of &quot;m.rows&quot; floats will be allocated</span>
                          <span class="comment">// dynamically and deallocated in cv::AutoBuffer destructor</span>
    ...
 }
</pre></div> <hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="afbc953161e91d6455882c315eff66f6d"></a><!-- doxytag: member="cv::AutoBuffer::value_type" ref="afbc953161e91d6455882c315eff66f6d" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Tp, size_t fixed_size = 4096/sizeof(_Tp)+8&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef _Tp <a class="el" href="classcv_1_1_auto_buffer.html">cv::AutoBuffer</a>&lt; _Tp, fixed_size &gt;::<a class="el" href="classcv_1_1_auto_buffer.html#afbc953161e91d6455882c315eff66f6d">value_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a990ab2dd088c226def0e59177933c9df"></a><!-- doxytag: member="cv::AutoBuffer::AutoBuffer" ref="a990ab2dd088c226def0e59177933c9df" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Tp , size_t fixed_size&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcv_1_1_auto_buffer.html">cv::AutoBuffer</a>&lt; _Tp, fixed_size &gt;::<a class="el" href="classcv_1_1_auto_buffer.html">AutoBuffer</a> </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the default contructor </p>

</div>
</div>
<a class="anchor" id="ac498c6689e5a18843e1c9d23441c3a99"></a><!-- doxytag: member="cv::AutoBuffer::AutoBuffer" ref="ac498c6689e5a18843e1c9d23441c3a99" args="(size_t _size)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Tp , size_t fixed_size&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcv_1_1_auto_buffer.html">cv::AutoBuffer</a>&lt; _Tp, fixed_size &gt;::<a class="el" href="classcv_1_1_auto_buffer.html">AutoBuffer</a> </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"> <em>_size</em>&#160;)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>constructor taking the real buffer size </p>

</div>
</div>
<a class="anchor" id="a310b178f5acd17d7ebf5fb1e8cdc4fc7"></a><!-- doxytag: member="cv::AutoBuffer::~AutoBuffer" ref="a310b178f5acd17d7ebf5fb1e8cdc4fc7" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Tp , size_t fixed_size&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcv_1_1_auto_buffer.html">cv::AutoBuffer</a>&lt; _Tp, fixed_size &gt;::~<a class="el" href="classcv_1_1_auto_buffer.html">AutoBuffer</a> </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>destructor. calls <a class="el" href="classcv_1_1_auto_buffer.html#aab78aeff0108ad5ba8c96baafd58702b" title="deallocates the buffer if it was dynamically allocated">deallocate()</a> </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a1c16dbf31a16748ffc930e796f0dc54b"></a><!-- doxytag: member="cv::AutoBuffer::allocate" ref="a1c16dbf31a16748ffc930e796f0dc54b" args="(size_t _size)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Tp , size_t fixed_size&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classcv_1_1_auto_buffer.html">cv::AutoBuffer</a>&lt; _Tp, fixed_size &gt;::allocate </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"> <em>_size</em>&#160;)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>allocates the new buffer of size _size. if the _size is small enough, stack-allocated buffer is used </p>

</div>
</div>
<a class="anchor" id="aab78aeff0108ad5ba8c96baafd58702b"></a><!-- doxytag: member="cv::AutoBuffer::deallocate" ref="aab78aeff0108ad5ba8c96baafd58702b" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Tp , size_t fixed_size&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classcv_1_1_auto_buffer.html">cv::AutoBuffer</a>&lt; _Tp, fixed_size &gt;::deallocate </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>deallocates the buffer if it was dynamically allocated </p>

</div>
</div>
<a class="anchor" id="abf37a20ae4387196fe2a5684ced410dc"></a><!-- doxytag: member="cv::AutoBuffer::operator _Tp *" ref="abf37a20ae4387196fe2a5684ced410dc" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Tp , size_t fixed_size&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcv_1_1_auto_buffer.html">cv::AutoBuffer</a>&lt; _Tp, fixed_size &gt;::operator _Tp * </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns pointer to the real buffer, stack-allocated or head-allocated </p>

</div>
</div>
<a class="anchor" id="a81f50afa0ddfa46d7f18abc720f55d50"></a><!-- doxytag: member="cv::AutoBuffer::operator const _Tp *" ref="a81f50afa0ddfa46d7f18abc720f55d50" args="() const " -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Tp , size_t fixed_size&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcv_1_1_auto_buffer.html">cv::AutoBuffer</a>&lt; _Tp, fixed_size &gt;::operator const _Tp * </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns read-only pointer to the real buffer, stack-allocated or head-allocated </p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a46514352b836af6a1c1286732df9ee86"></a><!-- doxytag: member="cv::AutoBuffer::buf" ref="a46514352b836af6a1c1286732df9ee86" args="[fixed_size]" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Tp, size_t fixed_size = 4096/sizeof(_Tp)+8&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">_Tp <a class="el" href="classcv_1_1_auto_buffer.html">cv::AutoBuffer</a>&lt; _Tp, fixed_size &gt;::<a class="el" href="classcv_1_1_auto_buffer.html#a46514352b836af6a1c1286732df9ee86">buf</a>[fixed_size]<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>pre-allocated buffer </p>

</div>
</div>
<a class="anchor" id="a194ac92b66c003787e0782bd8a38750b"></a><!-- doxytag: member="cv::AutoBuffer::ptr" ref="a194ac92b66c003787e0782bd8a38750b" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Tp, size_t fixed_size = 4096/sizeof(_Tp)+8&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">_Tp* <a class="el" href="classcv_1_1_auto_buffer.html">cv::AutoBuffer</a>&lt; _Tp, fixed_size &gt;::<a class="el" href="classcv_1_1_auto_buffer.html#a194ac92b66c003787e0782bd8a38750b">ptr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>pointer to the real buffer, can point to buf if the buffer is small enough </p>

</div>
</div>
<a class="anchor" id="a7fd44a85e47a66324e2987c67e829a90"></a><!-- doxytag: member="cv::AutoBuffer::size" ref="a7fd44a85e47a66324e2987c67e829a90" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Tp, size_t fixed_size = 4096/sizeof(_Tp)+8&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classcv_1_1_auto_buffer.html">cv::AutoBuffer</a>&lt; _Tp, fixed_size &gt;::<a class="el" href="classcv_1_1_auto_buffer.html#a7fd44a85e47a66324e2987c67e829a90">size</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>size of the real buffer </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/Users/jjthrash/Downloads/OpenCV-2.2.0/modules/core/include/opencv2/core/<a class="el" href="core_8hpp_source.html">core.hpp</a></li>
<li>/Users/jjthrash/Downloads/OpenCV-2.2.0/modules/core/include/opencv2/core/<a class="el" href="operations_8hpp_source.html">operations.hpp</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Mon Feb 21 2011 10:00:53 for opencv by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
