<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>opencv: /Users/jjthrash/Downloads/OpenCV-2.2.0/modules/features2d/include/opencv2/features2d/features2d.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>/Users/jjthrash/Downloads/OpenCV-2.2.0/modules/features2d/include/opencv2/features2d/features2d.hpp</h1>  </div>
</div>
<div class="contents">
<a href="features2d_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*M///////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00002"></a>00002 <span class="comment">//</span>
<a name="l00003"></a>00003 <span class="comment">//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.</span>
<a name="l00004"></a>00004 <span class="comment">//</span>
<a name="l00005"></a>00005 <span class="comment">//  By downloading, copying, installing or using the software you agree to this license.</span>
<a name="l00006"></a>00006 <span class="comment">//  If you do not agree to this license, do not download, install,</span>
<a name="l00007"></a>00007 <span class="comment">//  copy or use the software.</span>
<a name="l00008"></a>00008 <span class="comment">//</span>
<a name="l00009"></a>00009 <span class="comment">//</span>
<a name="l00010"></a>00010 <span class="comment">//                           License Agreement</span>
<a name="l00011"></a>00011 <span class="comment">//                For Open Source Computer Vision Library</span>
<a name="l00012"></a>00012 <span class="comment">//</span>
<a name="l00013"></a>00013 <span class="comment">// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.</span>
<a name="l00014"></a>00014 <span class="comment">// Copyright (C) 2009, Willow Garage Inc., all rights reserved.</span>
<a name="l00015"></a>00015 <span class="comment">// Third party copyrights are property of their respective owners.</span>
<a name="l00016"></a>00016 <span class="comment">//</span>
<a name="l00017"></a>00017 <span class="comment">// Redistribution and use in source and binary forms, with or without modification,</span>
<a name="l00018"></a>00018 <span class="comment">// are permitted provided that the following conditions are met:</span>
<a name="l00019"></a>00019 <span class="comment">//</span>
<a name="l00020"></a>00020 <span class="comment">//   * Redistribution&#39;s of source code must retain the above copyright notice,</span>
<a name="l00021"></a>00021 <span class="comment">//     this list of conditions and the following disclaimer.</span>
<a name="l00022"></a>00022 <span class="comment">//</span>
<a name="l00023"></a>00023 <span class="comment">//   * Redistribution&#39;s in binary form must reproduce the above copyright notice,</span>
<a name="l00024"></a>00024 <span class="comment">//     this list of conditions and the following disclaimer in the documentation</span>
<a name="l00025"></a>00025 <span class="comment">//     and/or other materials provided with the distribution.</span>
<a name="l00026"></a>00026 <span class="comment">//</span>
<a name="l00027"></a>00027 <span class="comment">//   * The name of the copyright holders may not be used to endorse or promote products</span>
<a name="l00028"></a>00028 <span class="comment">//     derived from this software without specific prior written permission.</span>
<a name="l00029"></a>00029 <span class="comment">//</span>
<a name="l00030"></a>00030 <span class="comment">// This software is provided by the copyright holders and contributors &quot;as is&quot; and</span>
<a name="l00031"></a>00031 <span class="comment">// any express or implied warranties, including, but not limited to, the implied</span>
<a name="l00032"></a>00032 <span class="comment">// warranties of merchantability and fitness for a particular purpose are disclaimed.</span>
<a name="l00033"></a>00033 <span class="comment">// In no event shall the Intel Corporation or contributors be liable for any direct,</span>
<a name="l00034"></a>00034 <span class="comment">// indirect, incidental, special, exemplary, or consequential damages</span>
<a name="l00035"></a>00035 <span class="comment">// (including, but not limited to, procurement of substitute goods or services;</span>
<a name="l00036"></a>00036 <span class="comment">// loss of use, data, or profits; or business interruption) however caused</span>
<a name="l00037"></a>00037 <span class="comment">// and on any theory of liability, whether in contract, strict liability,</span>
<a name="l00038"></a>00038 <span class="comment">// or tort (including negligence or otherwise) arising in any way out of</span>
<a name="l00039"></a>00039 <span class="comment">// the use of this software, even if advised of the possibility of such damage.</span>
<a name="l00040"></a>00040 <span class="comment">//</span>
<a name="l00041"></a>00041 <span class="comment">//M*/</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="preprocessor">#ifndef __OPENCV_FEATURES_2D_HPP__</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">#define __OPENCV_FEATURES_2D_HPP__</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="core_8hpp.html" title="The Core Functionality.">opencv2/core/core.hpp</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;opencv2/flann/flann.hpp&quot;</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#include &lt;limits&gt;</span>
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00053"></a>00053 <span class="preprocessor">#endif</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span>
<a name="l00055"></a><a class="code" href="struct_cv_s_u_r_f_point.html">00055</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_cv_s_u_r_f_point.html">CvSURFPoint</a>
<a name="l00056"></a>00056 {
<a name="l00057"></a><a class="code" href="struct_cv_s_u_r_f_point.html#a60dfd069a42d57a2259d862b14f287c1">00057</a>     <a class="code" href="struct_cv_point2_d32f.html">CvPoint2D32f</a> <a class="code" href="struct_cv_s_u_r_f_point.html#a60dfd069a42d57a2259d862b14f287c1">pt</a>;
<a name="l00058"></a><a class="code" href="struct_cv_s_u_r_f_point.html#a584a2aa3e1c046b3e57b2a9c0d82c73d">00058</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_s_u_r_f_point.html#a584a2aa3e1c046b3e57b2a9c0d82c73d">laplacian</a>;
<a name="l00059"></a><a class="code" href="struct_cv_s_u_r_f_point.html#a0f46678907ba7a867a9eb2ade22a80eb">00059</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_s_u_r_f_point.html#a0f46678907ba7a867a9eb2ade22a80eb">size</a>;
<a name="l00060"></a><a class="code" href="struct_cv_s_u_r_f_point.html#a08e42d76fd78454974c1a2ce38e05c53">00060</a>     <span class="keywordtype">float</span> <a class="code" href="struct_cv_s_u_r_f_point.html#a08e42d76fd78454974c1a2ce38e05c53">dir</a>;
<a name="l00061"></a><a class="code" href="struct_cv_s_u_r_f_point.html#ae24f023d123a23323684928d6bb423c6">00061</a>     <span class="keywordtype">float</span> <a class="code" href="struct_cv_s_u_r_f_point.html#ae24f023d123a23323684928d6bb423c6">hessian</a>;
<a name="l00062"></a>00062 } <a class="code" href="features2d_8hpp.html#a34a8e145a6b9530daf392c79f263dfb3">CvSURFPoint</a>;
<a name="l00063"></a>00063 
<a name="l00064"></a><a class="code" href="features2d_8hpp.html#a43ee74763557157d5deb0259585bb006">00064</a> <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#afa9cd5d65f77596b7dfb38dd8afe2325">CV_INLINE</a> <a class="code" href="struct_cv_s_u_r_f_point.html">CvSURFPoint</a> <a class="code" href="features2d_8hpp.html#a43ee74763557157d5deb0259585bb006">cvSURFPoint</a>( <a class="code" href="struct_cv_point2_d32f.html">CvPoint2D32f</a> pt, <span class="keywordtype">int</span> laplacian,
<a name="l00065"></a>00065                                    <span class="keywordtype">int</span> size, <span class="keywordtype">float</span> dir <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ad0c0f363a0864b981b6819aa7e16b1f3">CV_DEFAULT</a>(0),
<a name="l00066"></a>00066                                    <span class="keywordtype">float</span> hessian <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ad0c0f363a0864b981b6819aa7e16b1f3">CV_DEFAULT</a>(0))
<a name="l00067"></a>00067 {
<a name="l00068"></a>00068     <a class="code" href="struct_cv_s_u_r_f_point.html">CvSURFPoint</a> kp;
<a name="l00069"></a>00069     kp.<a class="code" href="struct_cv_s_u_r_f_point.html#a60dfd069a42d57a2259d862b14f287c1">pt</a> = pt;
<a name="l00070"></a>00070     kp.<a class="code" href="struct_cv_s_u_r_f_point.html#a584a2aa3e1c046b3e57b2a9c0d82c73d">laplacian</a> = laplacian;
<a name="l00071"></a>00071     kp.<a class="code" href="struct_cv_s_u_r_f_point.html#a0f46678907ba7a867a9eb2ade22a80eb">size</a> = size;
<a name="l00072"></a>00072     kp.<a class="code" href="struct_cv_s_u_r_f_point.html#a08e42d76fd78454974c1a2ce38e05c53">dir</a> = dir;
<a name="l00073"></a>00073     kp.<a class="code" href="struct_cv_s_u_r_f_point.html#ae24f023d123a23323684928d6bb423c6">hessian</a> = hessian;
<a name="l00074"></a>00074     <span class="keywordflow">return</span> kp;
<a name="l00075"></a>00075 }
<a name="l00076"></a>00076 
<a name="l00077"></a><a class="code" href="struct_cv_s_u_r_f_params.html">00077</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_cv_s_u_r_f_params.html">CvSURFParams</a>
<a name="l00078"></a>00078 {
<a name="l00079"></a><a class="code" href="struct_cv_s_u_r_f_params.html#ae5ee86578ccbc8a56ad0174735404479">00079</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_s_u_r_f_params.html#ae5ee86578ccbc8a56ad0174735404479">extended</a>;
<a name="l00080"></a><a class="code" href="struct_cv_s_u_r_f_params.html#a57e3919e8bda581f2c7f8d2120056c40">00080</a>     <span class="keywordtype">double</span> <a class="code" href="struct_cv_s_u_r_f_params.html#a57e3919e8bda581f2c7f8d2120056c40">hessianThreshold</a>;
<a name="l00081"></a>00081 
<a name="l00082"></a><a class="code" href="struct_cv_s_u_r_f_params.html#a5d5f0670389c197ece9b188775600ce6">00082</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_s_u_r_f_params.html#a5d5f0670389c197ece9b188775600ce6">nOctaves</a>;
<a name="l00083"></a><a class="code" href="struct_cv_s_u_r_f_params.html#a6be1eb644274f0ba5fd650e656dc2524">00083</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_s_u_r_f_params.html#a6be1eb644274f0ba5fd650e656dc2524">nOctaveLayers</a>;
<a name="l00084"></a>00084 } <a class="code" href="features2d_8hpp.html#a314165e79b8b61f6aa4f9293f95a01c3">CvSURFParams</a>;
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 CVAPI(<a class="code" href="struct_cv_s_u_r_f_params.html">CvSURFParams</a>) <a class="code" href="features2d_8hpp.html#a897cd60b4cc074cb9b07fee0e889ae21">cvSURFParams</a>( <span class="keywordtype">double</span> hessianThreshold, <span class="keywordtype">int</span> extended <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ad0c0f363a0864b981b6819aa7e16b1f3">CV_DEFAULT</a>(0) );
<a name="l00087"></a>00087 
<a name="l00088"></a>00088 <span class="comment">// If useProvidedKeyPts!=0, keypoints are not detected, but descriptors are computed</span>
<a name="l00089"></a>00089 <span class="comment">//  at the locations provided in keypoints (a CvSeq of CvSURFPoint).</span>
<a name="l00090"></a>00090 CVAPI(<span class="keywordtype">void</span>) <a class="code" href="features2d_8hpp.html#a2ec1a53bf178e96b9756b1f6d095def2">cvExtractSURF</a>( const <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ac5046bc0456e9295d80b37774384798c">CvArr</a>* img, const <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ac5046bc0456e9295d80b37774384798c">CvArr</a>* <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>,
<a name="l00091"></a>00091                            <a class="code" href="struct_cv_seq.html">CvSeq</a>** keypoints, <a class="code" href="struct_cv_seq.html">CvSeq</a>** descriptors,
<a name="l00092"></a>00092                            <a class="code" href="struct_cv_mem_storage.html">CvMemStorage</a>* storage, <a class="code" href="struct_cv_s_u_r_f_params.html">CvSURFParams</a> params, <span class="keywordtype">int</span> useProvidedKeyPts CV_DEFAULT(0)  );
<a name="l00093"></a>00093 
<a name="l00097"></a><a class="code" href="struct_cv_m_s_e_r_params.html">00097</a> typedef struct <a class="code" href="struct_cv_m_s_e_r_params.html">CvMSERParams</a>
<a name="l00098"></a>00098 {
<a name="l00100"></a><a class="code" href="struct_cv_m_s_e_r_params.html#a9a8574af934f1efe0aacb610fd273f04">00100</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_m_s_e_r_params.html#a9a8574af934f1efe0aacb610fd273f04" title="delta, in the code, it compares (size_{i}-size_{i-delta})/size_{i-delta}">delta</a>;
<a name="l00102"></a><a class="code" href="struct_cv_m_s_e_r_params.html#a4f2be25b22dd08ebf741240d9b5a445e">00102</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_m_s_e_r_params.html#a4f2be25b22dd08ebf741240d9b5a445e" title="prune the area which bigger than maxArea">maxArea</a>;
<a name="l00104"></a><a class="code" href="struct_cv_m_s_e_r_params.html#aa05b341d994d1fd85e199f5c4fe41db0">00104</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_m_s_e_r_params.html#aa05b341d994d1fd85e199f5c4fe41db0" title="prune the area which smaller than minArea">minArea</a>;
<a name="l00106"></a><a class="code" href="struct_cv_m_s_e_r_params.html#acb769f970c8804c122db9c5dbbc9a37d">00106</a>     <span class="keywordtype">float</span> <a class="code" href="struct_cv_m_s_e_r_params.html#acb769f970c8804c122db9c5dbbc9a37d" title="prune the area have simliar size to its children">maxVariation</a>;
<a name="l00108"></a><a class="code" href="struct_cv_m_s_e_r_params.html#addc1cf6caebd85fa2eee45be5cafe613">00108</a>     <span class="keywordtype">float</span> <a class="code" href="struct_cv_m_s_e_r_params.html#addc1cf6caebd85fa2eee45be5cafe613" title="trace back to cut off mser with diversity &amp;lt; min_diversity">minDiversity</a>;
<a name="l00109"></a>00109     
<a name="l00111"></a>00111     
<a name="l00113"></a><a class="code" href="struct_cv_m_s_e_r_params.html#ae2c65c573f5749809ae5cf426a4bd311">00113</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_m_s_e_r_params.html#ae2c65c573f5749809ae5cf426a4bd311" title="for color image, the evolution steps">maxEvolution</a>;
<a name="l00115"></a><a class="code" href="struct_cv_m_s_e_r_params.html#a2da123e24b459290065e7714bd7c1833">00115</a>     <span class="keywordtype">double</span> <a class="code" href="struct_cv_m_s_e_r_params.html#a2da123e24b459290065e7714bd7c1833" title="the area threshold to cause re-initialize">areaThreshold</a>;
<a name="l00117"></a><a class="code" href="struct_cv_m_s_e_r_params.html#ad06b0684eab5f764baf1ddcb9627dbe0">00117</a>     <span class="keywordtype">double</span> <a class="code" href="struct_cv_m_s_e_r_params.html#ad06b0684eab5f764baf1ddcb9627dbe0" title="ignore too small margin">minMargin</a>;
<a name="l00119"></a><a class="code" href="struct_cv_m_s_e_r_params.html#a968af0c998169f789c72f7c1320fd029">00119</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_m_s_e_r_params.html#a968af0c998169f789c72f7c1320fd029" title="the aperture size for edge blur">edgeBlurSize</a>;
<a name="l00120"></a>00120 } <a class="code" href="features2d_8hpp.html#af87750117989c8128fd6eb6a54c7d706">CvMSERParams</a>;
<a name="l00121"></a>00121 
<a name="l00122"></a>00122 CVAPI(<a class="code" href="struct_cv_m_s_e_r_params.html">CvMSERParams</a>) <a class="code" href="features2d_8hpp.html#adf4c9462fa087403093de16442ebb9ae">cvMSERParams</a>( <span class="keywordtype">int</span> <a class="code" href="namespacecv.html#ae24d37246741581c81cb1f207b107421">delta</a> <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ad0c0f363a0864b981b6819aa7e16b1f3">CV_DEFAULT</a>(5), <span class="keywordtype">int</span> min_area CV_DEFAULT(60),
<a name="l00123"></a>00123                            <span class="keywordtype">int</span> max_area CV_DEFAULT(14400), <span class="keywordtype">float</span> max_variation CV_DEFAULT(.25f),
<a name="l00124"></a>00124                            <span class="keywordtype">float</span> min_diversity CV_DEFAULT(.2f), <span class="keywordtype">int</span> max_evolution CV_DEFAULT(200),
<a name="l00125"></a>00125                            <span class="keywordtype">double</span> area_threshold CV_DEFAULT(1.01),
<a name="l00126"></a>00126                            <span class="keywordtype">double</span> min_margin CV_DEFAULT(.003),
<a name="l00127"></a>00127                            <span class="keywordtype">int</span> edge_blur_size CV_DEFAULT(5) );
<a name="l00128"></a>00128 
<a name="l00129"></a>00129 <span class="comment">// Extracts the contours of Maximally Stable Extremal Regions</span>
<a name="l00130"></a>00130 CVAPI(<span class="keywordtype">void</span>) <a class="code" href="features2d_8hpp.html#af062cd978825ecb88f426edd56cba97c">cvExtractMSER</a>( <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ac5046bc0456e9295d80b37774384798c">CvArr</a>* _img, <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ac5046bc0456e9295d80b37774384798c">CvArr</a>* _mask, <a class="code" href="struct_cv_seq.html">CvSeq</a>** contours, <a class="code" href="struct_cv_mem_storage.html">CvMemStorage</a>* storage, <a class="code" href="struct_cv_m_s_e_r_params.html">CvMSERParams</a> params );
<a name="l00131"></a>00131 
<a name="l00132"></a>00132 
<a name="l00133"></a><a class="code" href="struct_cv_star_keypoint.html">00133</a> typedef struct <a class="code" href="struct_cv_star_keypoint.html">CvStarKeypoint</a>
<a name="l00134"></a>00134 {
<a name="l00135"></a><a class="code" href="struct_cv_star_keypoint.html#a11e9bdef9f976cd6efd52f15528202f7">00135</a>     <a class="code" href="struct_cv_point.html">CvPoint</a> <a class="code" href="struct_cv_star_keypoint.html#a11e9bdef9f976cd6efd52f15528202f7">pt</a>;
<a name="l00136"></a><a class="code" href="struct_cv_star_keypoint.html#a484ba003548660389a9b547618f23a8b">00136</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_star_keypoint.html#a484ba003548660389a9b547618f23a8b">size</a>;
<a name="l00137"></a><a class="code" href="struct_cv_star_keypoint.html#a1f824a700a88dd7f8c0114292626cae0">00137</a>     <span class="keywordtype">float</span> <a class="code" href="struct_cv_star_keypoint.html#a1f824a700a88dd7f8c0114292626cae0">response</a>;
<a name="l00138"></a>00138 } <a class="code" href="features2d_8hpp.html#a3a861c677fca07583e7c2cefb9923c4c">CvStarKeypoint</a>;
<a name="l00139"></a>00139 
<a name="l00140"></a><a class="code" href="features2d_8hpp.html#a2f99191cda0700de3f89b88fd939fdaf">00140</a> <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#afa9cd5d65f77596b7dfb38dd8afe2325">CV_INLINE</a> <a class="code" href="struct_cv_star_keypoint.html">CvStarKeypoint</a> <a class="code" href="features2d_8hpp.html#a2f99191cda0700de3f89b88fd939fdaf">cvStarKeypoint</a>(<a class="code" href="struct_cv_point.html">CvPoint</a> pt, <span class="keywordtype">int</span> size, <span class="keywordtype">float</span> response)
<a name="l00141"></a>00141 {
<a name="l00142"></a>00142     <a class="code" href="struct_cv_star_keypoint.html">CvStarKeypoint</a> kpt;
<a name="l00143"></a>00143     kpt.<a class="code" href="struct_cv_star_keypoint.html#a11e9bdef9f976cd6efd52f15528202f7">pt</a> = pt;
<a name="l00144"></a>00144     kpt.<a class="code" href="struct_cv_star_keypoint.html#a484ba003548660389a9b547618f23a8b">size</a> = size;
<a name="l00145"></a>00145     kpt.<a class="code" href="struct_cv_star_keypoint.html#a1f824a700a88dd7f8c0114292626cae0">response</a> = response;
<a name="l00146"></a>00146     <span class="keywordflow">return</span> kpt;
<a name="l00147"></a>00147 }
<a name="l00148"></a>00148 
<a name="l00149"></a><a class="code" href="struct_cv_star_detector_params.html">00149</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_cv_star_detector_params.html">CvStarDetectorParams</a>
<a name="l00150"></a>00150 {
<a name="l00151"></a><a class="code" href="struct_cv_star_detector_params.html#ae4a5645ee251bf0b6bcfef97972b00ed">00151</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_star_detector_params.html#ae4a5645ee251bf0b6bcfef97972b00ed">maxSize</a>;
<a name="l00152"></a><a class="code" href="struct_cv_star_detector_params.html#a612e4bed30e8dbbda35f61c2b869360b">00152</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_star_detector_params.html#a612e4bed30e8dbbda35f61c2b869360b">responseThreshold</a>;
<a name="l00153"></a><a class="code" href="struct_cv_star_detector_params.html#ac6c399320ca6052b0767dafc2273f3c6">00153</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_star_detector_params.html#ac6c399320ca6052b0767dafc2273f3c6">lineThresholdProjected</a>;
<a name="l00154"></a><a class="code" href="struct_cv_star_detector_params.html#af8dddfad7b61bb6ce1bc3f3cc9b663a6">00154</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_star_detector_params.html#af8dddfad7b61bb6ce1bc3f3cc9b663a6">lineThresholdBinarized</a>;
<a name="l00155"></a><a class="code" href="struct_cv_star_detector_params.html#a213ff31a306fcf3fbace6939d8154cd4">00155</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_star_detector_params.html#a213ff31a306fcf3fbace6939d8154cd4">suppressNonmaxSize</a>;
<a name="l00156"></a>00156 } <a class="code" href="features2d_8hpp.html#a8ec546e3ea4eb7a000b3eb77c0649fed">CvStarDetectorParams</a>;
<a name="l00157"></a>00157 
<a name="l00158"></a><a class="code" href="features2d_8hpp.html#a06c87c7caa7c4baf9c36a9909f735de3">00158</a> <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#afa9cd5d65f77596b7dfb38dd8afe2325">CV_INLINE</a> <a class="code" href="struct_cv_star_detector_params.html">CvStarDetectorParams</a> <a class="code" href="features2d_8hpp.html#a06c87c7caa7c4baf9c36a9909f735de3">cvStarDetectorParams</a>(
<a name="l00159"></a>00159     <span class="keywordtype">int</span> maxSize <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ad0c0f363a0864b981b6819aa7e16b1f3">CV_DEFAULT</a>(45),
<a name="l00160"></a>00160     <span class="keywordtype">int</span> responseThreshold <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ad0c0f363a0864b981b6819aa7e16b1f3">CV_DEFAULT</a>(30),
<a name="l00161"></a>00161     <span class="keywordtype">int</span> lineThresholdProjected <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ad0c0f363a0864b981b6819aa7e16b1f3">CV_DEFAULT</a>(10),
<a name="l00162"></a>00162     <span class="keywordtype">int</span> lineThresholdBinarized <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ad0c0f363a0864b981b6819aa7e16b1f3">CV_DEFAULT</a>(8),
<a name="l00163"></a>00163     <span class="keywordtype">int</span> suppressNonmaxSize <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ad0c0f363a0864b981b6819aa7e16b1f3">CV_DEFAULT</a>(5))
<a name="l00164"></a>00164 {
<a name="l00165"></a>00165     <a class="code" href="struct_cv_star_detector_params.html">CvStarDetectorParams</a> params;
<a name="l00166"></a>00166     params.<a class="code" href="struct_cv_star_detector_params.html#ae4a5645ee251bf0b6bcfef97972b00ed">maxSize</a> = maxSize;
<a name="l00167"></a>00167     params.<a class="code" href="struct_cv_star_detector_params.html#a612e4bed30e8dbbda35f61c2b869360b">responseThreshold</a> = responseThreshold;
<a name="l00168"></a>00168     params.<a class="code" href="struct_cv_star_detector_params.html#ac6c399320ca6052b0767dafc2273f3c6">lineThresholdProjected</a> = lineThresholdProjected;
<a name="l00169"></a>00169     params.<a class="code" href="struct_cv_star_detector_params.html#af8dddfad7b61bb6ce1bc3f3cc9b663a6">lineThresholdBinarized</a> = lineThresholdBinarized;
<a name="l00170"></a>00170     params.<a class="code" href="struct_cv_star_detector_params.html#a213ff31a306fcf3fbace6939d8154cd4">suppressNonmaxSize</a> = suppressNonmaxSize;
<a name="l00171"></a>00171 
<a name="l00172"></a>00172     <span class="keywordflow">return</span> params;
<a name="l00173"></a>00173 }
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 CVAPI(<a class="code" href="struct_cv_seq.html">CvSeq</a>*) <a class="code" href="features2d_8hpp.html#ad1b8ab41e958f911abaebb3b2d114e90">cvGetStarKeypoints</a>( const <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ac5046bc0456e9295d80b37774384798c">CvArr</a>* img, <a class="code" href="struct_cv_mem_storage.html">CvMemStorage</a>* storage,
<a name="l00176"></a>00176         <a class="code" href="struct_cv_star_detector_params.html">CvStarDetectorParams</a> params <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ad0c0f363a0864b981b6819aa7e16b1f3">CV_DEFAULT</a>(<a class="code" href="features2d_8hpp.html#a06c87c7caa7c4baf9c36a9909f735de3">cvStarDetectorParams</a>()));
<a name="l00177"></a>00177 
<a name="l00178"></a>00178 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00179"></a>00179 <span class="preprocessor"></span>}
<a name="l00180"></a>00180 
<a name="l00181"></a>00181 <span class="keyword">namespace </span>cv
<a name="l00182"></a>00182 {
<a name="l00183"></a><a class="code" href="structcv_1_1_default_rng_auto.html">00183</a>     <span class="keyword">struct </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="structcv_1_1_default_rng_auto.html">DefaultRngAuto</a>
<a name="l00184"></a>00184     {
<a name="l00185"></a><a class="code" href="structcv_1_1_default_rng_auto.html#a185253a8da68974e317c361affe1178b">00185</a>         <span class="keyword">const</span> <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#abc0f5bc07737e498f287334775dff2b6">uint64</a> <a class="code" href="structcv_1_1_default_rng_auto.html#a185253a8da68974e317c361affe1178b">old_state</a>;
<a name="l00186"></a>00186 
<a name="l00187"></a><a class="code" href="structcv_1_1_default_rng_auto.html#ad5eebc8c7e2fe7ecd913814bc2737914">00187</a>         <a class="code" href="structcv_1_1_default_rng_auto.html#ad5eebc8c7e2fe7ecd913814bc2737914">DefaultRngAuto</a>() : old_state(<a class="code" href="namespacecv.html#a75843061d150ad6564b5447e38e57722" title="returns the thread-local Random number generator">theRNG</a>().state) { <a class="code" href="namespacecv.html#a75843061d150ad6564b5447e38e57722" title="returns the thread-local Random number generator">theRNG</a>().<a class="code" href="classcv_1_1_r_n_g.html#a993bd2e6a5a9b8f3b37ba6049b523136">state</a> = (<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#abc0f5bc07737e498f287334775dff2b6">uint64</a>)-1; }
<a name="l00188"></a><a class="code" href="structcv_1_1_default_rng_auto.html#aa32c09ce5a436ef33211da5cd85744bb">00188</a>         <a class="code" href="structcv_1_1_default_rng_auto.html#aa32c09ce5a436ef33211da5cd85744bb">~DefaultRngAuto</a>() { <a class="code" href="namespacecv.html#a75843061d150ad6564b5447e38e57722" title="returns the thread-local Random number generator">theRNG</a>().<a class="code" href="classcv_1_1_r_n_g.html#a993bd2e6a5a9b8f3b37ba6049b523136">state</a> = old_state; }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190         <a class="code" href="structcv_1_1_default_rng_auto.html">DefaultRngAuto</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="structcv_1_1_default_rng_auto.html">DefaultRngAuto</a>&amp;);
<a name="l00191"></a>00191     };
<a name="l00192"></a>00192 
<a name="l00193"></a>00193 
<a name="l00194"></a>00194 <span class="comment">// CvAffinePose: defines a parameterized affine transformation of an image patch.</span>
<a name="l00195"></a>00195 <span class="comment">// An image patch is rotated on angle phi (in degrees), then scaled lambda1 times</span>
<a name="l00196"></a>00196 <span class="comment">// along horizontal and lambda2 times along vertical direction, and then rotated again</span>
<a name="l00197"></a>00197 <span class="comment">// on angle (theta - phi).</span>
<a name="l00198"></a><a class="code" href="classcv_1_1_cv_affine_pose.html">00198</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_cv_affine_pose.html">CvAffinePose</a>
<a name="l00199"></a>00199 {
<a name="l00200"></a>00200 <span class="keyword">public</span>:
<a name="l00201"></a><a class="code" href="classcv_1_1_cv_affine_pose.html#a6935fab7cdae0323cee00d35d6b68db8">00201</a>     <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_cv_affine_pose.html#a6935fab7cdae0323cee00d35d6b68db8">phi</a>;
<a name="l00202"></a><a class="code" href="classcv_1_1_cv_affine_pose.html#a07bc5cfd27a73950aee42c4392cab5f5">00202</a>     <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_cv_affine_pose.html#a07bc5cfd27a73950aee42c4392cab5f5">theta</a>;
<a name="l00203"></a><a class="code" href="classcv_1_1_cv_affine_pose.html#aa040397c98c023b75530db70004cd50f">00203</a>     <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_cv_affine_pose.html#aa040397c98c023b75530db70004cd50f">lambda1</a>;
<a name="l00204"></a><a class="code" href="classcv_1_1_cv_affine_pose.html#a9868b77bc608b26c168a306dc0a20131">00204</a>     <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_cv_affine_pose.html#a9868b77bc608b26c168a306dc0a20131">lambda2</a>;
<a name="l00205"></a>00205 };
<a name="l00206"></a>00206 
<a name="l00219"></a><a class="code" href="classcv_1_1_key_point.html">00219</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a13d649e3f5582a106caaa98f187dd34b">CV_EXPORTS_W_SIMPLE</a> <a class="code" href="classcv_1_1_key_point.html">KeyPoint</a>
<a name="l00220"></a>00220 {
<a name="l00221"></a>00221 <span class="keyword">public</span>:
<a name="l00223"></a><a class="code" href="classcv_1_1_key_point.html#a2fadd76d5cfe880fdfd3343d09c9903d">00223</a>     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ae435babf3ce7cca990524b23adf6b4a3">CV_WRAP</a> <a class="code" href="classcv_1_1_key_point.html#a2fadd76d5cfe880fdfd3343d09c9903d" title="the default constructor">KeyPoint</a>() : pt(0,0), size(0), angle(-1), response(0), octave(0), class_id(-1) {}
<a name="l00225"></a><a class="code" href="classcv_1_1_key_point.html#a8ce2d246f9dbd4ce3f1539bf40be9533">00225</a>     <a class="code" href="classcv_1_1_key_point.html">KeyPoint</a>(<a class="code" href="classcv_1_1_point__.html">Point2f</a> _pt, <span class="keywordtype">float</span> _size, <span class="keywordtype">float</span> _angle=-1,
<a name="l00226"></a>00226             <span class="keywordtype">float</span> _response=0, <span class="keywordtype">int</span> _octave=0, <span class="keywordtype">int</span> _class_id=-1)
<a name="l00227"></a>00227             : pt(_pt), size(_size), angle(_angle),
<a name="l00228"></a>00228             response(_response), octave(_octave), class_id(_class_id) {}
<a name="l00230"></a><a class="code" href="classcv_1_1_key_point.html#a8c43060b2e28f13ae25f49bcecc9c090">00230</a>     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ae435babf3ce7cca990524b23adf6b4a3">CV_WRAP</a> <a class="code" href="classcv_1_1_key_point.html">KeyPoint</a>(<span class="keywordtype">float</span> <a class="code" href="highgui__c_8h.html#ad77deca22f617d3f0e0eb786445689fc">x</a>, <span class="keywordtype">float</span> <a class="code" href="highgui__c_8h.html#a9298c7ad619074f5285b32c6b72bfdea">y</a>, <span class="keywordtype">float</span> _size, <span class="keywordtype">float</span> _angle=-1,
<a name="l00231"></a>00231             <span class="keywordtype">float</span> _response=0, <span class="keywordtype">int</span> _octave=0, <span class="keywordtype">int</span> _class_id=-1)
<a name="l00232"></a>00232             : pt(x, y), size(_size), angle(_angle),
<a name="l00233"></a>00233             response(_response), octave(_octave), class_id(_class_id) {}
<a name="l00235"></a>00235     <span class="keyword">static</span> <span class="keywordtype">void</span> convert(<span class="keyword">const</span> std::vector&lt;KeyPoint&gt;&amp; keypoints,
<a name="l00236"></a>00236                         <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> std::vector&lt;Point2f&gt;&amp; points2f,
<a name="l00237"></a>00237                         <span class="keyword">const</span> std::vector&lt;int&gt;&amp; keypointIndexes=std::vector&lt;int&gt;());
<a name="l00239"></a>00239     <span class="keyword">static</span> <span class="keywordtype">void</span> convert(<span class="keyword">const</span> std::vector&lt;Point2f&gt;&amp; points2f,
<a name="l00240"></a>00240                         <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> std::vector&lt;KeyPoint&gt;&amp; keypoints,
<a name="l00241"></a>00241                         <span class="keywordtype">float</span> size=1, <span class="keywordtype">float</span> response=1, <span class="keywordtype">int</span> octave=0, <span class="keywordtype">int</span> class_id=-1);
<a name="l00242"></a>00242 
<a name="l00246"></a>00246     <span class="keyword">static</span> <span class="keywordtype">float</span> overlap(<span class="keyword">const</span> <a class="code" href="classcv_1_1_key_point.html">KeyPoint</a>&amp; kp1, <span class="keyword">const</span> <a class="code" href="classcv_1_1_key_point.html">KeyPoint</a>&amp; kp2);
<a name="l00247"></a>00247 
<a name="l00248"></a><a class="code" href="classcv_1_1_key_point.html#a8410f718cb06603edfb06a597ecdd853">00248</a>     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a9e800d960e0fc30e7f83c67c98e69ed2">CV_PROP_RW</a> <a class="code" href="classcv_1_1_point__.html">Point2f</a> <a class="code" href="classcv_1_1_key_point.html#a8410f718cb06603edfb06a597ecdd853" title="coordinates of the keypoints">pt</a>; 
<a name="l00249"></a><a class="code" href="classcv_1_1_key_point.html#ae3d0ccdfaa4b8e277d40d4ce2e5a11c2">00249</a>     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a9e800d960e0fc30e7f83c67c98e69ed2">CV_PROP_RW</a> <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_key_point.html#ae3d0ccdfaa4b8e277d40d4ce2e5a11c2" title="diameter of the meaningfull keypoint neighborhood">size</a>; 
<a name="l00250"></a><a class="code" href="classcv_1_1_key_point.html#a6b5e108ec030c0caf016fda4b4ca688f">00250</a>     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a9e800d960e0fc30e7f83c67c98e69ed2">CV_PROP_RW</a> <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_key_point.html#a6b5e108ec030c0caf016fda4b4ca688f" title="computed orientation of the keypoint (-1 if not applicable)">angle</a>; 
<a name="l00251"></a><a class="code" href="classcv_1_1_key_point.html#acbb7a7d1608c7b14edec418f5098f2d7">00251</a>     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a9e800d960e0fc30e7f83c67c98e69ed2">CV_PROP_RW</a> <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_key_point.html#acbb7a7d1608c7b14edec418f5098f2d7" title="the response by which the most strong keypoints have been selected. Can be used for the further sorti...">response</a>; 
<a name="l00252"></a><a class="code" href="classcv_1_1_key_point.html#abe25c6483d8db938d0cd15e0b4649720">00252</a>     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a9e800d960e0fc30e7f83c67c98e69ed2">CV_PROP_RW</a> <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_key_point.html#abe25c6483d8db938d0cd15e0b4649720" title="octave (pyramid layer) from which the keypoint has been extracted">octave</a>; 
<a name="l00253"></a><a class="code" href="classcv_1_1_key_point.html#adcb6d1aa47b2e8d29b0b302982127269">00253</a>     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a9e800d960e0fc30e7f83c67c98e69ed2">CV_PROP_RW</a> <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_key_point.html#adcb6d1aa47b2e8d29b0b302982127269" title="object class (if the keypoints need to be clustered by an object they belong to)">class_id</a>; 
<a name="l00254"></a>00254 };
<a name="l00255"></a>00255 
<a name="l00257"></a>00257 <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(<a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; fs, <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name, <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints);
<a name="l00259"></a>00259 <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; node, <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> vector&lt;KeyPoint&gt;&amp; keypoints);    
<a name="l00260"></a>00260 
<a name="l00266"></a><a class="code" href="classcv_1_1_s_i_f_t.html">00266</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_s_i_f_t.html">SIFT</a>
<a name="l00267"></a>00267 {
<a name="l00268"></a>00268 <span class="keyword">public</span>:
<a name="l00269"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">00269</a>     <span class="keyword">struct </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">CommonParams</a>
<a name="l00270"></a>00270     {
<a name="l00271"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a3516d8027be21337d54fa9f342f0de12">00271</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DEFAULT_NOCTAVES = 4;
<a name="l00272"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#ac5b52d9fb2a3670b2a1e118635997d83">00272</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DEFAULT_NOCTAVE_LAYERS = 3;
<a name="l00273"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a1c06d5c17c1a277d3ab7331a2e1d6032">00273</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DEFAULT_FIRST_OCTAVE = -1;
<a name="l00274"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a8b7c1636cbc9292dad6415b100b5e190a1c0fbeaa6583f475bcf560370d779071">00274</a>         <span class="keyword">enum</span>{ FIRST_ANGLE = 0, AVERAGE_ANGLE = 1 };
<a name="l00275"></a>00275 
<a name="l00276"></a>00276         <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">CommonParams</a>();
<a name="l00277"></a>00277         <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">CommonParams</a>( <span class="keywordtype">int</span> _nOctaves, <span class="keywordtype">int</span> _nOctaveLayers, <span class="keywordtype">int</span> _firstOctave, <span class="keywordtype">int</span> _angleMode );
<a name="l00278"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a4d293014ad69e9fc9057b7772c07b5e0">00278</a>         <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a4d293014ad69e9fc9057b7772c07b5e0">nOctaves</a>, nOctaveLayers, firstOctave;
<a name="l00279"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a55d88b1227e72f90db941c9b4973298e">00279</a>         <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a55d88b1227e72f90db941c9b4973298e">angleMode</a>;
<a name="l00280"></a>00280     };
<a name="l00281"></a>00281 
<a name="l00282"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">00282</a>     <span class="keyword">struct </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">DetectorParams</a>
<a name="l00283"></a>00283     {
<a name="l00284"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html#a4d7ba322238dc0feb3af2f63960e27ef">00284</a>         <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html#a4d7ba322238dc0feb3af2f63960e27ef">GET_DEFAULT_THRESHOLD</a>() { <span class="keywordflow">return</span> 0.04 / <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#ac5b52d9fb2a3670b2a1e118635997d83">SIFT::CommonParams::DEFAULT_NOCTAVE_LAYERS</a> / 2.0; }
<a name="l00285"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html#a7fc13c52f74349ae32fa66add5f5b85c">00285</a>         <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html#a7fc13c52f74349ae32fa66add5f5b85c">GET_DEFAULT_EDGE_THRESHOLD</a>() { <span class="keywordflow">return</span> 10.0; }
<a name="l00286"></a>00286 
<a name="l00287"></a>00287         <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">DetectorParams</a>();
<a name="l00288"></a>00288         <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">DetectorParams</a>( <span class="keywordtype">double</span> _threshold, <span class="keywordtype">double</span> _edgeThreshold );
<a name="l00289"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html#a9b82821034692cc3e1f9bd0c51da9dda">00289</a>         <span class="keywordtype">double</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html#a9b82821034692cc3e1f9bd0c51da9dda">threshold</a>, edgeThreshold;
<a name="l00290"></a>00290     };
<a name="l00291"></a>00291 
<a name="l00292"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">00292</a>     <span class="keyword">struct </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">DescriptorParams</a>
<a name="l00293"></a>00293     {
<a name="l00294"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#a995de2653d08ebbc7b606e6eab895145">00294</a>         <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#a995de2653d08ebbc7b606e6eab895145">GET_DEFAULT_MAGNIFICATION</a>() { <span class="keywordflow">return</span> 3.0; }
<a name="l00295"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#a2e7d8c1179c021886b67074908479027">00295</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> DEFAULT_IS_NORMALIZE = <span class="keyword">true</span>;
<a name="l00296"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#aac9f852285f283f0d8575877044120c4">00296</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DESCRIPTOR_SIZE = 128;
<a name="l00297"></a>00297 
<a name="l00298"></a>00298         <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">DescriptorParams</a>();
<a name="l00299"></a>00299         <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">DescriptorParams</a>( <span class="keywordtype">double</span> _magnification, <span class="keywordtype">bool</span> _isNormalize, <span class="keywordtype">bool</span> _recalculateAngles );
<a name="l00300"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#acf5186e782419603de311665a12c9c1e">00300</a>         <span class="keywordtype">double</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#acf5186e782419603de311665a12c9c1e">magnification</a>;
<a name="l00301"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#a306280ea3b3e4808b6539f685a7819d5">00301</a>         <span class="keywordtype">bool</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#a306280ea3b3e4808b6539f685a7819d5">isNormalize</a>;
<a name="l00302"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#a129cd968f84cfe977c58d2c240efff8d">00302</a>         <span class="keywordtype">bool</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#a129cd968f84cfe977c58d2c240efff8d">recalculateAngles</a>;
<a name="l00303"></a>00303     };
<a name="l00304"></a>00304 
<a name="l00305"></a>00305     <a class="code" href="classcv_1_1_s_i_f_t.html">SIFT</a>();
<a name="l00307"></a>00307     <a class="code" href="classcv_1_1_s_i_f_t.html">SIFT</a>( <span class="keywordtype">double</span> _threshold, <span class="keywordtype">double</span> _edgeThreshold,
<a name="l00308"></a>00308           <span class="keywordtype">int</span> _nOctaves=CommonParams::DEFAULT_NOCTAVES,
<a name="l00309"></a>00309           <span class="keywordtype">int</span> _nOctaveLayers=CommonParams::DEFAULT_NOCTAVE_LAYERS,
<a name="l00310"></a>00310           <span class="keywordtype">int</span> _firstOctave=CommonParams::DEFAULT_FIRST_OCTAVE,
<a name="l00311"></a>00311           <span class="keywordtype">int</span> _angleMode=CommonParams::FIRST_ANGLE );
<a name="l00313"></a>00313     <a class="code" href="classcv_1_1_s_i_f_t.html">SIFT</a>( <span class="keywordtype">double</span> _magnification, <span class="keywordtype">bool</span> _isNormalize=<span class="keyword">true</span>,
<a name="l00314"></a>00314           <span class="keywordtype">bool</span> _recalculateAngles = <span class="keyword">true</span>,
<a name="l00315"></a>00315           <span class="keywordtype">int</span> _nOctaves=CommonParams::DEFAULT_NOCTAVES,
<a name="l00316"></a>00316           <span class="keywordtype">int</span> _nOctaveLayers=CommonParams::DEFAULT_NOCTAVE_LAYERS,
<a name="l00317"></a>00317           <span class="keywordtype">int</span> _firstOctave=CommonParams::DEFAULT_FIRST_OCTAVE,
<a name="l00318"></a>00318           <span class="keywordtype">int</span> _angleMode=CommonParams::FIRST_ANGLE );
<a name="l00319"></a>00319     <a class="code" href="classcv_1_1_s_i_f_t.html">SIFT</a>( <span class="keyword">const</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">CommonParams</a>&amp; _commParams,
<a name="l00320"></a>00320           <span class="keyword">const</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">DetectorParams</a>&amp; _detectorParams = <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">DetectorParams</a>(),
<a name="l00321"></a>00321           <span class="keyword">const</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">DescriptorParams</a>&amp; _descriptorParams = <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">DescriptorParams</a>() );
<a name="l00322"></a>00322 
<a name="l00324"></a><a class="code" href="classcv_1_1_s_i_f_t.html#a751a07f0868aa79a4c0a342297e457cc">00324</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_s_i_f_t.html#a751a07f0868aa79a4c0a342297e457cc" title="returns the descriptor size in floats (128)">descriptorSize</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> DescriptorParams::DESCRIPTOR_SIZE; }
<a name="l00326"></a>00326     <span class="keywordtype">void</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; img, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>,
<a name="l00327"></a>00327                     vector&lt;KeyPoint&gt;&amp; keypoints) <span class="keyword">const</span>;
<a name="l00330"></a>00330     <span class="keywordtype">void</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; img, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>,
<a name="l00331"></a>00331                     vector&lt;KeyPoint&gt;&amp; keypoints,
<a name="l00332"></a>00332                     <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; descriptors,
<a name="l00333"></a>00333                     <span class="keywordtype">bool</span> useProvidedKeypoints=<span class="keyword">false</span>) <span class="keyword">const</span>;
<a name="l00334"></a>00334 
<a name="l00335"></a><a class="code" href="classcv_1_1_s_i_f_t.html#a79449643c17d5dd68a1faf5d37829869">00335</a>     <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">CommonParams</a> <a class="code" href="classcv_1_1_s_i_f_t.html#a79449643c17d5dd68a1faf5d37829869">getCommonParams</a> ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> commParams; }
<a name="l00336"></a><a class="code" href="classcv_1_1_s_i_f_t.html#aed8805f36edb84e1401d552b7fea19a1">00336</a>     <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">DetectorParams</a> <a class="code" href="classcv_1_1_s_i_f_t.html#aed8805f36edb84e1401d552b7fea19a1">getDetectorParams</a> ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> detectorParams; }
<a name="l00337"></a><a class="code" href="classcv_1_1_s_i_f_t.html#ad19b206f95da3588199669331de57287">00337</a>     <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">DescriptorParams</a> <a class="code" href="classcv_1_1_s_i_f_t.html#ad19b206f95da3588199669331de57287">getDescriptorParams</a> ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> descriptorParams; }
<a name="l00338"></a>00338 <span class="keyword">protected</span>:
<a name="l00339"></a><a class="code" href="classcv_1_1_s_i_f_t.html#a8143aa7ba1cb7ecba205419e26469d0e">00339</a>     <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">CommonParams</a> <a class="code" href="classcv_1_1_s_i_f_t.html#a8143aa7ba1cb7ecba205419e26469d0e">commParams</a>;
<a name="l00340"></a><a class="code" href="classcv_1_1_s_i_f_t.html#af586f6e4aa41844cabdbf578906fc5ec">00340</a>     <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">DetectorParams</a> <a class="code" href="classcv_1_1_s_i_f_t.html#af586f6e4aa41844cabdbf578906fc5ec">detectorParams</a>;
<a name="l00341"></a><a class="code" href="classcv_1_1_s_i_f_t.html#a8c290ccabfbfaad28ffcf1ff473e3cf5">00341</a>     <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">DescriptorParams</a> <a class="code" href="classcv_1_1_s_i_f_t.html#a8c290ccabfbfaad28ffcf1ff473e3cf5">descriptorParams</a>;
<a name="l00342"></a>00342 };
<a name="l00343"></a>00343 
<a name="l00344"></a>00344     
<a name="l00350"></a><a class="code" href="classcv_1_1_s_u_r_f.html">00350</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a67ea671a3582ce612ac3c281e067f480">CV_EXPORTS_W</a> <a class="code" href="classcv_1_1_s_u_r_f.html">SURF</a> : <span class="keyword">public</span> <a class="code" href="struct_cv_s_u_r_f_params.html">CvSURFParams</a>
<a name="l00351"></a>00351 {
<a name="l00352"></a>00352 <span class="keyword">public</span>:
<a name="l00354"></a>00354     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ae435babf3ce7cca990524b23adf6b4a3">CV_WRAP</a> <a class="code" href="classcv_1_1_s_u_r_f.html">SURF</a>();
<a name="l00356"></a>00356     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ae435babf3ce7cca990524b23adf6b4a3">CV_WRAP</a> SURF(<span class="keywordtype">double</span> _hessianThreshold, <span class="keywordtype">int</span> _nOctaves=4,
<a name="l00357"></a>00357          <span class="keywordtype">int</span> _nOctaveLayers=2, <span class="keywordtype">bool</span> _extended=<span class="keyword">false</span>);
<a name="l00358"></a>00358 
<a name="l00360"></a>00360     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ae435babf3ce7cca990524b23adf6b4a3">CV_WRAP</a> <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span>;
<a name="l00362"></a><a class="code" href="classcv_1_1_s_u_r_f.html#a8f388811fa14865451b44f42f6603346">00362</a>     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a6a1f29cf8d55c0ee1b4687f6006da0b9">CV_WRAP_AS</a>(detect) <a class="code" href="background__segm_8hpp.html#a8bb47f092d473522721002c86c13b94e">void</a> operator()(const <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; img, const <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>,
<a name="l00363"></a>00363                     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> vector&lt;<a class="code" href="classcv_1_1_key_point.html">KeyPoint</a>&gt;&amp; keypoints) const;
<a name="l00365"></a><a class="code" href="classcv_1_1_s_u_r_f.html#afb012976cceb9f842cd34ad54283ff6b">00365</a>     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a6a1f29cf8d55c0ee1b4687f6006da0b9">CV_WRAP_AS</a>(detect) <span class="keywordtype">void</span> operator()(const <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; img, const <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; mask,
<a name="l00366"></a>00366                     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> vector&lt;<a class="code" href="classcv_1_1_key_point.html">KeyPoint</a>&gt;&amp; keypoints,
<a name="l00367"></a>00367                     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> vector&lt;<span class="keywordtype">float</span>&gt;&amp; descriptors,
<a name="l00368"></a><a class="code" href="classcv_1_1_s_u_r_f.html#a649bce43365654281c2e84045b2e7cca">00368</a>                     <span class="keywordtype">bool</span> useProvidedKeypoints=false) const;
<a name="l00369"></a>00369 };
<a name="l00370"></a>00370 
<a name="l00380"></a><a class="code" href="classcv_1_1_m_s_e_r.html">00380</a> class <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a67ea671a3582ce612ac3c281e067f480">CV_EXPORTS_W</a> <a class="code" href="classcv_1_1_m_s_e_r.html">MSER</a> : public <a class="code" href="struct_cv_m_s_e_r_params.html">CvMSERParams</a>
<a name="l00381"></a>00381 {
<a name="l00382"></a>00382 <span class="keyword">public</span>:
<a name="l00384"></a>00384     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ae435babf3ce7cca990524b23adf6b4a3">CV_WRAP</a> <a class="code" href="classcv_1_1_m_s_e_r.html">MSER</a>();
<a name="l00386"></a>00386     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ae435babf3ce7cca990524b23adf6b4a3">CV_WRAP</a> MSER( <span class="keywordtype">int</span> _delta, <span class="keywordtype">int</span> _min_area, <span class="keywordtype">int</span> _max_area,
<a name="l00387"></a>00387           <span class="keywordtype">double</span> _max_variation, <span class="keywordtype">double</span> _min_diversity,
<a name="l00388"></a>00388           <span class="keywordtype">int</span> _max_evolution, <span class="keywordtype">double</span> _area_threshold,
<a name="l00389"></a>00389           <span class="keywordtype">double</span> _min_margin, <span class="keywordtype">int</span> _edge_blur_size );
<a name="l00391"></a>00391     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a6a1f29cf8d55c0ee1b4687f6006da0b9">CV_WRAP_AS</a>(detect) <span class="keywordtype">void</span> operator()( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image,
<a name="l00392"></a><a class="code" href="classcv_1_1_m_s_e_r.html#a68c34f7c00ab0f9ac1f61f20e521d152">00392</a>         <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> vector&lt;vector&lt;Point&gt; &gt;&amp; msers, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; mask ) <span class="keyword">const</span>;
<a name="l00393"></a>00393 };
<a name="l00394"></a>00394 
<a name="l00400"></a><a class="code" href="classcv_1_1_star_detector.html">00400</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a67ea671a3582ce612ac3c281e067f480">CV_EXPORTS_W</a> <a class="code" href="classcv_1_1_star_detector.html">StarDetector</a> : <span class="keyword">public</span> <a class="code" href="struct_cv_star_detector_params.html">CvStarDetectorParams</a>
<a name="l00401"></a>00401 {
<a name="l00402"></a>00402 <span class="keyword">public</span>:
<a name="l00404"></a>00404     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ae435babf3ce7cca990524b23adf6b4a3">CV_WRAP</a> <a class="code" href="classcv_1_1_star_detector.html">StarDetector</a>();
<a name="l00406"></a>00406     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ae435babf3ce7cca990524b23adf6b4a3">CV_WRAP</a> StarDetector(<span class="keywordtype">int</span> _maxSize, <span class="keywordtype">int</span> _responseThreshold,
<a name="l00407"></a>00407                  <span class="keywordtype">int</span> _lineThresholdProjected,
<a name="l00408"></a>00408                  <span class="keywordtype">int</span> _lineThresholdBinarized,
<a name="l00409"></a>00409                  <span class="keywordtype">int</span> _suppressNonmaxSize);
<a name="l00411"></a>00411     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a6a1f29cf8d55c0ee1b4687f6006da0b9">CV_WRAP_AS</a>(detect) <span class="keywordtype">void</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image,
<a name="l00412"></a><a class="code" href="classcv_1_1_star_detector.html#a8225f5809abb2f6009f867e9134ac082">00412</a>                 <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> vector&lt;KeyPoint&gt;&amp; keypoints) <span class="keyword">const</span>;
<a name="l00413"></a>00413 };
<a name="l00414"></a>00414 
<a name="l00416"></a>00416 <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a5f5989987e233d1ff6f9eb421b3d3356" title="detects corners using FAST algorithm by E. Rosten">FAST</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> vector&lt;KeyPoint&gt;&amp; keypoints,
<a name="l00417"></a>00417                       <span class="keywordtype">int</span> <a class="code" href="namespacecv.html#aad4b13bcee0029196e54d61c2f928a12">threshold</a>, <span class="keywordtype">bool</span> nonmaxSupression=<span class="keyword">true</span> );
<a name="l00418"></a>00418 
<a name="l00422"></a><a class="code" href="classcv_1_1_patch_generator.html">00422</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>
<a name="l00423"></a>00423 {
<a name="l00424"></a>00424 <span class="keyword">public</span>:
<a name="l00425"></a>00425     <a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>();
<a name="l00426"></a>00426     <a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>(<span class="keywordtype">double</span> _backgroundMin, <span class="keywordtype">double</span> _backgroundMax,
<a name="l00427"></a>00427                    <span class="keywordtype">double</span> _noiseRange, <span class="keywordtype">bool</span> _randomBlur=<span class="keyword">true</span>,
<a name="l00428"></a>00428                    <span class="keywordtype">double</span> _lambdaMin=0.6, <span class="keywordtype">double</span> _lambdaMax=1.5,
<a name="l00429"></a>00429                    <span class="keywordtype">double</span> _thetaMin=-<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a677b89fae9308b340ddaebf0dba8455f">CV_PI</a>, <span class="keywordtype">double</span> _thetaMax=<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a677b89fae9308b340ddaebf0dba8455f">CV_PI</a>,
<a name="l00430"></a>00430                    <span class="keywordtype">double</span> _phiMin=-<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a677b89fae9308b340ddaebf0dba8455f">CV_PI</a>, <span class="keywordtype">double</span> _phiMax=<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a677b89fae9308b340ddaebf0dba8455f">CV_PI</a> );
<a name="l00431"></a>00431     <span class="keywordtype">void</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, <a class="code" href="classcv_1_1_point__.html">Point2f</a> pt, <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; patch, <a class="code" href="classcv_1_1_size__.html">Size</a> patchSize, <a class="code" href="classcv_1_1_r_n_g.html">RNG</a>&amp; rng) <span class="keyword">const</span>;
<a name="l00432"></a>00432     <span class="keywordtype">void</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2fc1afdc86c4b023c530a528d0a8ae3f" title="performs affine transformation of each element of multi-channel input matrix">transform</a>, <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; patch,
<a name="l00433"></a>00433                     <a class="code" href="classcv_1_1_size__.html">Size</a> patchSize, <a class="code" href="classcv_1_1_r_n_g.html">RNG</a>&amp; rng) <span class="keyword">const</span>;
<a name="l00434"></a>00434     <span class="keywordtype">void</span> warpWholeImage(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; matT, <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; buf,
<a name="l00435"></a>00435                         <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; warped, <span class="keywordtype">int</span> border, <a class="code" href="classcv_1_1_r_n_g.html">RNG</a>&amp; rng) <span class="keyword">const</span>;
<a name="l00436"></a>00436     <span class="keywordtype">void</span> generateRandomTransform(<a class="code" href="classcv_1_1_point__.html">Point2f</a> srcCenter, <a class="code" href="classcv_1_1_point__.html">Point2f</a> dstCenter,
<a name="l00437"></a>00437                                  <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; transform, <a class="code" href="classcv_1_1_r_n_g.html">RNG</a>&amp; rng,
<a name="l00438"></a>00438                                  <span class="keywordtype">bool</span> inverse=<span class="keyword">false</span>) <span class="keyword">const</span>;
<a name="l00439"></a>00439     <span class="keywordtype">void</span> setAffineParam(<span class="keywordtype">double</span> lambda, <span class="keywordtype">double</span> <a class="code" href="namespacecv.html#a2803266947a08c4e73450fa450bdca35">theta</a>, <span class="keywordtype">double</span> phi);
<a name="l00440"></a>00440     
<a name="l00441"></a><a class="code" href="classcv_1_1_patch_generator.html#a3c2b6aca2c406e7617dbd5fd83ec5a0a">00441</a>     <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_patch_generator.html#a3c2b6aca2c406e7617dbd5fd83ec5a0a">backgroundMin</a>, backgroundMax;
<a name="l00442"></a><a class="code" href="classcv_1_1_patch_generator.html#a3c8dcaf83943fb23d3f92aeda91d9c96">00442</a>     <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_patch_generator.html#a3c8dcaf83943fb23d3f92aeda91d9c96">noiseRange</a>;
<a name="l00443"></a><a class="code" href="classcv_1_1_patch_generator.html#ade5abfe6a85cace20395aed14ffece51">00443</a>     <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_patch_generator.html#ade5abfe6a85cace20395aed14ffece51">randomBlur</a>;
<a name="l00444"></a><a class="code" href="classcv_1_1_patch_generator.html#a22ea3826cd7c440b966330b112889ee6">00444</a>     <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_patch_generator.html#a22ea3826cd7c440b966330b112889ee6">lambdaMin</a>, lambdaMax;
<a name="l00445"></a><a class="code" href="classcv_1_1_patch_generator.html#a5177046d4572deffe9cb86786bcea262">00445</a>     <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_patch_generator.html#a5177046d4572deffe9cb86786bcea262">thetaMin</a>, thetaMax;
<a name="l00446"></a><a class="code" href="classcv_1_1_patch_generator.html#a7d9f41b65e2b2e8f55297588361bc55b">00446</a>     <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_patch_generator.html#a7d9f41b65e2b2e8f55297588361bc55b">phiMin</a>, phiMax;
<a name="l00447"></a>00447 };
<a name="l00448"></a>00448 
<a name="l00449"></a>00449 
<a name="l00450"></a><a class="code" href="classcv_1_1_l_detector.html">00450</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_l_detector.html">LDetector</a>
<a name="l00451"></a>00451 {
<a name="l00452"></a>00452 <span class="keyword">public</span>:
<a name="l00453"></a>00453     <a class="code" href="classcv_1_1_l_detector.html">LDetector</a>();
<a name="l00454"></a>00454     <a class="code" href="classcv_1_1_l_detector.html">LDetector</a>(<span class="keywordtype">int</span> _radius, <span class="keywordtype">int</span> _threshold, <span class="keywordtype">int</span> _nOctaves,
<a name="l00455"></a>00455               <span class="keywordtype">int</span> _nViews, <span class="keywordtype">double</span> _baseFeatureSize, <span class="keywordtype">double</span> _clusteringDistance);
<a name="l00456"></a>00456     <span class="keywordtype">void</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image,
<a name="l00457"></a>00457                     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> vector&lt;KeyPoint&gt;&amp; keypoints,
<a name="l00458"></a>00458                     <span class="keywordtype">int</span> maxCount=0, <span class="keywordtype">bool</span> scaleCoords=<span class="keyword">true</span>) <span class="keyword">const</span>;
<a name="l00459"></a>00459     <span class="keywordtype">void</span> operator()(<span class="keyword">const</span> vector&lt;Mat&gt;&amp; pyr,
<a name="l00460"></a>00460                     <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> vector&lt;KeyPoint&gt;&amp; keypoints,
<a name="l00461"></a>00461                     <span class="keywordtype">int</span> maxCount=0, <span class="keywordtype">bool</span> scaleCoords=<span class="keyword">true</span>) <span class="keyword">const</span>;
<a name="l00462"></a>00462     <span class="keywordtype">void</span> getMostStable2D(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> vector&lt;KeyPoint&gt;&amp; keypoints,
<a name="l00463"></a>00463                          <span class="keywordtype">int</span> maxCount, <span class="keyword">const</span> <a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>&amp; patchGenerator) <span class="keyword">const</span>;
<a name="l00464"></a>00464     <span class="keywordtype">void</span> setVerbose(<span class="keywordtype">bool</span> verbose);
<a name="l00465"></a>00465     
<a name="l00466"></a>00466     <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; node);
<a name="l00467"></a>00467     <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(<a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; fs, <span class="keyword">const</span> <a class="code" href="namespacecv.html#a1f6634802eeadfd7245bc75cf3e216c2">String</a>&amp; name=<a class="code" href="namespacecv.html#a1f6634802eeadfd7245bc75cf3e216c2">String</a>()) <span class="keyword">const</span>;
<a name="l00468"></a>00468     
<a name="l00469"></a><a class="code" href="classcv_1_1_l_detector.html#aafdeb086edf9c1d3f03134d98facddf1">00469</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_l_detector.html#aafdeb086edf9c1d3f03134d98facddf1">radius</a>;
<a name="l00470"></a><a class="code" href="classcv_1_1_l_detector.html#a372dcd920ed343bb20a3b6f2799555f4">00470</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_l_detector.html#a372dcd920ed343bb20a3b6f2799555f4">threshold</a>;
<a name="l00471"></a><a class="code" href="classcv_1_1_l_detector.html#a13838093a3d39f8013f756c165f0d7ae">00471</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_l_detector.html#a13838093a3d39f8013f756c165f0d7ae">nOctaves</a>;
<a name="l00472"></a><a class="code" href="classcv_1_1_l_detector.html#adf2f18a509af4b7491fa84618d1c7a35">00472</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_l_detector.html#adf2f18a509af4b7491fa84618d1c7a35">nViews</a>;
<a name="l00473"></a><a class="code" href="classcv_1_1_l_detector.html#a42b927a3a8a1d463e4aff0cdfd87250d">00473</a>     <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_l_detector.html#a42b927a3a8a1d463e4aff0cdfd87250d">verbose</a>;
<a name="l00474"></a>00474     
<a name="l00475"></a><a class="code" href="classcv_1_1_l_detector.html#a4eca668768bb9da7a20ad1d8ceac2824">00475</a>     <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_l_detector.html#a4eca668768bb9da7a20ad1d8ceac2824">baseFeatureSize</a>;
<a name="l00476"></a><a class="code" href="classcv_1_1_l_detector.html#a897c277c3e229558a9b2e127ddab2884">00476</a>     <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_l_detector.html#a897c277c3e229558a9b2e127ddab2884">clusteringDistance</a>;
<a name="l00477"></a>00477 };
<a name="l00478"></a>00478 
<a name="l00479"></a><a class="code" href="namespacecv.html#ac1744a010c8adb6f5ce848b9b2f8b42b">00479</a> <span class="keyword">typedef</span> <a class="code" href="classcv_1_1_l_detector.html">LDetector</a> <a class="code" href="namespacecv.html#ac1744a010c8adb6f5ce848b9b2f8b42b">YAPE</a>;
<a name="l00480"></a>00480 
<a name="l00481"></a><a class="code" href="classcv_1_1_fern_classifier.html">00481</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_fern_classifier.html">FernClassifier</a>
<a name="l00482"></a>00482 {
<a name="l00483"></a>00483 <span class="keyword">public</span>:
<a name="l00484"></a>00484     <a class="code" href="classcv_1_1_fern_classifier.html">FernClassifier</a>();
<a name="l00485"></a>00485     <a class="code" href="classcv_1_1_fern_classifier.html">FernClassifier</a>(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; node);
<a name="l00486"></a>00486     <a class="code" href="classcv_1_1_fern_classifier.html">FernClassifier</a>(<span class="keyword">const</span> vector&lt;vector&lt;Point2f&gt; &gt;&amp; points,
<a name="l00487"></a>00487                    <span class="keyword">const</span> vector&lt;Mat&gt;&amp; refimgs,
<a name="l00488"></a>00488                    <span class="keyword">const</span> vector&lt;vector&lt;int&gt; &gt;&amp; labels=vector&lt;vector&lt;int&gt; &gt;(),
<a name="l00489"></a>00489                    <span class="keywordtype">int</span> _nclasses=0, <span class="keywordtype">int</span> _patchSize=PATCH_SIZE,
<a name="l00490"></a>00490                    <span class="keywordtype">int</span> _signatureSize=DEFAULT_SIGNATURE_SIZE,
<a name="l00491"></a>00491                    <span class="keywordtype">int</span> _nstructs=DEFAULT_STRUCTS,
<a name="l00492"></a>00492                    <span class="keywordtype">int</span> _structSize=DEFAULT_STRUCT_SIZE,
<a name="l00493"></a>00493                    <span class="keywordtype">int</span> _nviews=DEFAULT_VIEWS,
<a name="l00494"></a>00494                    <span class="keywordtype">int</span> _compressionMethod=COMPRESSION_NONE,
<a name="l00495"></a>00495                    <span class="keyword">const</span> <a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>&amp; patchGenerator=<a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>());
<a name="l00496"></a>00496     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_fern_classifier.html">FernClassifier</a>();
<a name="l00497"></a>00497     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; n);
<a name="l00498"></a>00498     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(<a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; fs, <span class="keyword">const</span> <a class="code" href="namespacecv.html#a1f6634802eeadfd7245bc75cf3e216c2">String</a>&amp; name=<a class="code" href="namespacecv.html#a1f6634802eeadfd7245bc75cf3e216c2">String</a>()) <span class="keyword">const</span>;
<a name="l00499"></a>00499     <span class="keyword">virtual</span> <span class="keywordtype">void</span> trainFromSingleView(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image,
<a name="l00500"></a>00500                                      <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints,
<a name="l00501"></a>00501                                      <span class="keywordtype">int</span> _patchSize=PATCH_SIZE,
<a name="l00502"></a>00502                                      <span class="keywordtype">int</span> _signatureSize=DEFAULT_SIGNATURE_SIZE,
<a name="l00503"></a>00503                                      <span class="keywordtype">int</span> _nstructs=DEFAULT_STRUCTS,
<a name="l00504"></a>00504                                      <span class="keywordtype">int</span> _structSize=DEFAULT_STRUCT_SIZE,
<a name="l00505"></a>00505                                      <span class="keywordtype">int</span> _nviews=DEFAULT_VIEWS,
<a name="l00506"></a>00506                                      <span class="keywordtype">int</span> _compressionMethod=COMPRESSION_NONE,
<a name="l00507"></a>00507                                      <span class="keyword">const</span> <a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>&amp; patchGenerator=<a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>());
<a name="l00508"></a>00508     <span class="keyword">virtual</span> <span class="keywordtype">void</span> train(<span class="keyword">const</span> vector&lt;vector&lt;Point2f&gt; &gt;&amp; points,
<a name="l00509"></a>00509                        <span class="keyword">const</span> vector&lt;Mat&gt;&amp; refimgs,
<a name="l00510"></a>00510                        <span class="keyword">const</span> vector&lt;vector&lt;int&gt; &gt;&amp; labels=vector&lt;vector&lt;int&gt; &gt;(),
<a name="l00511"></a>00511                        <span class="keywordtype">int</span> _nclasses=0, <span class="keywordtype">int</span> _patchSize=PATCH_SIZE,
<a name="l00512"></a>00512                        <span class="keywordtype">int</span> _signatureSize=DEFAULT_SIGNATURE_SIZE,
<a name="l00513"></a>00513                        <span class="keywordtype">int</span> _nstructs=DEFAULT_STRUCTS,
<a name="l00514"></a>00514                        <span class="keywordtype">int</span> _structSize=DEFAULT_STRUCT_SIZE,
<a name="l00515"></a>00515                        <span class="keywordtype">int</span> _nviews=DEFAULT_VIEWS,
<a name="l00516"></a>00516                        <span class="keywordtype">int</span> _compressionMethod=COMPRESSION_NONE,
<a name="l00517"></a>00517                        <span class="keyword">const</span> <a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>&amp; patchGenerator=<a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>());
<a name="l00518"></a>00518     <span class="keyword">virtual</span> <span class="keywordtype">int</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; img, <a class="code" href="classcv_1_1_point__.html">Point2f</a> kpt, vector&lt;float&gt;&amp; signature) <span class="keyword">const</span>;
<a name="l00519"></a>00519     <span class="keyword">virtual</span> <span class="keywordtype">int</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; patch, vector&lt;float&gt;&amp; signature) <span class="keyword">const</span>;
<a name="l00520"></a>00520     <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear();
<a name="l00521"></a>00521     <span class="keywordtype">void</span> setVerbose(<span class="keywordtype">bool</span> verbose);
<a name="l00522"></a>00522     
<a name="l00523"></a>00523     <span class="keywordtype">int</span> getClassCount() <span class="keyword">const</span>;
<a name="l00524"></a>00524     <span class="keywordtype">int</span> getStructCount() <span class="keyword">const</span>;
<a name="l00525"></a>00525     <span class="keywordtype">int</span> getStructSize() <span class="keyword">const</span>;
<a name="l00526"></a>00526     <span class="keywordtype">int</span> getSignatureSize() <span class="keyword">const</span>;
<a name="l00527"></a>00527     <span class="keywordtype">int</span> getCompressionMethod() <span class="keyword">const</span>;
<a name="l00528"></a>00528     <a class="code" href="classcv_1_1_size__.html">Size</a> getPatchSize() <span class="keyword">const</span>;
<a name="l00529"></a>00529     
<a name="l00530"></a><a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html">00530</a>     <span class="keyword">struct </span><a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html">Feature</a>
<a name="l00531"></a>00531     {
<a name="l00532"></a><a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html#ab6e52584abe52841dbe48135df7f25a5">00532</a>         <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> x1, y1, x2, <a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html#ab6e52584abe52841dbe48135df7f25a5">y2</a>;
<a name="l00533"></a><a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html#a10210adfba0d3f8e702755689c4be8c3">00533</a>         <a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html#a10210adfba0d3f8e702755689c4be8c3">Feature</a>() : x1(0), y1(0), x2(0), y2(0) {}
<a name="l00534"></a><a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html#aca2f2cbc953bb99e9fee4bb27ce8cdc9">00534</a>         <a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html">Feature</a>(<span class="keywordtype">int</span> _x1, <span class="keywordtype">int</span> _y1, <span class="keywordtype">int</span> _x2, <span class="keywordtype">int</span> _y2)
<a name="l00535"></a>00535         : x1((<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)_x1), y1((<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)_y1), x2((<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)_x2), y2((<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)_y2)
<a name="l00536"></a>00536         {}
<a name="l00537"></a><a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html#a124ca14176efcc5979f1313856a83a3d">00537</a>         <span class="keyword">template</span>&lt;<span class="keyword">typename</span> _Tp&gt; <span class="keywordtype">bool</span> operator ()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat__.html">Mat_&lt;_Tp&gt;</a>&amp; patch)<span class="keyword"> const</span>
<a name="l00538"></a>00538 <span class="keyword">        </span>{ <span class="keywordflow">return</span> patch(y1,x1) &gt; patch(y2, x2); }
<a name="l00539"></a>00539     };
<a name="l00540"></a>00540     
<a name="l00541"></a>00541     <span class="keyword">enum</span>
<a name="l00542"></a>00542     {
<a name="l00543"></a><a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002a24404de82f8919357a5f8e79ebbd9d1a">00543</a>         PATCH_SIZE = 31,
<a name="l00544"></a><a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002ab6933cb0baa7f1218196052c4dbfe66c">00544</a>         DEFAULT_STRUCTS = 50,
<a name="l00545"></a><a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002ae6b19b111a3c9a6fd339907e6118d707">00545</a>         DEFAULT_STRUCT_SIZE = 9,
<a name="l00546"></a><a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002a333a37941aa3a8a7039ad179cb124216">00546</a>         DEFAULT_VIEWS = 5000,
<a name="l00547"></a><a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002a4278805e49ddbabb97b52e29973b9d85">00547</a>         DEFAULT_SIGNATURE_SIZE = 176,
<a name="l00548"></a><a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002acc4c78b39eb783cc2b4fdd9fe1e87588">00548</a>         COMPRESSION_NONE = 0,
<a name="l00549"></a><a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002a07c39baad3b4a32a32ad9961113f6bb7">00549</a>         COMPRESSION_RANDOM_PROJ = 1,
<a name="l00550"></a><a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002a77a99c3ce4424b798cb14c330d02159c">00550</a>         COMPRESSION_PCA = 2,
<a name="l00551"></a><a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002ad64e17809b9e5ee5918a064499a792d1">00551</a>         DEFAULT_COMPRESSION_METHOD = COMPRESSION_NONE
<a name="l00552"></a>00552     };
<a name="l00553"></a>00553     
<a name="l00554"></a>00554 <span class="keyword">protected</span>:
<a name="l00555"></a>00555     <span class="keyword">virtual</span> <span class="keywordtype">void</span> prepare(<span class="keywordtype">int</span> _nclasses, <span class="keywordtype">int</span> _patchSize, <span class="keywordtype">int</span> _signatureSize,
<a name="l00556"></a>00556                          <span class="keywordtype">int</span> _nstructs, <span class="keywordtype">int</span> _structSize,
<a name="l00557"></a>00557                          <span class="keywordtype">int</span> _nviews, <span class="keywordtype">int</span> _compressionMethod);
<a name="l00558"></a>00558     <span class="keyword">virtual</span> <span class="keywordtype">void</span> finalize(<a class="code" href="classcv_1_1_r_n_g.html">RNG</a>&amp; rng);
<a name="l00559"></a>00559     <span class="keyword">virtual</span> <span class="keywordtype">int</span> getLeaf(<span class="keywordtype">int</span> fidx, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; patch) <span class="keyword">const</span>;
<a name="l00560"></a>00560     
<a name="l00561"></a><a class="code" href="classcv_1_1_fern_classifier.html#a6c07d0e7d6c0f4408da2262bd45ad74b">00561</a>     <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_fern_classifier.html#a6c07d0e7d6c0f4408da2262bd45ad74b">verbose</a>;
<a name="l00562"></a><a class="code" href="classcv_1_1_fern_classifier.html#a3f703df096262e6af708e96cf234f0dc">00562</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_classifier.html#a3f703df096262e6af708e96cf234f0dc">nstructs</a>;
<a name="l00563"></a><a class="code" href="classcv_1_1_fern_classifier.html#ab4c1c62685a2876bc06c689cd2822d03">00563</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_classifier.html#ab4c1c62685a2876bc06c689cd2822d03">structSize</a>;
<a name="l00564"></a><a class="code" href="classcv_1_1_fern_classifier.html#a606e0788c21e756270064eb80b8bd571">00564</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_classifier.html#a606e0788c21e756270064eb80b8bd571">nclasses</a>;
<a name="l00565"></a><a class="code" href="classcv_1_1_fern_classifier.html#ab75e2d78282d0091c8f0b594e8e4a7e3">00565</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_classifier.html#ab75e2d78282d0091c8f0b594e8e4a7e3">signatureSize</a>;
<a name="l00566"></a><a class="code" href="classcv_1_1_fern_classifier.html#af2ddf7ec72fba5326368f21124e571a7">00566</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_classifier.html#af2ddf7ec72fba5326368f21124e571a7">compressionMethod</a>;
<a name="l00567"></a><a class="code" href="classcv_1_1_fern_classifier.html#a877995a528d36b6c5635a45fa76ca959">00567</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_classifier.html#a877995a528d36b6c5635a45fa76ca959">leavesPerStruct</a>;
<a name="l00568"></a><a class="code" href="classcv_1_1_fern_classifier.html#a9448ad453cb1577457630f2f7dd4a8cf">00568</a>     <a class="code" href="classcv_1_1_size__.html">Size</a> <a class="code" href="classcv_1_1_fern_classifier.html#a9448ad453cb1577457630f2f7dd4a8cf">patchSize</a>;
<a name="l00569"></a><a class="code" href="classcv_1_1_fern_classifier.html#ae9268efb7ccb5c8965f56937a7e7736e">00569</a>     vector&lt;Feature&gt; <a class="code" href="classcv_1_1_fern_classifier.html#ae9268efb7ccb5c8965f56937a7e7736e">features</a>;
<a name="l00570"></a><a class="code" href="classcv_1_1_fern_classifier.html#a0e10ac13813115fa193c55805f73617a">00570</a>     vector&lt;int&gt; <a class="code" href="classcv_1_1_fern_classifier.html#a0e10ac13813115fa193c55805f73617a">classCounters</a>;
<a name="l00571"></a><a class="code" href="classcv_1_1_fern_classifier.html#a334a16efca9071fe403437829857ebbb">00571</a>     vector&lt;float&gt; <a class="code" href="classcv_1_1_fern_classifier.html#a334a16efca9071fe403437829857ebbb">posteriors</a>;
<a name="l00572"></a>00572 };
<a name="l00573"></a>00573 
<a name="l00574"></a>00574 
<a name="l00575"></a><a class="code" href="classcv_1_1_planar_object_detector.html">00575</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_planar_object_detector.html">PlanarObjectDetector</a>
<a name="l00576"></a>00576 {
<a name="l00577"></a>00577 <span class="keyword">public</span>:
<a name="l00578"></a>00578     <a class="code" href="classcv_1_1_planar_object_detector.html">PlanarObjectDetector</a>();
<a name="l00579"></a>00579     <a class="code" href="classcv_1_1_planar_object_detector.html">PlanarObjectDetector</a>(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; node);
<a name="l00580"></a>00580     <a class="code" href="classcv_1_1_planar_object_detector.html">PlanarObjectDetector</a>(<span class="keyword">const</span> vector&lt;Mat&gt;&amp; pyr, <span class="keywordtype">int</span> _npoints=300,
<a name="l00581"></a>00581                          <span class="keywordtype">int</span> _patchSize=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002a24404de82f8919357a5f8e79ebbd9d1a">FernClassifier::PATCH_SIZE</a>,
<a name="l00582"></a>00582                          <span class="keywordtype">int</span> _nstructs=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002ab6933cb0baa7f1218196052c4dbfe66c">FernClassifier::DEFAULT_STRUCTS</a>,
<a name="l00583"></a>00583                          <span class="keywordtype">int</span> _structSize=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002ae6b19b111a3c9a6fd339907e6118d707">FernClassifier::DEFAULT_STRUCT_SIZE</a>,
<a name="l00584"></a>00584                          <span class="keywordtype">int</span> _nviews=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002a333a37941aa3a8a7039ad179cb124216">FernClassifier::DEFAULT_VIEWS</a>,
<a name="l00585"></a>00585                          <span class="keyword">const</span> <a class="code" href="classcv_1_1_l_detector.html">LDetector</a>&amp; detector=<a class="code" href="classcv_1_1_l_detector.html">LDetector</a>(),
<a name="l00586"></a>00586                          <span class="keyword">const</span> <a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>&amp; patchGenerator=<a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>());
<a name="l00587"></a>00587     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_planar_object_detector.html">PlanarObjectDetector</a>();
<a name="l00588"></a>00588     <span class="keyword">virtual</span> <span class="keywordtype">void</span> train(<span class="keyword">const</span> vector&lt;Mat&gt;&amp; pyr, <span class="keywordtype">int</span> _npoints=300,
<a name="l00589"></a>00589                        <span class="keywordtype">int</span> _patchSize=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002a24404de82f8919357a5f8e79ebbd9d1a">FernClassifier::PATCH_SIZE</a>,
<a name="l00590"></a>00590                        <span class="keywordtype">int</span> _nstructs=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002ab6933cb0baa7f1218196052c4dbfe66c">FernClassifier::DEFAULT_STRUCTS</a>,
<a name="l00591"></a>00591                        <span class="keywordtype">int</span> _structSize=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002ae6b19b111a3c9a6fd339907e6118d707">FernClassifier::DEFAULT_STRUCT_SIZE</a>,
<a name="l00592"></a>00592                        <span class="keywordtype">int</span> _nviews=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002a333a37941aa3a8a7039ad179cb124216">FernClassifier::DEFAULT_VIEWS</a>,
<a name="l00593"></a>00593                        <span class="keyword">const</span> <a class="code" href="classcv_1_1_l_detector.html">LDetector</a>&amp; detector=<a class="code" href="classcv_1_1_l_detector.html">LDetector</a>(),
<a name="l00594"></a>00594                        <span class="keyword">const</span> <a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>&amp; patchGenerator=<a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>());
<a name="l00595"></a>00595     <span class="keyword">virtual</span> <span class="keywordtype">void</span> train(<span class="keyword">const</span> vector&lt;Mat&gt;&amp; pyr, <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints,
<a name="l00596"></a>00596                        <span class="keywordtype">int</span> _patchSize=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002a24404de82f8919357a5f8e79ebbd9d1a">FernClassifier::PATCH_SIZE</a>,
<a name="l00597"></a>00597                        <span class="keywordtype">int</span> _nstructs=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002ab6933cb0baa7f1218196052c4dbfe66c">FernClassifier::DEFAULT_STRUCTS</a>,
<a name="l00598"></a>00598                        <span class="keywordtype">int</span> _structSize=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002ae6b19b111a3c9a6fd339907e6118d707">FernClassifier::DEFAULT_STRUCT_SIZE</a>,
<a name="l00599"></a>00599                        <span class="keywordtype">int</span> _nviews=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002a333a37941aa3a8a7039ad179cb124216">FernClassifier::DEFAULT_VIEWS</a>,
<a name="l00600"></a>00600                        <span class="keyword">const</span> <a class="code" href="classcv_1_1_l_detector.html">LDetector</a>&amp; detector=<a class="code" href="classcv_1_1_l_detector.html">LDetector</a>(),
<a name="l00601"></a>00601                        <span class="keyword">const</span> <a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>&amp; patchGenerator=<a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>());
<a name="l00602"></a>00602     <a class="code" href="classcv_1_1_rect__.html">Rect</a> getModelROI() <span class="keyword">const</span>;
<a name="l00603"></a>00603     vector&lt;KeyPoint&gt; getModelPoints() <span class="keyword">const</span>;
<a name="l00604"></a>00604     <span class="keyword">const</span> <a class="code" href="classcv_1_1_l_detector.html">LDetector</a>&amp; getDetector() <span class="keyword">const</span>;
<a name="l00605"></a>00605     <span class="keyword">const</span> <a class="code" href="classcv_1_1_fern_classifier.html">FernClassifier</a>&amp; getClassifier() <span class="keyword">const</span>;
<a name="l00606"></a>00606     <span class="keywordtype">void</span> setVerbose(<span class="keywordtype">bool</span> verbose);
<a name="l00607"></a>00607     
<a name="l00608"></a>00608     <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; node);
<a name="l00609"></a>00609     <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(<a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; fs, <span class="keyword">const</span> <a class="code" href="namespacecv.html#a1f6634802eeadfd7245bc75cf3e216c2">String</a>&amp; name=<a class="code" href="namespacecv.html#a1f6634802eeadfd7245bc75cf3e216c2">String</a>()) <span class="keyword">const</span>;
<a name="l00610"></a>00610     <span class="keywordtype">bool</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; H, <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> vector&lt;Point2f&gt;&amp; corners) <span class="keyword">const</span>;
<a name="l00611"></a>00611     <span class="keywordtype">bool</span> operator()(<span class="keyword">const</span> vector&lt;Mat&gt;&amp; pyr, <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints,
<a name="l00612"></a>00612                                        <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; H, <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> vector&lt;Point2f&gt;&amp; corners,
<a name="l00613"></a>00613                                        <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a4e999bc21cb894d3ed789f3f0bc26778">CV_OUT</a> vector&lt;int&gt;* pairs=0) <span class="keyword">const</span>;
<a name="l00614"></a>00614     
<a name="l00615"></a>00615 <span class="keyword">protected</span>:
<a name="l00616"></a><a class="code" href="classcv_1_1_planar_object_detector.html#a9cfcd7164ce8d00f1277f95594b0925d">00616</a>     <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_planar_object_detector.html#a9cfcd7164ce8d00f1277f95594b0925d">verbose</a>;
<a name="l00617"></a><a class="code" href="classcv_1_1_planar_object_detector.html#a2c43c7a0f92d0fc60f4c0b4bb449a828">00617</a>     <a class="code" href="classcv_1_1_rect__.html">Rect</a> <a class="code" href="classcv_1_1_planar_object_detector.html#a2c43c7a0f92d0fc60f4c0b4bb449a828">modelROI</a>;
<a name="l00618"></a><a class="code" href="classcv_1_1_planar_object_detector.html#a919b56560e9a2b079ef3e18f00a8f945">00618</a>     vector&lt;KeyPoint&gt; <a class="code" href="classcv_1_1_planar_object_detector.html#a919b56560e9a2b079ef3e18f00a8f945">modelPoints</a>;
<a name="l00619"></a><a class="code" href="classcv_1_1_planar_object_detector.html#ad6a9dd94e790211f2dacf028cbd46fa4">00619</a>     <a class="code" href="classcv_1_1_l_detector.html">LDetector</a> <a class="code" href="classcv_1_1_planar_object_detector.html#ad6a9dd94e790211f2dacf028cbd46fa4">ldetector</a>;
<a name="l00620"></a><a class="code" href="classcv_1_1_planar_object_detector.html#acfa0c07d02b291ab7de47e59453bc06a">00620</a>     <a class="code" href="classcv_1_1_fern_classifier.html">FernClassifier</a> <a class="code" href="classcv_1_1_planar_object_detector.html#acfa0c07d02b291ab7de47e59453bc06a">fernClassifier</a>;
<a name="l00621"></a>00621 };
<a name="l00622"></a>00622 
<a name="l00623"></a>00623 <span class="comment">/****************************************************************************************\</span>
<a name="l00624"></a>00624 <span class="comment">*                                 Calonder Classifier                                    *</span>
<a name="l00625"></a>00625 <span class="comment">\****************************************************************************************/</span>
<a name="l00626"></a>00626 
<a name="l00627"></a>00627 <span class="keyword">struct </span><a class="code" href="structcv_1_1_r_tree_node.html">RTreeNode</a>;
<a name="l00628"></a>00628 
<a name="l00629"></a><a class="code" href="structcv_1_1_base_keypoint.html">00629</a> <span class="keyword">struct </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="structcv_1_1_base_keypoint.html">BaseKeypoint</a>
<a name="l00630"></a>00630 {
<a name="l00631"></a><a class="code" href="structcv_1_1_base_keypoint.html#a1adf9982422ff76aa637cb3e6d069885">00631</a>   <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_base_keypoint.html#a1adf9982422ff76aa637cb3e6d069885">x</a>;
<a name="l00632"></a><a class="code" href="structcv_1_1_base_keypoint.html#ad05c29448786838668d343ef79d0550a">00632</a>   <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_base_keypoint.html#ad05c29448786838668d343ef79d0550a">y</a>;
<a name="l00633"></a><a class="code" href="structcv_1_1_base_keypoint.html#af88fb5bce071314497d2cf7d5e62cd53">00633</a>   <a class="code" href="struct___ipl_image.html">IplImage</a>* <a class="code" href="structcv_1_1_base_keypoint.html#af88fb5bce071314497d2cf7d5e62cd53">image</a>;
<a name="l00634"></a>00634 
<a name="l00635"></a><a class="code" href="structcv_1_1_base_keypoint.html#a0cdda18f300e1eab00a5b0ffca60e097">00635</a>   <a class="code" href="structcv_1_1_base_keypoint.html">BaseKeypoint</a>()
<a name="l00636"></a>00636     : <a class="code" href="highgui__c_8h.html#ad77deca22f617d3f0e0eb786445689fc">x</a>(0), <a class="code" href="highgui__c_8h.html#a9298c7ad619074f5285b32c6b72bfdea">y</a>(0), image(NULL)
<a name="l00637"></a>00637   {}
<a name="l00638"></a>00638 
<a name="l00639"></a><a class="code" href="structcv_1_1_base_keypoint.html#a9e6e3072dbd59cd5cf8b8fa5781c8f03">00639</a>   <a class="code" href="structcv_1_1_base_keypoint.html">BaseKeypoint</a>(<span class="keywordtype">int</span> <a class="code" href="highgui__c_8h.html#ad77deca22f617d3f0e0eb786445689fc">x</a>, <span class="keywordtype">int</span> <a class="code" href="highgui__c_8h.html#a9298c7ad619074f5285b32c6b72bfdea">y</a>, <a class="code" href="struct___ipl_image.html">IplImage</a>* image)
<a name="l00640"></a>00640     : x(x), y(y), image(image)
<a name="l00641"></a>00641   {}
<a name="l00642"></a>00642 };
<a name="l00643"></a>00643 
<a name="l00644"></a><a class="code" href="classcv_1_1_randomized_tree.html">00644</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_randomized_tree.html">RandomizedTree</a>
<a name="l00645"></a>00645 {
<a name="l00646"></a>00646 <span class="keyword">public</span>:
<a name="l00647"></a><a class="code" href="classcv_1_1_randomized_tree.html#aeb98f95be17120e69be499c069f656d3">00647</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classcv_1_1_r_tree_classifier.html">RTreeClassifier</a>;
<a name="l00648"></a>00648 
<a name="l00649"></a><a class="code" href="classcv_1_1_randomized_tree.html#ad3a9c3171db3e1e0c95bdcce58335825">00649</a>   <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> PATCH_SIZE = 32;
<a name="l00650"></a><a class="code" href="classcv_1_1_randomized_tree.html#ad33ce7fc2686881b40229005833fca65">00650</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DEFAULT_DEPTH = 9;
<a name="l00651"></a><a class="code" href="classcv_1_1_randomized_tree.html#a5f814be6f4a671b547f954b3f503002b">00651</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DEFAULT_VIEWS = 5000;
<a name="l00652"></a><a class="code" href="classcv_1_1_randomized_tree.html#af0c6755cb63bfb25f0cf8b0d8381df4f">00652</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> DEFAULT_REDUCED_NUM_DIM = 176;
<a name="l00653"></a><a class="code" href="classcv_1_1_randomized_tree.html#aad675bf2b9214bb4e15f31f782340276">00653</a>   <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_randomized_tree.html#aad675bf2b9214bb4e15f31f782340276">GET_LOWER_QUANT_PERC</a>() { <span class="keywordflow">return</span> .03f; }
<a name="l00654"></a><a class="code" href="classcv_1_1_randomized_tree.html#ad1bc14577b2373ec5984dc32f2c7d58e">00654</a>   <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_randomized_tree.html#ad1bc14577b2373ec5984dc32f2c7d58e">GET_UPPER_QUANT_PERC</a>() { <span class="keywordflow">return</span> .92f; }
<a name="l00655"></a>00655 
<a name="l00656"></a>00656   <a class="code" href="classcv_1_1_randomized_tree.html">RandomizedTree</a>();
<a name="l00657"></a>00657   ~<a class="code" href="classcv_1_1_randomized_tree.html">RandomizedTree</a>();
<a name="l00658"></a>00658 
<a name="l00659"></a>00659   <span class="keywordtype">void</span> train(std::vector&lt;BaseKeypoint&gt; <span class="keyword">const</span>&amp; base_set, <a class="code" href="classcv_1_1_r_n_g.html">RNG</a> &amp;rng,
<a name="l00660"></a>00660              <span class="keywordtype">int</span> depth, <span class="keywordtype">int</span> views, <span class="keywordtype">size_t</span> reduced_num_dim, <span class="keywordtype">int</span> num_quant_bits);
<a name="l00661"></a>00661   <span class="keywordtype">void</span> train(std::vector&lt;BaseKeypoint&gt; <span class="keyword">const</span>&amp; base_set, <a class="code" href="classcv_1_1_r_n_g.html">RNG</a> &amp;rng,
<a name="l00662"></a>00662              <a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a> &amp;make_patch, <span class="keywordtype">int</span> depth, <span class="keywordtype">int</span> views, <span class="keywordtype">size_t</span> reduced_num_dim,
<a name="l00663"></a>00663              <span class="keywordtype">int</span> num_quant_bits);
<a name="l00664"></a>00664 
<a name="l00665"></a>00665   <span class="comment">// following two funcs are EXPERIMENTAL (do not use unless you know exactly what you do)</span>
<a name="l00666"></a>00666   <span class="keyword">static</span> <span class="keywordtype">void</span> quantizeVector(<span class="keywordtype">float</span> *vec, <span class="keywordtype">int</span> dim, <span class="keywordtype">int</span> N, <span class="keywordtype">float</span> bnds[2], <span class="keywordtype">int</span> clamp_mode=0);
<a name="l00667"></a>00667   <span class="keyword">static</span> <span class="keywordtype">void</span> quantizeVector(<span class="keywordtype">float</span> *src, <span class="keywordtype">int</span> dim, <span class="keywordtype">int</span> N, <span class="keywordtype">float</span> bnds[2], <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *<a class="code" href="namespacecv.html#a59214726abd6b631224a69d3e82d6999">dst</a>);
<a name="l00668"></a>00668 
<a name="l00669"></a>00669   <span class="comment">// patch_data must be a 32x32 array (no row padding)</span>
<a name="l00670"></a>00670   <span class="keywordtype">float</span>* getPosterior(<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* patch_data);
<a name="l00671"></a>00671   <span class="keyword">const</span> <span class="keywordtype">float</span>* getPosterior(<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* patch_data) <span class="keyword">const</span>;
<a name="l00672"></a>00672   <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* getPosterior2(<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* patch_data);
<a name="l00673"></a>00673   <span class="keyword">const</span> <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* getPosterior2(<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* patch_data) <span class="keyword">const</span>;
<a name="l00674"></a>00674 
<a name="l00675"></a>00675   <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* file_name, <span class="keywordtype">int</span> num_quant_bits);
<a name="l00676"></a>00676   <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(std::istream &amp;is, <span class="keywordtype">int</span> num_quant_bits);
<a name="l00677"></a>00677   <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* file_name) <span class="keyword">const</span>;
<a name="l00678"></a>00678   <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(std::ostream &amp;os) <span class="keyword">const</span>;
<a name="l00679"></a>00679 
<a name="l00680"></a><a class="code" href="classcv_1_1_randomized_tree.html#ace332f8d2d288c7268069a4f6653c27d">00680</a>   <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_randomized_tree.html#ace332f8d2d288c7268069a4f6653c27d">classes</a>() { <span class="keywordflow">return</span> classes_; }
<a name="l00681"></a><a class="code" href="classcv_1_1_randomized_tree.html#a79be804b3938a574143e1e0f840964d2">00681</a>   <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_randomized_tree.html#a79be804b3938a574143e1e0f840964d2">depth</a>() { <span class="keywordflow">return</span> depth_; }
<a name="l00682"></a>00682 
<a name="l00683"></a>00683   <span class="comment">//void setKeepFloatPosteriors(bool b) { keep_float_posteriors_ = b; }</span>
<a name="l00684"></a><a class="code" href="classcv_1_1_randomized_tree.html#a496f3b2b27c53a8bcf74a0b9148d719c">00684</a>   <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_randomized_tree.html#a496f3b2b27c53a8bcf74a0b9148d719c">discardFloatPosteriors</a>() { freePosteriors(1); }
<a name="l00685"></a>00685 
<a name="l00686"></a><a class="code" href="classcv_1_1_randomized_tree.html#a89f2b604f8148347037d70055f96f1b7">00686</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_randomized_tree.html#a89f2b604f8148347037d70055f96f1b7">applyQuantization</a>(<span class="keywordtype">int</span> num_quant_bits) { makePosteriors2(num_quant_bits); }
<a name="l00687"></a>00687 
<a name="l00688"></a>00688   <span class="comment">// debug</span>
<a name="l00689"></a>00689   <span class="keywordtype">void</span> savePosteriors(std::string url, <span class="keywordtype">bool</span> append=<span class="keyword">false</span>);
<a name="l00690"></a>00690   <span class="keywordtype">void</span> savePosteriors2(std::string url, <span class="keywordtype">bool</span> append=<span class="keyword">false</span>);
<a name="l00691"></a>00691 
<a name="l00692"></a>00692 <span class="keyword">private</span>:
<a name="l00693"></a>00693   <span class="keywordtype">int</span> classes_;
<a name="l00694"></a>00694   <span class="keywordtype">int</span> depth_;
<a name="l00695"></a>00695   <span class="keywordtype">int</span> num_leaves_;
<a name="l00696"></a>00696   std::vector&lt;RTreeNode&gt; nodes_;
<a name="l00697"></a>00697   <span class="keywordtype">float</span> **posteriors_;        <span class="comment">// 16-bytes aligned posteriors</span>
<a name="l00698"></a>00698   <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> **posteriors2_;     <span class="comment">// 16-bytes aligned posteriors</span>
<a name="l00699"></a>00699   std::vector&lt;int&gt; leaf_counts_;
<a name="l00700"></a>00700 
<a name="l00701"></a>00701   <span class="keywordtype">void</span> createNodes(<span class="keywordtype">int</span> num_nodes, <a class="code" href="classcv_1_1_r_n_g.html">RNG</a> &amp;rng);
<a name="l00702"></a>00702   <span class="keywordtype">void</span> allocPosteriorsAligned(<span class="keywordtype">int</span> num_leaves, <span class="keywordtype">int</span> num_classes);
<a name="l00703"></a>00703   <span class="keywordtype">void</span> freePosteriors(<span class="keywordtype">int</span> which);    <span class="comment">// which: 1=posteriors_, 2=posteriors2_, 3=both</span>
<a name="l00704"></a>00704   <span class="keywordtype">void</span> init(<span class="keywordtype">int</span> classes, <span class="keywordtype">int</span> depth, <a class="code" href="classcv_1_1_r_n_g.html">RNG</a> &amp;rng);
<a name="l00705"></a>00705   <span class="keywordtype">void</span> addExample(<span class="keywordtype">int</span> class_id, <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* patch_data);
<a name="l00706"></a>00706   <span class="keywordtype">void</span> finalize(<span class="keywordtype">size_t</span> reduced_num_dim, <span class="keywordtype">int</span> num_quant_bits);
<a name="l00707"></a>00707   <span class="keywordtype">int</span> getIndex(<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* patch_data) <span class="keyword">const</span>;
<a name="l00708"></a>00708   <span class="keyword">inline</span> <span class="keywordtype">float</span>* getPosteriorByIndex(<span class="keywordtype">int</span> index);
<a name="l00709"></a>00709   <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">float</span>* getPosteriorByIndex(<span class="keywordtype">int</span> index) <span class="keyword">const</span>;
<a name="l00710"></a>00710   <span class="keyword">inline</span> <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* getPosteriorByIndex2(<span class="keywordtype">int</span> index);
<a name="l00711"></a>00711   <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* getPosteriorByIndex2(<span class="keywordtype">int</span> index) <span class="keyword">const</span>;
<a name="l00712"></a>00712   <span class="comment">//void makeRandomMeasMatrix(float *cs_phi, PHI_DISTR_TYPE dt, size_t reduced_num_dim);</span>
<a name="l00713"></a>00713   <span class="keywordtype">void</span> convertPosteriorsToChar();
<a name="l00714"></a>00714   <span class="keywordtype">void</span> makePosteriors2(<span class="keywordtype">int</span> num_quant_bits);
<a name="l00715"></a>00715   <span class="keywordtype">void</span> compressLeaves(<span class="keywordtype">size_t</span> reduced_num_dim);
<a name="l00716"></a>00716   <span class="keywordtype">void</span> estimateQuantPercForPosteriors(<span class="keywordtype">float</span> perc[2]);
<a name="l00717"></a>00717 };
<a name="l00718"></a>00718 
<a name="l00719"></a>00719 
<a name="l00720"></a><a class="code" href="namespacecv.html#aa8989c4a6a02595c782b6ce756543f56">00720</a> <span class="keyword">inline</span> <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* <a class="code" href="namespacecv.html#aa8989c4a6a02595c782b6ce756543f56">getData</a>(<a class="code" href="struct___ipl_image.html">IplImage</a>* image)
<a name="l00721"></a>00721 {
<a name="l00722"></a>00722   <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>*<span class="keyword">&gt;</span>(image-&gt;<a class="code" href="struct___ipl_image.html#a8f494e96def4231c3623eead920b3358">imageData</a>);
<a name="l00723"></a>00723 }
<a name="l00724"></a>00724 
<a name="l00725"></a>00725 <span class="keyword">inline</span> <span class="keywordtype">float</span>* RandomizedTree::getPosteriorByIndex(<span class="keywordtype">int</span> index)
<a name="l00726"></a>00726 {
<a name="l00727"></a>00727   <span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span><span class="keywordtype">float</span>*<span class="keyword">&gt;</span>(<span class="keyword">const_cast&lt;</span><span class="keyword">const </span>RandomizedTree*<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;getPosteriorByIndex(index));
<a name="l00728"></a>00728 }
<a name="l00729"></a>00729 
<a name="l00730"></a>00730 <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">float</span>* RandomizedTree::getPosteriorByIndex(<span class="keywordtype">int</span> index)<span class="keyword"> const</span>
<a name="l00731"></a>00731 <span class="keyword"></span>{
<a name="l00732"></a>00732   <span class="keywordflow">return</span> posteriors_[index];
<a name="l00733"></a>00733 }
<a name="l00734"></a>00734 
<a name="l00735"></a>00735 <span class="keyword">inline</span> <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* RandomizedTree::getPosteriorByIndex2(<span class="keywordtype">int</span> index)
<a name="l00736"></a>00736 {
<a name="l00737"></a>00737   <span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>*<span class="keyword">&gt;</span>(<span class="keyword">const_cast&lt;</span><span class="keyword">const </span>RandomizedTree*<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;getPosteriorByIndex2(index));
<a name="l00738"></a>00738 }
<a name="l00739"></a>00739 
<a name="l00740"></a>00740 <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* RandomizedTree::getPosteriorByIndex2(<span class="keywordtype">int</span> index)<span class="keyword"> const</span>
<a name="l00741"></a>00741 <span class="keyword"></span>{
<a name="l00742"></a>00742   <span class="keywordflow">return</span> posteriors2_[index];
<a name="l00743"></a>00743 }
<a name="l00744"></a>00744 
<a name="l00745"></a><a class="code" href="structcv_1_1_r_tree_node.html">00745</a> <span class="keyword">struct </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="structcv_1_1_r_tree_node.html">RTreeNode</a>
<a name="l00746"></a>00746 {
<a name="l00747"></a><a class="code" href="structcv_1_1_r_tree_node.html#aa0302eab27fc2d4998eb150f2aa38a63">00747</a>   <span class="keywordtype">short</span> offset1, <a class="code" href="structcv_1_1_r_tree_node.html#aa0302eab27fc2d4998eb150f2aa38a63">offset2</a>;
<a name="l00748"></a>00748 
<a name="l00749"></a><a class="code" href="structcv_1_1_r_tree_node.html#a28587e537b924b2ce4ef1c4a56821a59">00749</a>   <a class="code" href="structcv_1_1_r_tree_node.html#a28587e537b924b2ce4ef1c4a56821a59">RTreeNode</a>() {}
<a name="l00750"></a><a class="code" href="structcv_1_1_r_tree_node.html#a5858e9b9e8989f2a01c734fa482a5456">00750</a>   <a class="code" href="structcv_1_1_r_tree_node.html">RTreeNode</a>(<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> x1, <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> y1, <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> x2, <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> y2)
<a name="l00751"></a>00751     : offset1(y1*<a class="code" href="classcv_1_1_randomized_tree.html">RandomizedTree</a>::PATCH_SIZE + x1),
<a name="l00752"></a>00752       offset2(y2*<a class="code" href="classcv_1_1_randomized_tree.html">RandomizedTree</a>::PATCH_SIZE + x2)
<a name="l00753"></a>00753   {}
<a name="l00754"></a>00754 
<a name="l00756"></a><a class="code" href="structcv_1_1_r_tree_node.html#ad193beb5a63cb98652fc1413da5dd851">00756</a>   <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator() (<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* patch_data)<span class="keyword"> const</span>
<a name="l00757"></a>00757 <span class="keyword">  </span>{
<a name="l00758"></a>00758     <span class="keywordflow">return</span> patch_data[offset1] &gt; patch_data[offset2];
<a name="l00759"></a>00759   }
<a name="l00760"></a>00760 };
<a name="l00761"></a>00761 
<a name="l00762"></a><a class="code" href="classcv_1_1_r_tree_classifier.html">00762</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_r_tree_classifier.html">RTreeClassifier</a>
<a name="l00763"></a>00763 {
<a name="l00764"></a>00764 <span class="keyword">public</span>:
<a name="l00765"></a><a class="code" href="classcv_1_1_r_tree_classifier.html#aeb7f243009ac21c70c4a7bb3b130d632">00765</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DEFAULT_TREES = 48;
<a name="l00766"></a><a class="code" href="classcv_1_1_r_tree_classifier.html#a122e901d6fa5e80235e21c430e3ffbfa">00766</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> DEFAULT_NUM_QUANT_BITS = 4;
<a name="l00767"></a>00767 
<a name="l00768"></a>00768   <a class="code" href="classcv_1_1_r_tree_classifier.html">RTreeClassifier</a>();
<a name="l00769"></a>00769   <span class="keywordtype">void</span> train(std::vector&lt;BaseKeypoint&gt; <span class="keyword">const</span>&amp; base_set,
<a name="l00770"></a>00770              <a class="code" href="classcv_1_1_r_n_g.html">RNG</a> &amp;rng,
<a name="l00771"></a>00771              <span class="keywordtype">int</span> num_trees = <a class="code" href="classcv_1_1_r_tree_classifier.html#aeb7f243009ac21c70c4a7bb3b130d632">RTreeClassifier::DEFAULT_TREES</a>,
<a name="l00772"></a>00772              <span class="keywordtype">int</span> depth = <a class="code" href="classcv_1_1_randomized_tree.html#ad33ce7fc2686881b40229005833fca65">RandomizedTree::DEFAULT_DEPTH</a>,
<a name="l00773"></a>00773              <span class="keywordtype">int</span> views = <a class="code" href="classcv_1_1_randomized_tree.html#a5f814be6f4a671b547f954b3f503002b">RandomizedTree::DEFAULT_VIEWS</a>,
<a name="l00774"></a>00774              <span class="keywordtype">size_t</span> reduced_num_dim = <a class="code" href="classcv_1_1_randomized_tree.html#af0c6755cb63bfb25f0cf8b0d8381df4f">RandomizedTree::DEFAULT_REDUCED_NUM_DIM</a>,
<a name="l00775"></a>00775              <span class="keywordtype">int</span> num_quant_bits = DEFAULT_NUM_QUANT_BITS);
<a name="l00776"></a>00776   <span class="keywordtype">void</span> train(std::vector&lt;BaseKeypoint&gt; <span class="keyword">const</span>&amp; base_set,
<a name="l00777"></a>00777              <a class="code" href="classcv_1_1_r_n_g.html">RNG</a> &amp;rng,
<a name="l00778"></a>00778              <a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a> &amp;make_patch,
<a name="l00779"></a>00779              <span class="keywordtype">int</span> num_trees = <a class="code" href="classcv_1_1_r_tree_classifier.html#aeb7f243009ac21c70c4a7bb3b130d632">RTreeClassifier::DEFAULT_TREES</a>,
<a name="l00780"></a>00780              <span class="keywordtype">int</span> depth = <a class="code" href="classcv_1_1_randomized_tree.html#ad33ce7fc2686881b40229005833fca65">RandomizedTree::DEFAULT_DEPTH</a>,
<a name="l00781"></a>00781              <span class="keywordtype">int</span> views = <a class="code" href="classcv_1_1_randomized_tree.html#a5f814be6f4a671b547f954b3f503002b">RandomizedTree::DEFAULT_VIEWS</a>,
<a name="l00782"></a>00782              <span class="keywordtype">size_t</span> reduced_num_dim = <a class="code" href="classcv_1_1_randomized_tree.html#af0c6755cb63bfb25f0cf8b0d8381df4f">RandomizedTree::DEFAULT_REDUCED_NUM_DIM</a>,
<a name="l00783"></a>00783              <span class="keywordtype">int</span> num_quant_bits = DEFAULT_NUM_QUANT_BITS);
<a name="l00784"></a>00784 
<a name="l00785"></a>00785   <span class="comment">// sig must point to a memory block of at least classes()*sizeof(float|uchar) bytes</span>
<a name="l00786"></a>00786   <span class="keywordtype">void</span> getSignature(<a class="code" href="struct___ipl_image.html">IplImage</a> *patch, <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *sig) <span class="keyword">const</span>;
<a name="l00787"></a>00787   <span class="keywordtype">void</span> getSignature(<a class="code" href="struct___ipl_image.html">IplImage</a> *patch, <span class="keywordtype">float</span> *sig) <span class="keyword">const</span>;
<a name="l00788"></a>00788   <span class="keywordtype">void</span> getSparseSignature(<a class="code" href="struct___ipl_image.html">IplImage</a> *patch, <span class="keywordtype">float</span> *sig, <span class="keywordtype">float</span> thresh) <span class="keyword">const</span>;
<a name="l00789"></a>00789   <span class="comment">// TODO: deprecated in favor of getSignature overload, remove</span>
<a name="l00790"></a><a class="code" href="classcv_1_1_r_tree_classifier.html#a4616774caa285fd55c482f4732659194">00790</a>   <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_r_tree_classifier.html#a4616774caa285fd55c482f4732659194">getFloatSignature</a>(<a class="code" href="struct___ipl_image.html">IplImage</a> *patch, <span class="keywordtype">float</span> *sig)<span class="keyword"> const </span>{ getSignature(patch, sig); }
<a name="l00791"></a>00791 
<a name="l00792"></a>00792   <span class="keyword">static</span> <span class="keywordtype">int</span> countNonZeroElements(<span class="keywordtype">float</span> *vec, <span class="keywordtype">int</span> n, <span class="keywordtype">double</span> tol=1e-10);
<a name="l00793"></a>00793   <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> safeSignatureAlloc(<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> **sig, <span class="keywordtype">int</span> num_sig=1, <span class="keywordtype">int</span> sig_len=176);
<a name="l00794"></a>00794   <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* safeSignatureAlloc(<span class="keywordtype">int</span> num_sig=1, <span class="keywordtype">int</span> sig_len=176);
<a name="l00795"></a>00795 
<a name="l00796"></a><a class="code" href="classcv_1_1_r_tree_classifier.html#ab15f3ab847e4a49bea0246a65c89cdd3">00796</a>   <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_r_tree_classifier.html#ab15f3ab847e4a49bea0246a65c89cdd3">classes</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> classes_; }
<a name="l00797"></a><a class="code" href="classcv_1_1_r_tree_classifier.html#a483992edb679e53d0c883f06f83f91fb">00797</a>   <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_r_tree_classifier.html#a483992edb679e53d0c883f06f83f91fb">original_num_classes</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> original_num_classes_; }
<a name="l00798"></a>00798 
<a name="l00799"></a>00799   <span class="keywordtype">void</span> setQuantization(<span class="keywordtype">int</span> num_quant_bits);
<a name="l00800"></a>00800   <span class="keywordtype">void</span> discardFloatPosteriors();
<a name="l00801"></a>00801 
<a name="l00802"></a>00802   <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* file_name);
<a name="l00803"></a>00803   <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(std::istream &amp;is);
<a name="l00804"></a>00804   <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* file_name) <span class="keyword">const</span>;
<a name="l00805"></a>00805   <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(std::ostream &amp;os) <span class="keyword">const</span>;
<a name="l00806"></a>00806 
<a name="l00807"></a>00807   <span class="comment">// experimental and debug</span>
<a name="l00808"></a>00808   <span class="keywordtype">void</span> saveAllFloatPosteriors(std::string file_url);
<a name="l00809"></a>00809   <span class="keywordtype">void</span> saveAllBytePosteriors(std::string file_url);
<a name="l00810"></a>00810   <span class="keywordtype">void</span> setFloatPosteriorsFromTextfile_176(std::string url);
<a name="l00811"></a>00811   <span class="keywordtype">float</span> countZeroElements();
<a name="l00812"></a>00812 
<a name="l00813"></a><a class="code" href="classcv_1_1_r_tree_classifier.html#a9c00af90fdf4e7863deee22b85a2c987">00813</a>   std::vector&lt;RandomizedTree&gt; <a class="code" href="classcv_1_1_r_tree_classifier.html#a9c00af90fdf4e7863deee22b85a2c987">trees_</a>;
<a name="l00814"></a>00814 
<a name="l00815"></a>00815 <span class="keyword">private</span>:
<a name="l00816"></a>00816   <span class="keywordtype">int</span> classes_;
<a name="l00817"></a>00817   <span class="keywordtype">int</span> num_quant_bits_;
<a name="l00818"></a>00818   <span class="keyword">mutable</span> <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> **posteriors_;
<a name="l00819"></a>00819   <span class="keyword">mutable</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *ptemp_;
<a name="l00820"></a>00820   <span class="keywordtype">int</span> original_num_classes_;
<a name="l00821"></a>00821   <span class="keywordtype">bool</span> keep_floats_;
<a name="l00822"></a>00822 };
<a name="l00823"></a>00823 
<a name="l00824"></a>00824 <span class="comment">/****************************************************************************************\</span>
<a name="l00825"></a>00825 <span class="comment">*                                     One-Way Descriptor                                 *</span>
<a name="l00826"></a>00826 <span class="comment">\****************************************************************************************/</span>
<a name="l00827"></a>00827 
<a name="l00828"></a><a class="code" href="classcv_1_1_one_way_descriptor.html">00828</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_one_way_descriptor.html">OneWayDescriptor</a>
<a name="l00829"></a>00829 {
<a name="l00830"></a>00830 <span class="keyword">public</span>:
<a name="l00831"></a>00831     <a class="code" href="classcv_1_1_one_way_descriptor.html">OneWayDescriptor</a>();
<a name="l00832"></a>00832     ~<a class="code" href="classcv_1_1_one_way_descriptor.html">OneWayDescriptor</a>();
<a name="l00833"></a>00833 
<a name="l00834"></a>00834     <span class="comment">// allocates memory for given descriptor parameters</span>
<a name="l00835"></a>00835     <span class="keywordtype">void</span> Allocate(<span class="keywordtype">int</span> pose_count, <a class="code" href="struct_cv_size.html">CvSize</a> size, <span class="keywordtype">int</span> nChannels);
<a name="l00836"></a>00836 
<a name="l00837"></a>00837     <span class="comment">// GenerateSamples: generates affine transformed patches with averaging them over small transformation variations.</span>
<a name="l00838"></a>00838     <span class="comment">// If external poses and transforms were specified, uses them instead of generating random ones</span>
<a name="l00839"></a>00839     <span class="comment">// - pose_count: the number of poses to be generated</span>
<a name="l00840"></a>00840     <span class="comment">// - frontal: the input patch (can be a roi in a larger image)</span>
<a name="l00841"></a>00841     <span class="comment">// - norm: if nonzero, normalizes the output patch so that the sum of pixel intensities is 1</span>
<a name="l00842"></a>00842     <span class="keywordtype">void</span> GenerateSamples(<span class="keywordtype">int</span> pose_count, <a class="code" href="struct___ipl_image.html">IplImage</a>* frontal, <span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a7dd251dcee9893767838fff3d80554b3" title="computes norm of array">norm</a> = 0);
<a name="l00843"></a>00843 
<a name="l00844"></a>00844     <span class="comment">// GenerateSamplesFast: generates affine transformed patches with averaging them over small transformation variations.</span>
<a name="l00845"></a>00845     <span class="comment">// Uses precalculated transformed pca components.</span>
<a name="l00846"></a>00846     <span class="comment">// - frontal: the input patch (can be a roi in a larger image)</span>
<a name="l00847"></a>00847     <span class="comment">// - pca_hr_avg: pca average vector</span>
<a name="l00848"></a>00848     <span class="comment">// - pca_hr_eigenvectors: pca eigenvectors</span>
<a name="l00849"></a>00849     <span class="comment">// - pca_descriptors: an array of precomputed descriptors of pca components containing their affine transformations</span>
<a name="l00850"></a>00850     <span class="comment">//   pca_descriptors[0] corresponds to the average, pca_descriptors[1]-pca_descriptors[pca_dim] correspond to eigenvectors</span>
<a name="l00851"></a>00851     <span class="keywordtype">void</span> GenerateSamplesFast(<a class="code" href="struct___ipl_image.html">IplImage</a>* frontal, <a class="code" href="struct_cv_mat.html">CvMat</a>* pca_hr_avg,
<a name="l00852"></a>00852                              <a class="code" href="struct_cv_mat.html">CvMat</a>* pca_hr_eigenvectors, <a class="code" href="classcv_1_1_one_way_descriptor.html">OneWayDescriptor</a>* pca_descriptors);
<a name="l00853"></a>00853 
<a name="l00854"></a>00854     <span class="comment">// sets the poses and corresponding transforms</span>
<a name="l00855"></a>00855     <span class="keywordtype">void</span> SetTransforms(<a class="code" href="classcv_1_1_cv_affine_pose.html">CvAffinePose</a>* poses, <a class="code" href="struct_cv_mat.html">CvMat</a>** transforms);
<a name="l00856"></a>00856 
<a name="l00857"></a>00857     <span class="comment">// Initialize: builds a descriptor.</span>
<a name="l00858"></a>00858     <span class="comment">// - pose_count: the number of poses to build. If poses were set externally, uses them rather than generating random ones</span>
<a name="l00859"></a>00859     <span class="comment">// - frontal: input patch. Can be a roi in a larger image</span>
<a name="l00860"></a>00860     <span class="comment">// - feature_name: the feature name to be associated with the descriptor</span>
<a name="l00861"></a>00861     <span class="comment">// - norm: if 1, the affine transformed patches are normalized so that their sum is 1</span>
<a name="l00862"></a>00862     <span class="keywordtype">void</span> Initialize(<span class="keywordtype">int</span> pose_count, <a class="code" href="struct___ipl_image.html">IplImage</a>* frontal, <span class="keyword">const</span> <span class="keywordtype">char</span>* feature_name = 0, <span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a7dd251dcee9893767838fff3d80554b3" title="computes norm of array">norm</a> = 0);
<a name="l00863"></a>00863 
<a name="l00864"></a>00864     <span class="comment">// InitializeFast: builds a descriptor using precomputed descriptors of pca components</span>
<a name="l00865"></a>00865     <span class="comment">// - pose_count: the number of poses to build</span>
<a name="l00866"></a>00866     <span class="comment">// - frontal: input patch. Can be a roi in a larger image</span>
<a name="l00867"></a>00867     <span class="comment">// - feature_name: the feature name to be associated with the descriptor</span>
<a name="l00868"></a>00868     <span class="comment">// - pca_hr_avg: average vector for PCA</span>
<a name="l00869"></a>00869     <span class="comment">// - pca_hr_eigenvectors: PCA eigenvectors (one vector per row)</span>
<a name="l00870"></a>00870     <span class="comment">// - pca_descriptors: precomputed descriptors of PCA components, the first descriptor for the average vector</span>
<a name="l00871"></a>00871     <span class="comment">// followed by the descriptors for eigenvectors</span>
<a name="l00872"></a>00872     <span class="keywordtype">void</span> InitializeFast(<span class="keywordtype">int</span> pose_count, <a class="code" href="struct___ipl_image.html">IplImage</a>* frontal, <span class="keyword">const</span> <span class="keywordtype">char</span>* feature_name,
<a name="l00873"></a>00873                         <a class="code" href="struct_cv_mat.html">CvMat</a>* pca_hr_avg, <a class="code" href="struct_cv_mat.html">CvMat</a>* pca_hr_eigenvectors, <a class="code" href="classcv_1_1_one_way_descriptor.html">OneWayDescriptor</a>* pca_descriptors);
<a name="l00874"></a>00874 
<a name="l00875"></a>00875     <span class="comment">// ProjectPCASample: unwarps an image patch into a vector and projects it into PCA space</span>
<a name="l00876"></a>00876     <span class="comment">// - patch: input image patch</span>
<a name="l00877"></a>00877     <span class="comment">// - avg: PCA average vector</span>
<a name="l00878"></a>00878     <span class="comment">// - eigenvectors: PCA eigenvectors, one per row</span>
<a name="l00879"></a>00879     <span class="comment">// - pca_coeffs: output PCA coefficients</span>
<a name="l00880"></a>00880     <span class="keywordtype">void</span> ProjectPCASample(<a class="code" href="struct___ipl_image.html">IplImage</a>* patch, <a class="code" href="struct_cv_mat.html">CvMat</a>* avg, <a class="code" href="struct_cv_mat.html">CvMat</a>* eigenvectors, <a class="code" href="struct_cv_mat.html">CvMat</a>* pca_coeffs) <span class="keyword">const</span>;
<a name="l00881"></a>00881 
<a name="l00882"></a>00882     <span class="comment">// InitializePCACoeffs: projects all warped patches into PCA space</span>
<a name="l00883"></a>00883     <span class="comment">// - avg: PCA average vector</span>
<a name="l00884"></a>00884     <span class="comment">// - eigenvectors: PCA eigenvectors, one per row</span>
<a name="l00885"></a>00885     <span class="keywordtype">void</span> InitializePCACoeffs(<a class="code" href="struct_cv_mat.html">CvMat</a>* avg, <a class="code" href="struct_cv_mat.html">CvMat</a>* eigenvectors);
<a name="l00886"></a>00886 
<a name="l00887"></a>00887     <span class="comment">// EstimatePose: finds the closest match between an input patch and a set of patches with different poses</span>
<a name="l00888"></a>00888     <span class="comment">// - patch: input image patch</span>
<a name="l00889"></a>00889     <span class="comment">// - pose_idx: the output index of the closest pose</span>
<a name="l00890"></a>00890     <span class="comment">// - distance: the distance to the closest pose (L2 distance)</span>
<a name="l00891"></a>00891     <span class="keywordtype">void</span> EstimatePose(<a class="code" href="struct___ipl_image.html">IplImage</a>* patch, <span class="keywordtype">int</span>&amp; pose_idx, <span class="keywordtype">float</span>&amp; distance) <span class="keyword">const</span>;
<a name="l00892"></a>00892 
<a name="l00893"></a>00893     <span class="comment">// EstimatePosePCA: finds the closest match between an input patch and a set of patches with different poses.</span>
<a name="l00894"></a>00894     <span class="comment">// The distance between patches is computed in PCA space</span>
<a name="l00895"></a>00895     <span class="comment">// - patch: input image patch</span>
<a name="l00896"></a>00896     <span class="comment">// - pose_idx: the output index of the closest pose</span>
<a name="l00897"></a>00897     <span class="comment">// - distance: distance to the closest pose (L2 distance in PCA space)</span>
<a name="l00898"></a>00898     <span class="comment">// - avg: PCA average vector. If 0, matching without PCA is used</span>
<a name="l00899"></a>00899     <span class="comment">// - eigenvectors: PCA eigenvectors, one per row</span>
<a name="l00900"></a>00900     <span class="keywordtype">void</span> EstimatePosePCA(<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ac5046bc0456e9295d80b37774384798c">CvArr</a>* patch, <span class="keywordtype">int</span>&amp; pose_idx, <span class="keywordtype">float</span>&amp; distance, <a class="code" href="struct_cv_mat.html">CvMat</a>* avg, <a class="code" href="struct_cv_mat.html">CvMat</a>* eigenvalues) <span class="keyword">const</span>;
<a name="l00901"></a>00901 
<a name="l00902"></a>00902     <span class="comment">// GetPatchSize: returns the size of each image patch after warping (2 times smaller than the input patch)</span>
<a name="l00903"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a5992533b7b8d56ea6f3571d0485ad96c">00903</a>     <a class="code" href="struct_cv_size.html">CvSize</a> GetPatchSize()<span class="keyword"> const</span>
<a name="l00904"></a>00904 <span class="keyword">    </span>{
<a name="l00905"></a>00905         <span class="keywordflow">return</span> m_patch_size;
<a name="l00906"></a>00906     }
<a name="l00907"></a>00907 
<a name="l00908"></a>00908     <span class="comment">// GetInputPatchSize: returns the required size of the patch that the descriptor is built from</span>
<a name="l00909"></a>00909     <span class="comment">// (2 time larger than the patch after warping)</span>
<a name="l00910"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a699f2ea939913d87c82af19bffaf5564">00910</a>     <a class="code" href="struct_cv_size.html">CvSize</a> GetInputPatchSize()<span class="keyword"> const</span>
<a name="l00911"></a>00911 <span class="keyword">    </span>{
<a name="l00912"></a>00912         <span class="keywordflow">return</span> <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#ad25ce7ac18665d5c9b062283ff0204ed">cvSize</a>(m_patch_size.width*2, m_patch_size.height*2);
<a name="l00913"></a>00913     }
<a name="l00914"></a>00914 
<a name="l00915"></a>00915     <span class="comment">// GetPatch: returns a patch corresponding to specified pose index</span>
<a name="l00916"></a>00916     <span class="comment">// - index: pose index</span>
<a name="l00917"></a>00917     <span class="comment">// - return value: the patch corresponding to specified pose index</span>
<a name="l00918"></a>00918     <a class="code" href="struct___ipl_image.html">IplImage</a>* GetPatch(<span class="keywordtype">int</span> index);
<a name="l00919"></a>00919 
<a name="l00920"></a>00920     <span class="comment">// GetPose: returns a pose corresponding to specified pose index</span>
<a name="l00921"></a>00921     <span class="comment">// - index: pose index</span>
<a name="l00922"></a>00922     <span class="comment">// - return value: the pose corresponding to specified pose index</span>
<a name="l00923"></a>00923     <a class="code" href="classcv_1_1_cv_affine_pose.html">CvAffinePose</a> GetPose(<span class="keywordtype">int</span> index) <span class="keyword">const</span>;
<a name="l00924"></a>00924 
<a name="l00925"></a>00925     <span class="comment">// Save: saves all patches with different poses to a specified path</span>
<a name="l00926"></a>00926     <span class="keywordtype">void</span> Save(<span class="keyword">const</span> <span class="keywordtype">char</span>* path);
<a name="l00927"></a>00927 
<a name="l00928"></a>00928     <span class="comment">// ReadByName: reads a descriptor from a file storage</span>
<a name="l00929"></a>00929     <span class="comment">// - fs: file storage</span>
<a name="l00930"></a>00930     <span class="comment">// - parent: parent node</span>
<a name="l00931"></a>00931     <span class="comment">// - name: node name</span>
<a name="l00932"></a>00932     <span class="comment">// - return value: 1 if succeeded, 0 otherwise</span>
<a name="l00933"></a>00933     <span class="keywordtype">int</span> ReadByName(<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a84556d1bb6f1b8b02c04c60246747a7e">CvFileStorage</a>* fs, <a class="code" href="struct_cv_file_node.html">CvFileNode</a>* parent, <span class="keyword">const</span> <span class="keywordtype">char</span>* name);
<a name="l00934"></a>00934 
<a name="l00935"></a>00935     <span class="comment">// ReadByName: reads a descriptor from a file node</span>
<a name="l00936"></a>00936     <span class="comment">// - parent: parent node</span>
<a name="l00937"></a>00937     <span class="comment">// - name: node name</span>
<a name="l00938"></a>00938     <span class="comment">// - return value: 1 if succeeded, 0 otherwise</span>
<a name="l00939"></a>00939     <span class="keywordtype">int</span> ReadByName(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a> &amp;parent, <span class="keyword">const</span> <span class="keywordtype">char</span>* name);
<a name="l00940"></a>00940 
<a name="l00941"></a>00941     <span class="comment">// Write: writes a descriptor into a file storage</span>
<a name="l00942"></a>00942     <span class="comment">// - fs: file storage</span>
<a name="l00943"></a>00943     <span class="comment">// - name: node name</span>
<a name="l00944"></a>00944     <span class="keywordtype">void</span> Write(<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a84556d1bb6f1b8b02c04c60246747a7e">CvFileStorage</a>* fs, <span class="keyword">const</span> <span class="keywordtype">char</span>* name);
<a name="l00945"></a>00945 
<a name="l00946"></a>00946     <span class="comment">// GetFeatureName: returns a name corresponding to a feature</span>
<a name="l00947"></a>00947     <span class="keyword">const</span> <span class="keywordtype">char</span>* GetFeatureName() <span class="keyword">const</span>;
<a name="l00948"></a>00948 
<a name="l00949"></a>00949     <span class="comment">// GetCenter: returns the center of the feature</span>
<a name="l00950"></a>00950     <a class="code" href="struct_cv_point.html">CvPoint</a> GetCenter() <span class="keyword">const</span>;
<a name="l00951"></a>00951 
<a name="l00952"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a35e49f9cc5b7a7c0330f169d3f8ec8b5">00952</a>     <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_one_way_descriptor.html#a35e49f9cc5b7a7c0330f169d3f8ec8b5">SetPCADimHigh</a>(<span class="keywordtype">int</span> pca_dim_high) {m_pca_dim_high = pca_dim_high;};
<a name="l00953"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a1bbdc42c887ee69c93031bf0ef146101">00953</a>     <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_one_way_descriptor.html#a1bbdc42c887ee69c93031bf0ef146101">SetPCADimLow</a>(<span class="keywordtype">int</span> pca_dim_low) {m_pca_dim_low = pca_dim_low;};
<a name="l00954"></a>00954 
<a name="l00955"></a>00955     <span class="keywordtype">int</span> GetPCADimLow() <span class="keyword">const</span>;
<a name="l00956"></a>00956     <span class="keywordtype">int</span> GetPCADimHigh() <span class="keyword">const</span>;
<a name="l00957"></a>00957 
<a name="l00958"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a87f7bf26cea1506d49901d24d49e1628">00958</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>** <a class="code" href="classcv_1_1_one_way_descriptor.html#a87f7bf26cea1506d49901d24d49e1628">GetPCACoeffs</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_pca_coeffs;}
<a name="l00959"></a>00959 
<a name="l00960"></a>00960 <span class="keyword">protected</span>:
<a name="l00961"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#ab3bf8eab64e509e4a74269b839424f9a">00961</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor.html#ab3bf8eab64e509e4a74269b839424f9a">m_pose_count</a>; <span class="comment">// the number of poses</span>
<a name="l00962"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#ace2b1edd6bfe6bd412190cb0a82f39fa">00962</a>     <a class="code" href="struct_cv_size.html">CvSize</a> <a class="code" href="classcv_1_1_one_way_descriptor.html#ace2b1edd6bfe6bd412190cb0a82f39fa">m_patch_size</a>; <span class="comment">// size of each image</span>
<a name="l00963"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a9ad25e1d390b30dda0308be33fb1b3c0">00963</a>     <a class="code" href="struct___ipl_image.html">IplImage</a>** <a class="code" href="classcv_1_1_one_way_descriptor.html#a9ad25e1d390b30dda0308be33fb1b3c0">m_samples</a>; <span class="comment">// an array of length m_pose_count containing the patch in different poses</span>
<a name="l00964"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#aee489a0a4d33d9c890f3f9a4fb547ee6">00964</a>     <a class="code" href="struct___ipl_image.html">IplImage</a>* <a class="code" href="classcv_1_1_one_way_descriptor.html#aee489a0a4d33d9c890f3f9a4fb547ee6">m_input_patch</a>;
<a name="l00965"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a34feae0d045492ae83b8d0c839aea171">00965</a>     <a class="code" href="struct___ipl_image.html">IplImage</a>* <a class="code" href="classcv_1_1_one_way_descriptor.html#a34feae0d045492ae83b8d0c839aea171">m_train_patch</a>;
<a name="l00966"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a9bd8d5cda48b5f0882547e3210722ca4">00966</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>** <a class="code" href="classcv_1_1_one_way_descriptor.html#a9bd8d5cda48b5f0882547e3210722ca4">m_pca_coeffs</a>; <span class="comment">// an array of length m_pose_count containing pca decomposition of the patch in different poses</span>
<a name="l00967"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a07484b2ab56bed1fe6a23d78c326f24f">00967</a>     <a class="code" href="classcv_1_1_cv_affine_pose.html">CvAffinePose</a>* <a class="code" href="classcv_1_1_one_way_descriptor.html#a07484b2ab56bed1fe6a23d78c326f24f">m_affine_poses</a>; <span class="comment">// an array of poses</span>
<a name="l00968"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a847634b8efe670b360a45a6fc1b3e938">00968</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>** <a class="code" href="classcv_1_1_one_way_descriptor.html#a847634b8efe670b360a45a6fc1b3e938">m_transforms</a>; <span class="comment">// an array of affine transforms corresponding to poses</span>
<a name="l00969"></a>00969 
<a name="l00970"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#ad812e563a11a145c9370cb4db0e82292">00970</a>     <span class="keywordtype">string</span> <a class="code" href="classcv_1_1_one_way_descriptor.html#ad812e563a11a145c9370cb4db0e82292">m_feature_name</a>; <span class="comment">// the name of the feature associated with the descriptor</span>
<a name="l00971"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#ab60358ffb33306f1e35bbf37dc94b0dd">00971</a>     <a class="code" href="struct_cv_point.html">CvPoint</a> <a class="code" href="classcv_1_1_one_way_descriptor.html#ab60358ffb33306f1e35bbf37dc94b0dd">m_center</a>; <span class="comment">// the coordinates of the feature (the center of the input image ROI)</span>
<a name="l00972"></a>00972 
<a name="l00973"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#ac6b97d879eb7d81f43dd0fbf87ab14c7">00973</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor.html#ac6b97d879eb7d81f43dd0fbf87ab14c7">m_pca_dim_high</a>; <span class="comment">// the number of descriptor pca components to use for generating affine poses</span>
<a name="l00974"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a72b9fefad76ad9a218c5b7504e038fa4">00974</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor.html#a72b9fefad76ad9a218c5b7504e038fa4">m_pca_dim_low</a>; <span class="comment">// the number of pca components to use for comparison</span>
<a name="l00975"></a>00975 };
<a name="l00976"></a>00976 
<a name="l00977"></a>00977 
<a name="l00978"></a>00978 <span class="comment">// OneWayDescriptorBase: encapsulates functionality for training/loading a set of one way descriptors</span>
<a name="l00979"></a>00979 <span class="comment">// and finding the nearest closest descriptor to an input feature</span>
<a name="l00980"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html">00980</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_one_way_descriptor_base.html">OneWayDescriptorBase</a>
<a name="l00981"></a>00981 {
<a name="l00982"></a>00982 <span class="keyword">public</span>:
<a name="l00983"></a>00983 
<a name="l00984"></a>00984     <span class="comment">// creates an instance of OneWayDescriptor from a set of training files</span>
<a name="l00985"></a>00985     <span class="comment">// - patch_size: size of the input (large) patch</span>
<a name="l00986"></a>00986     <span class="comment">// - pose_count: the number of poses to generate for each descriptor</span>
<a name="l00987"></a>00987     <span class="comment">// - train_path: path to training files</span>
<a name="l00988"></a>00988     <span class="comment">// - pca_config: the name of the file that contains PCA for small patches (2 times smaller</span>
<a name="l00989"></a>00989     <span class="comment">// than patch_size each dimension</span>
<a name="l00990"></a>00990     <span class="comment">// - pca_hr_config: the name of the file that contains PCA for large patches (of patch_size size)</span>
<a name="l00991"></a>00991     <span class="comment">// - pca_desc_config: the name of the file that contains descriptors of PCA components</span>
<a name="l00992"></a>00992     <a class="code" href="classcv_1_1_one_way_descriptor_base.html">OneWayDescriptorBase</a>(<a class="code" href="struct_cv_size.html">CvSize</a> patch_size, <span class="keywordtype">int</span> pose_count, <span class="keyword">const</span> <span class="keywordtype">char</span>* train_path = 0, <span class="keyword">const</span> <span class="keywordtype">char</span>* pca_config = 0,
<a name="l00993"></a>00993                          <span class="keyword">const</span> <span class="keywordtype">char</span>* pca_hr_config = 0, <span class="keyword">const</span> <span class="keywordtype">char</span>* pca_desc_config = 0, <span class="keywordtype">int</span> pyr_levels = 1,
<a name="l00994"></a>00994                          <span class="keywordtype">int</span> pca_dim_high = 100, <span class="keywordtype">int</span> pca_dim_low = 100);
<a name="l00995"></a>00995 
<a name="l00996"></a>00996     <a class="code" href="classcv_1_1_one_way_descriptor_base.html">OneWayDescriptorBase</a>(<a class="code" href="struct_cv_size.html">CvSize</a> patch_size, <span class="keywordtype">int</span> pose_count, <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;pca_filename, <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;train_path = <span class="keywordtype">string</span>(), <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;images_list = <span class="keywordtype">string</span>(),
<a name="l00997"></a>00997                          <span class="keywordtype">float</span> _scale_min = 0.7f, <span class="keywordtype">float</span> _scale_max=1.5f, <span class="keywordtype">float</span> _scale_step=1.2f, <span class="keywordtype">int</span> pyr_levels = 1,
<a name="l00998"></a>00998                          <span class="keywordtype">int</span> pca_dim_high = 100, <span class="keywordtype">int</span> pca_dim_low = 100);
<a name="l00999"></a>00999 
<a name="l01000"></a>01000 
<a name="l01001"></a>01001     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_one_way_descriptor_base.html">OneWayDescriptorBase</a>();
<a name="l01002"></a>01002     <span class="keywordtype">void</span> clear ();
<a name="l01003"></a>01003 
<a name="l01004"></a>01004 
<a name="l01005"></a>01005     <span class="comment">// Allocate: allocates memory for a given number of descriptors</span>
<a name="l01006"></a>01006     <span class="keywordtype">void</span> Allocate(<span class="keywordtype">int</span> train_feature_count);
<a name="l01007"></a>01007 
<a name="l01008"></a>01008     <span class="comment">// AllocatePCADescriptors: allocates memory for pca descriptors</span>
<a name="l01009"></a>01009     <span class="keywordtype">void</span> AllocatePCADescriptors();
<a name="l01010"></a>01010 
<a name="l01011"></a>01011     <span class="comment">// returns patch size</span>
<a name="l01012"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#ab697e9e2ff5c330e8a6190bdd10a39a0">01012</a>     <a class="code" href="struct_cv_size.html">CvSize</a> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#ab697e9e2ff5c330e8a6190bdd10a39a0">GetPatchSize</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_patch_size;};
<a name="l01013"></a>01013     <span class="comment">// returns the number of poses for each descriptor</span>
<a name="l01014"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a99e46daec7278d4c7e3868c974ce902e">01014</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a99e46daec7278d4c7e3868c974ce902e">GetPoseCount</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_pose_count;};
<a name="l01015"></a>01015 
<a name="l01016"></a>01016     <span class="comment">// returns the number of pyramid levels</span>
<a name="l01017"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a1cde8e0c7ccf9ef6672900e1e19311b2">01017</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a1cde8e0c7ccf9ef6672900e1e19311b2">GetPyrLevels</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_pyr_levels;};
<a name="l01018"></a>01018 
<a name="l01019"></a>01019     <span class="comment">// returns the number of descriptors</span>
<a name="l01020"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a05f690a8231cf6e692ff37110516c96c">01020</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a05f690a8231cf6e692ff37110516c96c">GetDescriptorCount</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_train_feature_count;};
<a name="l01021"></a>01021 
<a name="l01022"></a>01022     <span class="comment">// CreateDescriptorsFromImage: creates descriptors for each of the input features</span>
<a name="l01023"></a>01023     <span class="comment">// - src: input image</span>
<a name="l01024"></a>01024     <span class="comment">// - features: input features</span>
<a name="l01025"></a>01025     <span class="comment">// - pyr_levels: the number of pyramid levels</span>
<a name="l01026"></a>01026     <span class="keywordtype">void</span> CreateDescriptorsFromImage(<a class="code" href="struct___ipl_image.html">IplImage</a>* src, <span class="keyword">const</span> std::vector&lt;cv::KeyPoint&gt;&amp; features);
<a name="l01027"></a>01027 
<a name="l01028"></a>01028     <span class="comment">// CreatePCADescriptors: generates descriptors for PCA components, needed for fast generation of feature descriptors</span>
<a name="l01029"></a>01029     <span class="keywordtype">void</span> CreatePCADescriptors();
<a name="l01030"></a>01030 
<a name="l01031"></a>01031     <span class="comment">// returns a feature descriptor by feature index</span>
<a name="l01032"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#ae4522d2c71526b8dd1f3375dcb9b2cf0">01032</a>     <span class="keyword">const</span> <a class="code" href="classcv_1_1_one_way_descriptor.html">OneWayDescriptor</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#ae4522d2c71526b8dd1f3375dcb9b2cf0">GetDescriptor</a>(<span class="keywordtype">int</span> desc_idx)<span class="keyword"> const </span>{<span class="keywordflow">return</span> &amp;m_descriptors[desc_idx];};
<a name="l01033"></a>01033 
<a name="l01034"></a>01034     <span class="comment">// FindDescriptor: finds the closest descriptor</span>
<a name="l01035"></a>01035     <span class="comment">// - patch: input image patch</span>
<a name="l01036"></a>01036     <span class="comment">// - desc_idx: output index of the closest descriptor to the input patch</span>
<a name="l01037"></a>01037     <span class="comment">// - pose_idx: output index of the closest pose of the closest descriptor to the input patch</span>
<a name="l01038"></a>01038     <span class="comment">// - distance: distance from the input patch to the closest feature pose</span>
<a name="l01039"></a>01039     <span class="comment">// - _scales: scales of the input patch for each descriptor</span>
<a name="l01040"></a>01040     <span class="comment">// - scale_ranges: input scales variation (float[2])</span>
<a name="l01041"></a>01041     <span class="keywordtype">void</span> FindDescriptor(<a class="code" href="struct___ipl_image.html">IplImage</a>* patch, <span class="keywordtype">int</span>&amp; desc_idx, <span class="keywordtype">int</span>&amp; pose_idx, <span class="keywordtype">float</span>&amp; distance, <span class="keywordtype">float</span>* _scale = 0, <span class="keywordtype">float</span>* scale_ranges = 0) <span class="keyword">const</span>;
<a name="l01042"></a>01042 
<a name="l01043"></a>01043     <span class="comment">// - patch: input image patch</span>
<a name="l01044"></a>01044     <span class="comment">// - n: number of the closest indexes</span>
<a name="l01045"></a>01045     <span class="comment">// - desc_idxs: output indexes of the closest descriptor to the input patch (n)</span>
<a name="l01046"></a>01046     <span class="comment">// - pose_idx: output indexes of the closest pose of the closest descriptor to the input patch (n)</span>
<a name="l01047"></a>01047     <span class="comment">// - distances: distance from the input patch to the closest feature pose (n)</span>
<a name="l01048"></a>01048     <span class="comment">// - _scales: scales of the input patch</span>
<a name="l01049"></a>01049     <span class="comment">// - scale_ranges: input scales variation (float[2])</span>
<a name="l01050"></a>01050     <span class="keywordtype">void</span> FindDescriptor(<a class="code" href="struct___ipl_image.html">IplImage</a>* patch, <span class="keywordtype">int</span> n, std::vector&lt;int&gt;&amp; desc_idxs, std::vector&lt;int&gt;&amp; pose_idxs,
<a name="l01051"></a>01051                         std::vector&lt;float&gt;&amp; distances, std::vector&lt;float&gt;&amp; _scales, <span class="keywordtype">float</span>* scale_ranges = 0) <span class="keyword">const</span>;
<a name="l01052"></a>01052 
<a name="l01053"></a>01053     <span class="comment">// FindDescriptor: finds the closest descriptor</span>
<a name="l01054"></a>01054     <span class="comment">// - src: input image</span>
<a name="l01055"></a>01055     <span class="comment">// - pt: center of the feature</span>
<a name="l01056"></a>01056     <span class="comment">// - desc_idx: output index of the closest descriptor to the input patch</span>
<a name="l01057"></a>01057     <span class="comment">// - pose_idx: output index of the closest pose of the closest descriptor to the input patch</span>
<a name="l01058"></a>01058     <span class="comment">// - distance: distance from the input patch to the closest feature pose</span>
<a name="l01059"></a>01059     <span class="keywordtype">void</span> FindDescriptor(<a class="code" href="struct___ipl_image.html">IplImage</a>* src, <a class="code" href="classcv_1_1_point__.html">cv::Point2f</a> pt, <span class="keywordtype">int</span>&amp; desc_idx, <span class="keywordtype">int</span>&amp; pose_idx, <span class="keywordtype">float</span>&amp; distance) <span class="keyword">const</span>;
<a name="l01060"></a>01060 
<a name="l01061"></a>01061     <span class="comment">// InitializePoses: generates random poses</span>
<a name="l01062"></a>01062     <span class="keywordtype">void</span> InitializePoses();
<a name="l01063"></a>01063 
<a name="l01064"></a>01064     <span class="comment">// InitializeTransformsFromPoses: generates 2x3 affine matrices from poses (initializes m_transforms)</span>
<a name="l01065"></a>01065     <span class="keywordtype">void</span> InitializeTransformsFromPoses();
<a name="l01066"></a>01066 
<a name="l01067"></a>01067     <span class="comment">// InitializePoseTransforms: subsequently calls InitializePoses and InitializeTransformsFromPoses</span>
<a name="l01068"></a>01068     <span class="keywordtype">void</span> InitializePoseTransforms();
<a name="l01069"></a>01069 
<a name="l01070"></a>01070     <span class="comment">// InitializeDescriptor: initializes a descriptor</span>
<a name="l01071"></a>01071     <span class="comment">// - desc_idx: descriptor index</span>
<a name="l01072"></a>01072     <span class="comment">// - train_image: image patch (ROI is supported)</span>
<a name="l01073"></a>01073     <span class="comment">// - feature_label: feature textual label</span>
<a name="l01074"></a>01074     <span class="keywordtype">void</span> InitializeDescriptor(<span class="keywordtype">int</span> desc_idx, <a class="code" href="struct___ipl_image.html">IplImage</a>* train_image, <span class="keyword">const</span> <span class="keywordtype">char</span>* feature_label);
<a name="l01075"></a>01075 
<a name="l01076"></a>01076     <span class="keywordtype">void</span> InitializeDescriptor(<span class="keywordtype">int</span> desc_idx, <a class="code" href="struct___ipl_image.html">IplImage</a>* train_image, <span class="keyword">const</span> <a class="code" href="classcv_1_1_key_point.html">cv::KeyPoint</a>&amp; keypoint, <span class="keyword">const</span> <span class="keywordtype">char</span>* feature_label);
<a name="l01077"></a>01077 
<a name="l01078"></a>01078     <span class="comment">// InitializeDescriptors: load features from an image and create descriptors for each of them</span>
<a name="l01079"></a>01079     <span class="keywordtype">void</span> InitializeDescriptors(<a class="code" href="struct___ipl_image.html">IplImage</a>* train_image, <span class="keyword">const</span> vector&lt;cv::KeyPoint&gt;&amp; features,
<a name="l01080"></a>01080                                <span class="keyword">const</span> <span class="keywordtype">char</span>* feature_label = <span class="stringliteral">&quot;&quot;</span>, <span class="keywordtype">int</span> desc_start_idx = 0);
<a name="l01081"></a>01081 
<a name="l01082"></a>01082     <span class="comment">// Write: writes this object to a file storage</span>
<a name="l01083"></a>01083     <span class="comment">// - fs: output filestorage</span>
<a name="l01084"></a>01084     <span class="keywordtype">void</span> Write (<a class="code" href="classcv_1_1_file_storage.html">FileStorage</a> &amp;fs) <span class="keyword">const</span>;
<a name="l01085"></a>01085     
<a name="l01086"></a>01086     <span class="comment">// Read: reads OneWayDescriptorBase object from a file node</span>
<a name="l01087"></a>01087     <span class="comment">// - fn: input file node    </span>
<a name="l01088"></a>01088     <span class="keywordtype">void</span> Read (<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a> &amp;fn);
<a name="l01089"></a>01089 
<a name="l01090"></a>01090     <span class="comment">// LoadPCADescriptors: loads PCA descriptors from a file</span>
<a name="l01091"></a>01091     <span class="comment">// - filename: input filename</span>
<a name="l01092"></a>01092     <span class="keywordtype">int</span> LoadPCADescriptors(<span class="keyword">const</span> <span class="keywordtype">char</span>* filename);
<a name="l01093"></a>01093 
<a name="l01094"></a>01094     <span class="comment">// LoadPCADescriptors: loads PCA descriptors from a file node</span>
<a name="l01095"></a>01095     <span class="comment">// - fn: input file node</span>
<a name="l01096"></a>01096     <span class="keywordtype">int</span> LoadPCADescriptors(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a> &amp;fn);
<a name="l01097"></a>01097 
<a name="l01098"></a>01098     <span class="comment">// SavePCADescriptors: saves PCA descriptors to a file</span>
<a name="l01099"></a>01099     <span class="comment">// - filename: output filename</span>
<a name="l01100"></a>01100     <span class="keywordtype">void</span> SavePCADescriptors(<span class="keyword">const</span> <span class="keywordtype">char</span>* filename);
<a name="l01101"></a>01101 
<a name="l01102"></a>01102     <span class="comment">// SavePCADescriptors: saves PCA descriptors to a file storage</span>
<a name="l01103"></a>01103     <span class="comment">// - fs: output file storage</span>
<a name="l01104"></a>01104     <span class="keywordtype">void</span> SavePCADescriptors(<a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a84556d1bb6f1b8b02c04c60246747a7e">CvFileStorage</a>* fs) <span class="keyword">const</span>;
<a name="l01105"></a>01105 
<a name="l01106"></a>01106     <span class="comment">// GeneratePCA: calculate and save PCA components and descriptors</span>
<a name="l01107"></a>01107     <span class="comment">// - img_path: path to training PCA images directory</span>
<a name="l01108"></a>01108     <span class="comment">// - images_list: filename with filenames of training PCA images</span>
<a name="l01109"></a>01109     <span class="keywordtype">void</span> GeneratePCA(<span class="keyword">const</span> <span class="keywordtype">char</span>* img_path, <span class="keyword">const</span> <span class="keywordtype">char</span>* images_list, <span class="keywordtype">int</span> pose_count=500);
<a name="l01110"></a>01110 
<a name="l01111"></a>01111     <span class="comment">// SetPCAHigh: sets the high resolution pca matrices (copied to internal structures)</span>
<a name="l01112"></a>01112     <span class="keywordtype">void</span> SetPCAHigh(<a class="code" href="struct_cv_mat.html">CvMat</a>* avg, <a class="code" href="struct_cv_mat.html">CvMat</a>* eigenvectors);
<a name="l01113"></a>01113 
<a name="l01114"></a>01114     <span class="comment">// SetPCALow: sets the low resolution pca matrices (copied to internal structures)</span>
<a name="l01115"></a>01115     <span class="keywordtype">void</span> SetPCALow(<a class="code" href="struct_cv_mat.html">CvMat</a>* avg, <a class="code" href="struct_cv_mat.html">CvMat</a>* eigenvectors);
<a name="l01116"></a>01116 
<a name="l01117"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a02dd2c18aa6f5414b3c15871d8fd936b">01117</a>     <span class="keywordtype">int</span> GetLowPCA(<a class="code" href="struct_cv_mat.html">CvMat</a>** avg, <a class="code" href="struct_cv_mat.html">CvMat</a>** eigenvectors)
<a name="l01118"></a>01118     {
<a name="l01119"></a>01119         *avg = m_pca_avg;
<a name="l01120"></a>01120         *eigenvectors = m_pca_eigenvectors;
<a name="l01121"></a>01121         <span class="keywordflow">return</span> m_pca_dim_low;
<a name="l01122"></a>01122     };
<a name="l01123"></a>01123 
<a name="l01124"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a43237911ad4625bc86bcd52a8ebbfcee">01124</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a43237911ad4625bc86bcd52a8ebbfcee">GetPCADimLow</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_pca_dim_low;};
<a name="l01125"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#ad772cef64cdd1037b0f26ee42930ca76">01125</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#ad772cef64cdd1037b0f26ee42930ca76">GetPCADimHigh</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_pca_dim_high;};
<a name="l01126"></a>01126 
<a name="l01127"></a>01127     <span class="keywordtype">void</span> ConvertDescriptorsArrayToTree(); <span class="comment">// Converting pca_descriptors array to KD tree</span>
<a name="l01128"></a>01128 
<a name="l01129"></a>01129     <span class="comment">// GetPCAFilename: get default PCA filename</span>
<a name="l01130"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#abde625a15bca0ba0f0e928d7f3f5dee4">01130</a>     <span class="keyword">static</span> <span class="keywordtype">string</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#abde625a15bca0ba0f0e928d7f3f5dee4">GetPCAFilename</a> () { <span class="keywordflow">return</span> <span class="stringliteral">&quot;pca.yml&quot;</span>; }
<a name="l01131"></a>01131 
<a name="l01132"></a>01132 <span class="keyword">protected</span>:
<a name="l01133"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#ab109f2d46b2bbf853158dec66f24ef57">01133</a>     <a class="code" href="struct_cv_size.html">CvSize</a> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#ab109f2d46b2bbf853158dec66f24ef57">m_patch_size</a>; <span class="comment">// patch size</span>
<a name="l01134"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a695d5465b9f923e00d7ff9d8af2bbd51">01134</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a695d5465b9f923e00d7ff9d8af2bbd51">m_pose_count</a>; <span class="comment">// the number of poses for each descriptor</span>
<a name="l01135"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a905effbcfcca2dd002224317b48ea288">01135</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a905effbcfcca2dd002224317b48ea288">m_train_feature_count</a>; <span class="comment">// the number of the training features</span>
<a name="l01136"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a22c399b9e3a7e5a64780f4b234bb8f18">01136</a>     <a class="code" href="classcv_1_1_one_way_descriptor.html">OneWayDescriptor</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a22c399b9e3a7e5a64780f4b234bb8f18">m_descriptors</a>; <span class="comment">// array of train feature descriptors</span>
<a name="l01137"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a04af1c90f1dad3fcac585877e1ce6585">01137</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a04af1c90f1dad3fcac585877e1ce6585">m_pca_avg</a>; <span class="comment">// PCA average Vector for small patches</span>
<a name="l01138"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a7ecc5408ce5db7431406b6a6eac9d51f">01138</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a7ecc5408ce5db7431406b6a6eac9d51f">m_pca_eigenvectors</a>; <span class="comment">// PCA eigenvectors for small patches</span>
<a name="l01139"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#ac5546555811a3a23ef4e6a69f935633d">01139</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#ac5546555811a3a23ef4e6a69f935633d">m_pca_hr_avg</a>; <span class="comment">// PCA average Vector for large patches</span>
<a name="l01140"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#aaf56efc18add898b42229bae4192e1c7">01140</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#aaf56efc18add898b42229bae4192e1c7">m_pca_hr_eigenvectors</a>; <span class="comment">// PCA eigenvectors for large patches</span>
<a name="l01141"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a7ddf78b1c2bd0237ee33d4dfec0908f1">01141</a>     <a class="code" href="classcv_1_1_one_way_descriptor.html">OneWayDescriptor</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a7ddf78b1c2bd0237ee33d4dfec0908f1">m_pca_descriptors</a>; <span class="comment">// an array of PCA descriptors</span>
<a name="l01142"></a>01142 
<a name="l01143"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#ac35fa4f783dc3c16f3f1a04e0e54c859">01143</a>     cv::flann::Index* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#ac35fa4f783dc3c16f3f1a04e0e54c859">m_pca_descriptors_tree</a>;
<a name="l01144"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#aaf324999d7c95ecbfc926c3ac4279ca3">01144</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#aaf324999d7c95ecbfc926c3ac4279ca3">m_pca_descriptors_matrix</a>;
<a name="l01145"></a>01145 
<a name="l01146"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a00b20d2ef5bce2e8a8cc1721d2773cc7">01146</a>     <a class="code" href="classcv_1_1_cv_affine_pose.html">CvAffinePose</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a00b20d2ef5bce2e8a8cc1721d2773cc7">m_poses</a>; <span class="comment">// array of poses</span>
<a name="l01147"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a4d4e05e23931686c23feffaeaace51a0">01147</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>** <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a4d4e05e23931686c23feffaeaace51a0">m_transforms</a>; <span class="comment">// array of affine transformations corresponding to poses</span>
<a name="l01148"></a>01148 
<a name="l01149"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#aea6594e34a723ad3104ba31b199123ed">01149</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#aea6594e34a723ad3104ba31b199123ed">m_pca_dim_high</a>;
<a name="l01150"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a0e06db39952fafd529be28966e46192d">01150</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a0e06db39952fafd529be28966e46192d">m_pca_dim_low</a>;
<a name="l01151"></a>01151 
<a name="l01152"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#ac47147854424ef0d5f2d50b63fdb0bd9">01152</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#ac47147854424ef0d5f2d50b63fdb0bd9">m_pyr_levels</a>;
<a name="l01153"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a744f60dfdacd7abc6cea33e0487e417c">01153</a>     <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a744f60dfdacd7abc6cea33e0487e417c">scale_min</a>;
<a name="l01154"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#ad7346ed992afac6d621dc15775076a69">01154</a>     <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#ad7346ed992afac6d621dc15775076a69">scale_max</a>;
<a name="l01155"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a2b234f3bdd485dfda8a80c41ae96417d">01155</a>     <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a2b234f3bdd485dfda8a80c41ae96417d">scale_step</a>;
<a name="l01156"></a>01156 
<a name="l01157"></a>01157     <span class="comment">// SavePCAall: saves PCA components and descriptors to a file storage</span>
<a name="l01158"></a>01158     <span class="comment">// - fs: output file storage</span>
<a name="l01159"></a>01159     <span class="keywordtype">void</span> SavePCAall (<a class="code" href="classcv_1_1_file_storage.html">FileStorage</a> &amp;fs) <span class="keyword">const</span>;
<a name="l01160"></a>01160 
<a name="l01161"></a>01161     <span class="comment">// LoadPCAall: loads PCA components and descriptors from a file node</span>
<a name="l01162"></a>01162     <span class="comment">// - fn: input file node</span>
<a name="l01163"></a>01163     <span class="keywordtype">void</span> LoadPCAall (<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a> &amp;fn);
<a name="l01164"></a>01164 };
<a name="l01165"></a>01165 
<a name="l01166"></a><a class="code" href="classcv_1_1_one_way_descriptor_object.html">01166</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_one_way_descriptor_object.html">OneWayDescriptorObject</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html">OneWayDescriptorBase</a>
<a name="l01167"></a>01167 {
<a name="l01168"></a>01168 <span class="keyword">public</span>:
<a name="l01169"></a>01169     <span class="comment">// creates an instance of OneWayDescriptorObject from a set of training files</span>
<a name="l01170"></a>01170     <span class="comment">// - patch_size: size of the input (large) patch</span>
<a name="l01171"></a>01171     <span class="comment">// - pose_count: the number of poses to generate for each descriptor</span>
<a name="l01172"></a>01172     <span class="comment">// - train_path: path to training files</span>
<a name="l01173"></a>01173     <span class="comment">// - pca_config: the name of the file that contains PCA for small patches (2 times smaller</span>
<a name="l01174"></a>01174     <span class="comment">// than patch_size each dimension</span>
<a name="l01175"></a>01175     <span class="comment">// - pca_hr_config: the name of the file that contains PCA for large patches (of patch_size size)</span>
<a name="l01176"></a>01176     <span class="comment">// - pca_desc_config: the name of the file that contains descriptors of PCA components</span>
<a name="l01177"></a>01177     <a class="code" href="classcv_1_1_one_way_descriptor_object.html">OneWayDescriptorObject</a>(<a class="code" href="struct_cv_size.html">CvSize</a> patch_size, <span class="keywordtype">int</span> pose_count, <span class="keyword">const</span> <span class="keywordtype">char</span>* train_path, <span class="keyword">const</span> <span class="keywordtype">char</span>* pca_config,
<a name="l01178"></a>01178                            <span class="keyword">const</span> <span class="keywordtype">char</span>* pca_hr_config = 0, <span class="keyword">const</span> <span class="keywordtype">char</span>* pca_desc_config = 0, <span class="keywordtype">int</span> pyr_levels = 1);
<a name="l01179"></a>01179 
<a name="l01180"></a>01180     <a class="code" href="classcv_1_1_one_way_descriptor_object.html">OneWayDescriptorObject</a>(<a class="code" href="struct_cv_size.html">CvSize</a> patch_size, <span class="keywordtype">int</span> pose_count, <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;pca_filename,
<a name="l01181"></a>01181                            <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;train_path = <span class="keywordtype">string</span> (), <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;images_list = <span class="keywordtype">string</span> (),
<a name="l01182"></a>01182                            <span class="keywordtype">float</span> _scale_min = 0.7f, <span class="keywordtype">float</span> _scale_max=1.5f, <span class="keywordtype">float</span> _scale_step=1.2f, <span class="keywordtype">int</span> pyr_levels = 1);
<a name="l01183"></a>01183 
<a name="l01184"></a>01184 
<a name="l01185"></a>01185     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_one_way_descriptor_object.html">OneWayDescriptorObject</a>();
<a name="l01186"></a>01186 
<a name="l01187"></a>01187     <span class="comment">// Allocate: allocates memory for a given number of features</span>
<a name="l01188"></a>01188     <span class="comment">// - train_feature_count: the total number of features</span>
<a name="l01189"></a>01189     <span class="comment">// - object_feature_count: the number of features extracted from the object</span>
<a name="l01190"></a>01190     <span class="keywordtype">void</span> Allocate(<span class="keywordtype">int</span> train_feature_count, <span class="keywordtype">int</span> object_feature_count);
<a name="l01191"></a>01191 
<a name="l01192"></a>01192 
<a name="l01193"></a><a class="code" href="classcv_1_1_one_way_descriptor_object.html#adba760a152631d6809d54e6a704e7eb5">01193</a>     <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_one_way_descriptor_object.html#adba760a152631d6809d54e6a704e7eb5">SetLabeledFeatures</a>(<span class="keyword">const</span> vector&lt;cv::KeyPoint&gt;&amp; features) {m_train_features = features;};
<a name="l01194"></a><a class="code" href="classcv_1_1_one_way_descriptor_object.html#a6769b2ba76d72a6636a5a5d9016962c8">01194</a>     vector&lt;cv::KeyPoint&gt;&amp; <a class="code" href="classcv_1_1_one_way_descriptor_object.html#a6769b2ba76d72a6636a5a5d9016962c8">GetLabeledFeatures</a>() {<span class="keywordflow">return</span> m_train_features;};
<a name="l01195"></a><a class="code" href="classcv_1_1_one_way_descriptor_object.html#aa4dbff486cd49aaa5fed894cee251323">01195</a>     <span class="keyword">const</span> vector&lt;cv::KeyPoint&gt;&amp; <a class="code" href="classcv_1_1_one_way_descriptor_object.html#aa4dbff486cd49aaa5fed894cee251323">GetLabeledFeatures</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_train_features;};
<a name="l01196"></a>01196     vector&lt;cv::KeyPoint&gt; _GetLabeledFeatures() <span class="keyword">const</span>;
<a name="l01197"></a>01197 
<a name="l01198"></a>01198     <span class="comment">// IsDescriptorObject: returns 1 if descriptor with specified index is positive, otherwise 0</span>
<a name="l01199"></a>01199     <span class="keywordtype">int</span> IsDescriptorObject(<span class="keywordtype">int</span> desc_idx) <span class="keyword">const</span>;
<a name="l01200"></a>01200 
<a name="l01201"></a>01201     <span class="comment">// MatchPointToPart: returns the part number of a feature if it matches one of the object parts, otherwise -1</span>
<a name="l01202"></a>01202     <span class="keywordtype">int</span> MatchPointToPart(<a class="code" href="struct_cv_point.html">CvPoint</a> pt) <span class="keyword">const</span>;
<a name="l01203"></a>01203 
<a name="l01204"></a>01204     <span class="comment">// GetDescriptorPart: returns the part number of the feature corresponding to a specified descriptor</span>
<a name="l01205"></a>01205     <span class="comment">// - desc_idx: descriptor index</span>
<a name="l01206"></a>01206     <span class="keywordtype">int</span> GetDescriptorPart(<span class="keywordtype">int</span> desc_idx) <span class="keyword">const</span>;
<a name="l01207"></a>01207 
<a name="l01208"></a>01208 
<a name="l01209"></a>01209     <span class="keywordtype">void</span> InitializeObjectDescriptors(<a class="code" href="struct___ipl_image.html">IplImage</a>* train_image, <span class="keyword">const</span> vector&lt;cv::KeyPoint&gt;&amp; features,
<a name="l01210"></a>01210                                      <span class="keyword">const</span> <span class="keywordtype">char</span>* feature_label, <span class="keywordtype">int</span> desc_start_idx = 0, <span class="keywordtype">float</span> <a class="code" href="namespacecv.html#a51a22470a6038d4d737a633730006770">scale</a> = 1.0f,
<a name="l01211"></a>01211                                      <span class="keywordtype">int</span> is_background = 0);
<a name="l01212"></a>01212 
<a name="l01213"></a>01213     <span class="comment">// GetObjectFeatureCount: returns the number of object features</span>
<a name="l01214"></a><a class="code" href="classcv_1_1_one_way_descriptor_object.html#a8b95f117cfdf68b30aa08b0ded2e5543">01214</a>     <span class="keywordtype">int</span> GetObjectFeatureCount()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_object_feature_count;};
<a name="l01215"></a>01215 
<a name="l01216"></a>01216 <span class="keyword">protected</span>:
<a name="l01217"></a>01217     <span class="keywordtype">int</span>* m_part_id; <span class="comment">// contains part id for each of object descriptors</span>
<a name="l01218"></a><a class="code" href="classcv_1_1_one_way_descriptor_object.html#ac9728144b5d747a00cf2a3f127004912">01218</a>     vector&lt;cv::KeyPoint&gt; <a class="code" href="classcv_1_1_one_way_descriptor_object.html#ac9728144b5d747a00cf2a3f127004912">m_train_features</a>; <span class="comment">// train features</span>
<a name="l01219"></a><a class="code" href="classcv_1_1_one_way_descriptor_object.html#a78d83003b52b67a2b886606cad96662f">01219</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_object.html#a78d83003b52b67a2b886606cad96662f">m_object_feature_count</a>; <span class="comment">// the number of the positive features</span>
<a name="l01220"></a>01220 
<a name="l01221"></a>01221 };
<a name="l01222"></a>01222 
<a name="l01223"></a>01223 
<a name="l01224"></a>01224 <span class="comment">/****************************************************************************************\</span>
<a name="l01225"></a>01225 <span class="comment">*                                    FeatureDetector                                     *</span>
<a name="l01226"></a>01226 <span class="comment">\****************************************************************************************/</span>
<a name="l01227"></a>01227 
<a name="l01228"></a>01228 <span class="comment">/*</span>
<a name="l01229"></a>01229 <span class="comment"> * Abstract base class for 2D image feature detectors.</span>
<a name="l01230"></a>01230 <span class="comment"> */</span>
<a name="l01231"></a><a class="code" href="classcv_1_1_feature_detector.html">01231</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01232"></a>01232 {
<a name="l01233"></a>01233 <span class="keyword">public</span>:
<a name="l01234"></a>01234     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>();
<a name="l01235"></a>01235     
<a name="l01236"></a>01236     <span class="comment">/*</span>
<a name="l01237"></a>01237 <span class="comment">     * Detect keypoints in an image.</span>
<a name="l01238"></a>01238 <span class="comment">     * image        The image.</span>
<a name="l01239"></a>01239 <span class="comment">     * keypoints    The detected keypoints.</span>
<a name="l01240"></a>01240 <span class="comment">     * mask         Mask specifying where to look for keypoints (optional). Must be a char</span>
<a name="l01241"></a>01241 <span class="comment">     *              matrix with non-zero values in the region of interest.</span>
<a name="l01242"></a>01242 <span class="comment">     */</span>
<a name="l01243"></a>01243     <span class="keywordtype">void</span> detect( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01244"></a>01244     
<a name="l01245"></a>01245     <span class="comment">/*</span>
<a name="l01246"></a>01246 <span class="comment">     * Detect keypoints in an image set.</span>
<a name="l01247"></a>01247 <span class="comment">     * images       Image collection.</span>
<a name="l01248"></a>01248 <span class="comment">     * keypoints    Collection of keypoints detected in an input images. keypoints[i] is a set of keypoints detected in an images[i].</span>
<a name="l01249"></a>01249 <span class="comment">     * masks        Masks for image set. masks[i] is a mask for images[i].</span>
<a name="l01250"></a>01250 <span class="comment">     */</span>
<a name="l01251"></a>01251     <span class="keywordtype">void</span> detect( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; images, vector&lt;vector&lt;KeyPoint&gt; &gt;&amp; keypoints, <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;() ) <span class="keyword">const</span>;
<a name="l01252"></a>01252 
<a name="l01253"></a>01253     <span class="comment">// Read detector object from a file node.</span>
<a name="l01254"></a>01254     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; );
<a name="l01255"></a>01255     <span class="comment">// Read detector object from a file node.</span>
<a name="l01256"></a>01256     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; ) <span class="keyword">const</span>;
<a name="l01257"></a>01257 
<a name="l01258"></a>01258     <span class="comment">// Create feature detector by detector name.</span>
<a name="l01259"></a>01259     <span class="keyword">static</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;FeatureDetector&gt;</a> create( <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; detectorType );
<a name="l01260"></a>01260 
<a name="l01261"></a>01261 <span class="keyword">protected</span>:
<a name="l01262"></a>01262         <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span> = 0;
<a name="l01263"></a>01263     <span class="comment">/*</span>
<a name="l01264"></a>01264 <span class="comment">     * Remove keypoints that are not in the mask.</span>
<a name="l01265"></a>01265 <span class="comment">     * Helper function, useful when wrapping a library call for keypoint detection that</span>
<a name="l01266"></a>01266 <span class="comment">     * does not support a mask argument.</span>
<a name="l01267"></a>01267 <span class="comment">     */</span>
<a name="l01268"></a>01268     <span class="keyword">static</span> <span class="keywordtype">void</span> removeInvalidPoints( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>, vector&lt;KeyPoint&gt;&amp; keypoints );
<a name="l01269"></a>01269 };
<a name="l01270"></a>01270 
<a name="l01271"></a><a class="code" href="classcv_1_1_fast_feature_detector.html">01271</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_fast_feature_detector.html">FastFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01272"></a>01272 {
<a name="l01273"></a>01273 <span class="keyword">public</span>:
<a name="l01274"></a>01274     <a class="code" href="classcv_1_1_fast_feature_detector.html">FastFeatureDetector</a>( <span class="keywordtype">int</span> <a class="code" href="namespacecv.html#aad4b13bcee0029196e54d61c2f928a12">threshold</a>=10, <span class="keywordtype">bool</span> nonmaxSuppression=<span class="keyword">true</span> );
<a name="l01275"></a>01275     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; fn );
<a name="l01276"></a>01276     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l01277"></a>01277 
<a name="l01278"></a>01278 <span class="keyword">protected</span>:
<a name="l01279"></a>01279         <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01280"></a>01280 
<a name="l01281"></a><a class="code" href="classcv_1_1_fast_feature_detector.html#a978cce91168d388fc111ae14502efb4e">01281</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fast_feature_detector.html#a978cce91168d388fc111ae14502efb4e">threshold</a>;
<a name="l01282"></a><a class="code" href="classcv_1_1_fast_feature_detector.html#a50cec46a5150d352d5dbd806884e7194">01282</a>     <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_fast_feature_detector.html#a50cec46a5150d352d5dbd806884e7194">nonmaxSuppression</a>;
<a name="l01283"></a>01283 };
<a name="l01284"></a>01284 
<a name="l01285"></a>01285 
<a name="l01286"></a><a class="code" href="classcv_1_1_good_features_to_track_detector.html">01286</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_good_features_to_track_detector.html">GoodFeaturesToTrackDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01287"></a>01287 {
<a name="l01288"></a>01288 <span class="keyword">public</span>:
<a name="l01289"></a><a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html">01289</a>     <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html">Params</a>
<a name="l01290"></a>01290     {
<a name="l01291"></a>01291     <span class="keyword">public</span>:
<a name="l01292"></a>01292         <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html">Params</a>( <span class="keywordtype">int</span> maxCorners=1000, <span class="keywordtype">double</span> qualityLevel=0.01, <span class="keywordtype">double</span> minDistance=1.,
<a name="l01293"></a>01293                 <span class="keywordtype">int</span> blockSize=3, <span class="keywordtype">bool</span> useHarrisDetector=<span class="keyword">false</span>, <span class="keywordtype">double</span> k=0.04 );
<a name="l01294"></a>01294         <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; fn );
<a name="l01295"></a>01295         <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l01296"></a>01296 
<a name="l01297"></a><a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#ad027128f892252843b4d8db2a71b58f5">01297</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#ad027128f892252843b4d8db2a71b58f5">maxCorners</a>;
<a name="l01298"></a><a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#a8e2d118033395038d8956aee674b48d3">01298</a>         <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#a8e2d118033395038d8956aee674b48d3">qualityLevel</a>;
<a name="l01299"></a><a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#a15474fec8e4a065419a4700da66f1370">01299</a>         <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#a15474fec8e4a065419a4700da66f1370">minDistance</a>;
<a name="l01300"></a><a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#a0eb1e7725bfc65a6c171366b8979dade">01300</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#a0eb1e7725bfc65a6c171366b8979dade">blockSize</a>;
<a name="l01301"></a><a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#ab91c5eadec3dc5949ec54c1748bded4a">01301</a>         <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#ab91c5eadec3dc5949ec54c1748bded4a">useHarrisDetector</a>;
<a name="l01302"></a><a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#a222bbbf8b4ab9bb0d3ab2c932ee110e5">01302</a>         <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#a222bbbf8b4ab9bb0d3ab2c932ee110e5">k</a>;
<a name="l01303"></a>01303     };
<a name="l01304"></a>01304 
<a name="l01305"></a>01305     <a class="code" href="classcv_1_1_good_features_to_track_detector.html">GoodFeaturesToTrackDetector</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html">GoodFeaturesToTrackDetector::Params</a>&amp; params=<a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html">GoodFeaturesToTrackDetector::Params</a>() );
<a name="l01306"></a>01306     <a class="code" href="classcv_1_1_good_features_to_track_detector.html">GoodFeaturesToTrackDetector</a>( <span class="keywordtype">int</span> maxCorners, <span class="keywordtype">double</span> qualityLevel, <span class="keywordtype">double</span> minDistance,
<a name="l01307"></a>01307                                  <span class="keywordtype">int</span> blockSize=3, <span class="keywordtype">bool</span> useHarrisDetector=<span class="keyword">false</span>, <span class="keywordtype">double</span> k=0.04 );
<a name="l01308"></a>01308     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; fn );
<a name="l01309"></a>01309     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l01310"></a>01310 
<a name="l01311"></a>01311 <span class="keyword">protected</span>:
<a name="l01312"></a>01312         <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01313"></a>01313         
<a name="l01314"></a><a class="code" href="classcv_1_1_good_features_to_track_detector.html#aea688a86ee753820e2680c472556d389">01314</a>         <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html">Params</a> <a class="code" href="classcv_1_1_good_features_to_track_detector.html#aea688a86ee753820e2680c472556d389">params</a>;
<a name="l01315"></a>01315 };
<a name="l01316"></a>01316 
<a name="l01317"></a><a class="code" href="classcv_1_1_mser_feature_detector.html">01317</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_mser_feature_detector.html">MserFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01318"></a>01318 {
<a name="l01319"></a>01319 <span class="keyword">public</span>:
<a name="l01320"></a>01320     <a class="code" href="classcv_1_1_mser_feature_detector.html">MserFeatureDetector</a>( <a class="code" href="struct_cv_m_s_e_r_params.html">CvMSERParams</a> params=<a class="code" href="features2d_8hpp.html#adf4c9462fa087403093de16442ebb9ae">cvMSERParams</a>() );
<a name="l01321"></a>01321     <a class="code" href="classcv_1_1_mser_feature_detector.html">MserFeatureDetector</a>( <span class="keywordtype">int</span> <a class="code" href="namespacecv.html#ae24d37246741581c81cb1f207b107421">delta</a>, <span class="keywordtype">int</span> minArea, <span class="keywordtype">int</span> maxArea, <span class="keywordtype">double</span> maxVariation, <span class="keywordtype">double</span> minDiversity,
<a name="l01322"></a>01322                          <span class="keywordtype">int</span> maxEvolution, <span class="keywordtype">double</span> areaThreshold, <span class="keywordtype">double</span> minMargin, <span class="keywordtype">int</span> edgeBlurSize );
<a name="l01323"></a>01323     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; fn );
<a name="l01324"></a>01324     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l01325"></a>01325 
<a name="l01326"></a>01326 <span class="keyword">protected</span>:
<a name="l01327"></a>01327         <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01328"></a>01328 
<a name="l01329"></a><a class="code" href="classcv_1_1_mser_feature_detector.html#a0eea5a46b66ef10629642bf610c722b1">01329</a>     <a class="code" href="classcv_1_1_m_s_e_r.html">MSER</a> <a class="code" href="classcv_1_1_mser_feature_detector.html#a0eea5a46b66ef10629642bf610c722b1">mser</a>;
<a name="l01330"></a>01330 };
<a name="l01331"></a>01331 
<a name="l01332"></a><a class="code" href="classcv_1_1_star_feature_detector.html">01332</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_star_feature_detector.html">StarFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01333"></a>01333 {
<a name="l01334"></a>01334 <span class="keyword">public</span>:
<a name="l01335"></a>01335     <a class="code" href="classcv_1_1_star_feature_detector.html">StarFeatureDetector</a>( <span class="keyword">const</span> <a class="code" href="struct_cv_star_detector_params.html">CvStarDetectorParams</a>&amp; params=<a class="code" href="features2d_8hpp.html#a06c87c7caa7c4baf9c36a9909f735de3">cvStarDetectorParams</a>() );
<a name="l01336"></a>01336     <a class="code" href="classcv_1_1_star_feature_detector.html">StarFeatureDetector</a>( <span class="keywordtype">int</span> maxSize, <span class="keywordtype">int</span> responseThreshold=30, <span class="keywordtype">int</span> lineThresholdProjected = 10,
<a name="l01337"></a>01337                          <span class="keywordtype">int</span> lineThresholdBinarized=8, <span class="keywordtype">int</span> suppressNonmaxSize=5 );
<a name="l01338"></a>01338     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; fn );
<a name="l01339"></a>01339     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l01340"></a>01340 
<a name="l01341"></a>01341 <span class="keyword">protected</span>:
<a name="l01342"></a>01342         <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01343"></a>01343 
<a name="l01344"></a><a class="code" href="classcv_1_1_star_feature_detector.html#a85926d2ef0e6d32108e49b3ffe5802c5">01344</a>     <a class="code" href="classcv_1_1_star_detector.html">StarDetector</a> <a class="code" href="classcv_1_1_star_feature_detector.html#a85926d2ef0e6d32108e49b3ffe5802c5">star</a>;
<a name="l01345"></a>01345 };
<a name="l01346"></a>01346 
<a name="l01347"></a><a class="code" href="classcv_1_1_sift_feature_detector.html">01347</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_sift_feature_detector.html">SiftFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01348"></a>01348 {
<a name="l01349"></a>01349 <span class="keyword">public</span>:
<a name="l01350"></a>01350     <a class="code" href="classcv_1_1_sift_feature_detector.html">SiftFeatureDetector</a>( <span class="keyword">const</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">SIFT::DetectorParams</a>&amp; detectorParams=<a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">SIFT::DetectorParams</a>(),
<a name="l01351"></a>01351                          <span class="keyword">const</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">SIFT::CommonParams</a>&amp; commonParams=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">SIFT::CommonParams</a>() );
<a name="l01352"></a>01352     <a class="code" href="classcv_1_1_sift_feature_detector.html">SiftFeatureDetector</a>( <span class="keywordtype">double</span> <a class="code" href="namespacecv.html#aad4b13bcee0029196e54d61c2f928a12">threshold</a>, <span class="keywordtype">double</span> edgeThreshold,
<a name="l01353"></a>01353                          <span class="keywordtype">int</span> nOctaves=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a3516d8027be21337d54fa9f342f0de12">SIFT::CommonParams::DEFAULT_NOCTAVES</a>,
<a name="l01354"></a>01354                          <span class="keywordtype">int</span> nOctaveLayers=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#ac5b52d9fb2a3670b2a1e118635997d83">SIFT::CommonParams::DEFAULT_NOCTAVE_LAYERS</a>,
<a name="l01355"></a>01355                          <span class="keywordtype">int</span> firstOctave=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a1c06d5c17c1a277d3ab7331a2e1d6032">SIFT::CommonParams::DEFAULT_FIRST_OCTAVE</a>,
<a name="l01356"></a>01356                          <span class="keywordtype">int</span> angleMode=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a8b7c1636cbc9292dad6415b100b5e190a1c0fbeaa6583f475bcf560370d779071">SIFT::CommonParams::FIRST_ANGLE</a> );
<a name="l01357"></a>01357     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; fn );
<a name="l01358"></a>01358     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l01359"></a>01359 
<a name="l01360"></a>01360 <span class="keyword">protected</span>:
<a name="l01361"></a>01361         <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01362"></a>01362 
<a name="l01363"></a><a class="code" href="classcv_1_1_sift_feature_detector.html#a3e0471cc12671dd72340bab4cc1a761e">01363</a>     <a class="code" href="classcv_1_1_s_i_f_t.html">SIFT</a> <a class="code" href="classcv_1_1_sift_feature_detector.html#a3e0471cc12671dd72340bab4cc1a761e">sift</a>;
<a name="l01364"></a>01364 };
<a name="l01365"></a>01365 
<a name="l01366"></a><a class="code" href="classcv_1_1_surf_feature_detector.html">01366</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_surf_feature_detector.html">SurfFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01367"></a>01367 {
<a name="l01368"></a>01368 <span class="keyword">public</span>:
<a name="l01369"></a>01369     <a class="code" href="classcv_1_1_surf_feature_detector.html">SurfFeatureDetector</a>( <span class="keywordtype">double</span> hessianThreshold=400., <span class="keywordtype">int</span> octaves=3, <span class="keywordtype">int</span> octaveLayers=4 );
<a name="l01370"></a>01370     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; fn );
<a name="l01371"></a>01371     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l01372"></a>01372 
<a name="l01373"></a>01373 <span class="keyword">protected</span>:
<a name="l01374"></a>01374         <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01375"></a>01375 
<a name="l01376"></a><a class="code" href="classcv_1_1_surf_feature_detector.html#a89ab59e1142a0022a7e3a6fbb12b4b28">01376</a>     <a class="code" href="classcv_1_1_s_u_r_f.html">SURF</a> <a class="code" href="classcv_1_1_surf_feature_detector.html#a89ab59e1142a0022a7e3a6fbb12b4b28">surf</a>;
<a name="l01377"></a>01377 };
<a name="l01378"></a>01378 
<a name="l01379"></a><a class="code" href="classcv_1_1_dense_feature_detector.html">01379</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_dense_feature_detector.html">DenseFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01380"></a>01380 {
<a name="l01381"></a>01381 <span class="keyword">public</span>:
<a name="l01382"></a><a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html">01382</a>     <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html">Params</a>
<a name="l01383"></a>01383     {
<a name="l01384"></a>01384     <span class="keyword">public</span>:
<a name="l01385"></a>01385         <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html">Params</a>( <span class="keywordtype">float</span> initFeatureScale=1.f, <span class="keywordtype">int</span> featureScaleLevels=1, <span class="keywordtype">float</span> featureScaleMul=0.1f,
<a name="l01386"></a>01386                 <span class="keywordtype">int</span> initXyStep=6, <span class="keywordtype">int</span> initImgBound=0, <span class="keywordtype">bool</span> varyXyStepWithScale=<span class="keyword">true</span>, <span class="keywordtype">bool</span> varyImgBoundWithScale=<span class="keyword">false</span> );
<a name="l01387"></a><a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a86c39178bf76cf4181c148838086c728">01387</a>         <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a86c39178bf76cf4181c148838086c728">initFeatureScale</a>;
<a name="l01388"></a><a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#aad7916a57b92e63b56a7791794035930">01388</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#aad7916a57b92e63b56a7791794035930">featureScaleLevels</a>;
<a name="l01389"></a><a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a3ce3b18b93ae982de916fb20d132aa4d">01389</a>         <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a3ce3b18b93ae982de916fb20d132aa4d">featureScaleMul</a>;
<a name="l01390"></a>01390 
<a name="l01391"></a><a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a443c1fc19e01285e7c64021d565f4f0c">01391</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a443c1fc19e01285e7c64021d565f4f0c">initXyStep</a>;
<a name="l01392"></a><a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a4b4ea2c07202a772dbb76a3d24351bc7">01392</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a4b4ea2c07202a772dbb76a3d24351bc7">initImgBound</a>;
<a name="l01393"></a>01393 
<a name="l01394"></a><a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a1a9eba1e28d001b03d9c887e19203916">01394</a>         <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a1a9eba1e28d001b03d9c887e19203916">varyXyStepWithScale</a>;
<a name="l01395"></a><a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a5e6a6056a384cba9babd787b94440d62">01395</a>         <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a5e6a6056a384cba9babd787b94440d62">varyImgBoundWithScale</a>;
<a name="l01396"></a>01396     };
<a name="l01397"></a>01397 
<a name="l01398"></a>01398     <a class="code" href="classcv_1_1_dense_feature_detector.html">DenseFeatureDetector</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html">DenseFeatureDetector::Params</a>&amp; params=<a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html">DenseFeatureDetector::Params</a>() );
<a name="l01399"></a>01399     
<a name="l01400"></a>01400         <span class="comment">// TODO implement read/write</span>
<a name="l01401"></a>01401 
<a name="l01402"></a>01402 <span class="keyword">protected</span>:
<a name="l01403"></a>01403         <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01404"></a>01404 
<a name="l01405"></a><a class="code" href="classcv_1_1_dense_feature_detector.html#a5f1e55aad7f7cd6d9aef19d38d063563">01405</a>         <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html">Params</a> <a class="code" href="classcv_1_1_dense_feature_detector.html#a5f1e55aad7f7cd6d9aef19d38d063563">params</a>;
<a name="l01406"></a>01406 };
<a name="l01407"></a>01407 
<a name="l01408"></a>01408 <span class="comment">/*</span>
<a name="l01409"></a>01409 <span class="comment"> * Adapts a detector to partition the source image into a grid and detect</span>
<a name="l01410"></a>01410 <span class="comment"> * points in each cell.</span>
<a name="l01411"></a>01411 <span class="comment"> */</span>
<a name="l01412"></a><a class="code" href="classcv_1_1_grid_adapted_feature_detector.html">01412</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_grid_adapted_feature_detector.html">GridAdaptedFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01413"></a>01413 {
<a name="l01414"></a>01414 <span class="keyword">public</span>:
<a name="l01415"></a>01415     <span class="comment">/*</span>
<a name="l01416"></a>01416 <span class="comment">     * detector            Detector that will be adapted.</span>
<a name="l01417"></a>01417 <span class="comment">     * maxTotalKeypoints   Maximum count of keypoints detected on the image. Only the strongest keypoints</span>
<a name="l01418"></a>01418 <span class="comment">     *                      will be keeped.</span>
<a name="l01419"></a>01419 <span class="comment">     * gridRows            Grid rows count.</span>
<a name="l01420"></a>01420 <span class="comment">     * gridCols            Grid column count.</span>
<a name="l01421"></a>01421 <span class="comment">     */</span>
<a name="l01422"></a>01422     <a class="code" href="classcv_1_1_grid_adapted_feature_detector.html">GridAdaptedFeatureDetector</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;FeatureDetector&gt;</a>&amp; detector, <span class="keywordtype">int</span> maxTotalKeypoints=1000,
<a name="l01423"></a>01423                                 <span class="keywordtype">int</span> gridRows=4, <span class="keywordtype">int</span> gridCols=4 );
<a name="l01424"></a>01424     
<a name="l01425"></a>01425     <span class="comment">// TODO implement read/write</span>
<a name="l01426"></a>01426 
<a name="l01427"></a>01427 <span class="keyword">protected</span>:
<a name="l01428"></a>01428         <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01429"></a>01429 
<a name="l01430"></a><a class="code" href="classcv_1_1_grid_adapted_feature_detector.html#a30cafa69c75c744cb216febeb86bd7a1">01430</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;FeatureDetector&gt;</a> <a class="code" href="classcv_1_1_grid_adapted_feature_detector.html#a30cafa69c75c744cb216febeb86bd7a1">detector</a>;
<a name="l01431"></a><a class="code" href="classcv_1_1_grid_adapted_feature_detector.html#aa586037c5409120481a0f4e63d2678b7">01431</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_grid_adapted_feature_detector.html#aa586037c5409120481a0f4e63d2678b7">maxTotalKeypoints</a>;
<a name="l01432"></a><a class="code" href="classcv_1_1_grid_adapted_feature_detector.html#ac8ecab56cba9ed43779cac09a8ed17b9">01432</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_grid_adapted_feature_detector.html#ac8ecab56cba9ed43779cac09a8ed17b9">gridRows</a>;
<a name="l01433"></a><a class="code" href="classcv_1_1_grid_adapted_feature_detector.html#a0d32b05b162619603619fb040ec9626a">01433</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_grid_adapted_feature_detector.html#a0d32b05b162619603619fb040ec9626a">gridCols</a>;
<a name="l01434"></a>01434 };
<a name="l01435"></a>01435 
<a name="l01436"></a>01436 <span class="comment">/*</span>
<a name="l01437"></a>01437 <span class="comment"> * Adapts a detector to detect points over multiple levels of a Gaussian</span>
<a name="l01438"></a>01438 <span class="comment"> * pyramid. Useful for detectors that are not inherently scaled.</span>
<a name="l01439"></a>01439 <span class="comment"> */</span>
<a name="l01440"></a><a class="code" href="classcv_1_1_pyramid_adapted_feature_detector.html">01440</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_pyramid_adapted_feature_detector.html">PyramidAdaptedFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01441"></a>01441 {
<a name="l01442"></a>01442 <span class="keyword">public</span>:
<a name="l01443"></a>01443     <a class="code" href="classcv_1_1_pyramid_adapted_feature_detector.html">PyramidAdaptedFeatureDetector</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;FeatureDetector&gt;</a>&amp; detector, <span class="keywordtype">int</span> levels=2 );
<a name="l01444"></a>01444     
<a name="l01445"></a>01445     <span class="comment">// TODO implement read/write</span>
<a name="l01446"></a>01446 
<a name="l01447"></a>01447 <span class="keyword">protected</span>:
<a name="l01448"></a>01448         <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01449"></a>01449 
<a name="l01450"></a><a class="code" href="classcv_1_1_pyramid_adapted_feature_detector.html#a32441105c4f15bb94f6f5db452aa74f6">01450</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;FeatureDetector&gt;</a> <a class="code" href="classcv_1_1_pyramid_adapted_feature_detector.html#a32441105c4f15bb94f6f5db452aa74f6">detector</a>;
<a name="l01451"></a><a class="code" href="classcv_1_1_pyramid_adapted_feature_detector.html#a51f331c5477fa1e6ded1b41ab9d990ff">01451</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_pyramid_adapted_feature_detector.html#a51f331c5477fa1e6ded1b41ab9d990ff">levels</a>;
<a name="l01452"></a>01452 };
<a name="l01453"></a>01453 
<a name="l01457"></a><a class="code" href="classcv_1_1_adjuster_adapter.html">01457</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_adjuster_adapter.html" title="A feature detector parameter adjuster, this is used by the DynamicAdaptedFeatureDetector and is a wra...">AdjusterAdapter</a>: <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01458"></a>01458 {
<a name="l01459"></a>01459 <span class="keyword">public</span>:   
<a name="l01462"></a><a class="code" href="classcv_1_1_adjuster_adapter.html#a8c88f42045cd23746062c2789e2e703c">01462</a>     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_adjuster_adapter.html#a8c88f42045cd23746062c2789e2e703c">~AdjusterAdapter</a>() {}
<a name="l01467"></a>01467         <span class="keyword">virtual</span> <span class="keywordtype">void</span> tooFew(<span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a0bdeb3ee8259d5df4655f38d41099070" title="computes per-element minimum of two arrays (dst = min(src1, src2))">min</a>, <span class="keywordtype">int</span> n_detected) = 0;
<a name="l01472"></a>01472         <span class="keyword">virtual</span> <span class="keywordtype">void</span> tooMany(<span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a57416e28468db6ec3f09e4a133a2c224" title="computes per-element maximum of two arrays (dst = max(src1, src2))">max</a>, <span class="keywordtype">int</span> n_detected) = 0;
<a name="l01476"></a>01476         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> good() <span class="keyword">const</span> = 0;
<a name="l01477"></a>01477 
<a name="l01478"></a>01478     <span class="keyword">static</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;AdjusterAdapter&gt;</a> create( <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; detectorType );
<a name="l01479"></a>01479 };
<a name="l01492"></a><a class="code" href="classcv_1_1_dynamic_adapted_feature_detector.html">01492</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_dynamic_adapted_feature_detector.html" title="an adaptively adjusting detector that iteratively detects until the desired number of features are de...">DynamicAdaptedFeatureDetector</a>: <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01493"></a>01493 {
<a name="l01494"></a>01494 <span class="keyword">public</span>:
<a name="l01495"></a>01495 
<a name="l01502"></a>01502     <a class="code" href="classcv_1_1_dynamic_adapted_feature_detector.html" title="an adaptively adjusting detector that iteratively detects until the desired number of features are de...">DynamicAdaptedFeatureDetector</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;AdjusterAdapter&gt;</a>&amp; adjaster, <span class="keywordtype">int</span> min_features=400, <span class="keywordtype">int</span> max_features=500, <span class="keywordtype">int</span> max_iters=5 );
<a name="l01503"></a>01503 
<a name="l01504"></a>01504 <span class="keyword">protected</span>:
<a name="l01505"></a>01505     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01506"></a>01506 
<a name="l01507"></a>01507 <span class="keyword">private</span>:
<a name="l01508"></a>01508         <span class="keywordtype">int</span> escape_iters_;
<a name="l01509"></a>01509         <span class="keywordtype">int</span> min_features_, max_features_;
<a name="l01510"></a>01510         <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;AdjusterAdapter&gt;</a> adjuster_;
<a name="l01511"></a>01511 };
<a name="l01512"></a>01512 
<a name="l01516"></a><a class="code" href="classcv_1_1_fast_adjuster.html">01516</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_fast_adjuster.html" title="an adjust for the FAST detector. This will basically decrement or increment the threshhold by 1...">FastAdjuster</a>: <span class="keyword">public</span> <a class="code" href="classcv_1_1_adjuster_adapter.html" title="A feature detector parameter adjuster, this is used by the DynamicAdaptedFeatureDetector and is a wra...">AdjusterAdapter</a>
<a name="l01517"></a>01517 {
<a name="l01518"></a>01518 <span class="keyword">public</span>:
<a name="l01522"></a>01522         <a class="code" href="classcv_1_1_fast_adjuster.html" title="an adjust for the FAST detector. This will basically decrement or increment the threshhold by 1...">FastAdjuster</a>(<span class="keywordtype">int</span> init_thresh = 20, <span class="keywordtype">bool</span> nonmax = <span class="keyword">true</span>);
<a name="l01523"></a>01523         <span class="keyword">virtual</span> <span class="keywordtype">void</span> tooFew(<span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a0bdeb3ee8259d5df4655f38d41099070" title="computes per-element minimum of two arrays (dst = min(src1, src2))">min</a>, <span class="keywordtype">int</span> n_detected);
<a name="l01524"></a>01524         <span class="keyword">virtual</span> <span class="keywordtype">void</span> tooMany(<span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a57416e28468db6ec3f09e4a133a2c224" title="computes per-element maximum of two arrays (dst = max(src1, src2))">max</a>, <span class="keywordtype">int</span> n_detected);
<a name="l01525"></a>01525         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> good() <span class="keyword">const</span>;
<a name="l01526"></a>01526 
<a name="l01527"></a>01527 <span class="keyword">protected</span>:
<a name="l01528"></a>01528     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01529"></a>01529 
<a name="l01530"></a><a class="code" href="classcv_1_1_fast_adjuster.html#aea9674010803f5b60d12aabd4257a159">01530</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fast_adjuster.html#aea9674010803f5b60d12aabd4257a159">thresh_</a>;
<a name="l01531"></a><a class="code" href="classcv_1_1_fast_adjuster.html#ae57d82468fc8b29e27ad98f75ecda024">01531</a>         <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_fast_adjuster.html#ae57d82468fc8b29e27ad98f75ecda024">nonmax_</a>;
<a name="l01532"></a>01532 };
<a name="l01533"></a>01533 
<a name="l01534"></a>01534 
<a name="l01538"></a><a class="code" href="classcv_1_1_star_adjuster.html">01538</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_star_adjuster.html">StarAdjuster</a>: <span class="keyword">public</span> <a class="code" href="classcv_1_1_adjuster_adapter.html" title="A feature detector parameter adjuster, this is used by the DynamicAdaptedFeatureDetector and is a wra...">AdjusterAdapter</a>
<a name="l01539"></a>01539 {
<a name="l01540"></a>01540 <span class="keyword">public</span>:
<a name="l01541"></a>01541         <a class="code" href="classcv_1_1_star_adjuster.html">StarAdjuster</a>(<span class="keywordtype">double</span> initial_thresh = 30.0);
<a name="l01542"></a>01542         <span class="keyword">virtual</span> <span class="keywordtype">void</span> tooFew(<span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a0bdeb3ee8259d5df4655f38d41099070" title="computes per-element minimum of two arrays (dst = min(src1, src2))">min</a>, <span class="keywordtype">int</span> n_detected);
<a name="l01543"></a>01543         <span class="keyword">virtual</span> <span class="keywordtype">void</span> tooMany(<span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a57416e28468db6ec3f09e4a133a2c224" title="computes per-element maximum of two arrays (dst = max(src1, src2))">max</a>, <span class="keywordtype">int</span> n_detected);
<a name="l01544"></a>01544         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> good() <span class="keyword">const</span>;
<a name="l01545"></a>01545 
<a name="l01546"></a>01546 <span class="keyword">protected</span>:
<a name="l01547"></a>01547     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01548"></a>01548 
<a name="l01549"></a><a class="code" href="classcv_1_1_star_adjuster.html#a5d52f000854a09f784ff895a9ca7a891">01549</a>         <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_star_adjuster.html#a5d52f000854a09f784ff895a9ca7a891">thresh_</a>;
<a name="l01550"></a><a class="code" href="classcv_1_1_star_adjuster.html#a81b9686502fdf8ffe9ac9a95282c663b">01550</a>         <a class="code" href="struct_cv_star_detector_params.html">CvStarDetectorParams</a> <a class="code" href="classcv_1_1_star_adjuster.html#a81b9686502fdf8ffe9ac9a95282c663b">params_</a>; <span class="comment">//todo use these instead of thresh_</span>
<a name="l01551"></a>01551 };
<a name="l01552"></a>01552 
<a name="l01553"></a><a class="code" href="classcv_1_1_surf_adjuster.html">01553</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_surf_adjuster.html">SurfAdjuster</a>: <span class="keyword">public</span> <a class="code" href="classcv_1_1_adjuster_adapter.html" title="A feature detector parameter adjuster, this is used by the DynamicAdaptedFeatureDetector and is a wra...">AdjusterAdapter</a>
<a name="l01554"></a>01554 {
<a name="l01555"></a>01555 <span class="keyword">public</span>:
<a name="l01556"></a>01556     <a class="code" href="classcv_1_1_surf_adjuster.html">SurfAdjuster</a>();
<a name="l01557"></a>01557         <span class="keyword">virtual</span> <span class="keywordtype">void</span> tooFew(<span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a0bdeb3ee8259d5df4655f38d41099070" title="computes per-element minimum of two arrays (dst = min(src1, src2))">min</a>, <span class="keywordtype">int</span> n_detected);
<a name="l01558"></a>01558         <span class="keyword">virtual</span> <span class="keywordtype">void</span> tooMany(<span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a57416e28468db6ec3f09e4a133a2c224" title="computes per-element maximum of two arrays (dst = max(src1, src2))">max</a>, <span class="keywordtype">int</span> n_detected);
<a name="l01559"></a>01559         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> good() <span class="keyword">const</span>;
<a name="l01560"></a>01560 
<a name="l01561"></a>01561 <span class="keyword">protected</span>:
<a name="l01562"></a>01562     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01563"></a>01563 
<a name="l01564"></a><a class="code" href="classcv_1_1_surf_adjuster.html#a638296c960483f151853fb39045c2d5a">01564</a>         <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_surf_adjuster.html#a638296c960483f151853fb39045c2d5a">thresh_</a>;
<a name="l01565"></a>01565 };
<a name="l01566"></a>01566 
<a name="l01567"></a>01567 <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_mat.html">Mat</a> <a class="code" href="namespacecv.html#a6c62029d6d525266e3bbe9599cb13294">windowedMatchingMask</a>( <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints1, <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints2,
<a name="l01568"></a>01568                                      <span class="keywordtype">float</span> maxDeltaX, <span class="keywordtype">float</span> maxDeltaY );
<a name="l01569"></a>01569 
<a name="l01570"></a>01570 <span class="comment">/****************************************************************************************\</span>
<a name="l01571"></a>01571 <span class="comment">*                                 DescriptorExtractor                                    *</span>
<a name="l01572"></a>01572 <span class="comment">\****************************************************************************************/</span>
<a name="l01573"></a>01573 
<a name="l01574"></a>01574 <span class="comment">/*</span>
<a name="l01575"></a>01575 <span class="comment"> * Abstract base class for computing descriptors for image keypoints.</span>
<a name="l01576"></a>01576 <span class="comment"> *</span>
<a name="l01577"></a>01577 <span class="comment"> * In this interface we assume a keypoint descriptor can be represented as a</span>
<a name="l01578"></a>01578 <span class="comment"> * dense, fixed-dimensional vector of some basic type. Most descriptors used</span>
<a name="l01579"></a>01579 <span class="comment"> * in practice follow this pattern, as it makes it very easy to compute</span>
<a name="l01580"></a>01580 <span class="comment"> * distances between descriptors. Therefore we represent a collection of</span>
<a name="l01581"></a>01581 <span class="comment"> * descriptors as a cv::Mat, where each row is one keypoint descriptor.</span>
<a name="l01582"></a>01582 <span class="comment"> */</span>
<a name="l01583"></a><a class="code" href="classcv_1_1_descriptor_extractor.html">01583</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_descriptor_extractor.html">DescriptorExtractor</a>
<a name="l01584"></a>01584 {
<a name="l01585"></a>01585 <span class="keyword">public</span>:
<a name="l01586"></a>01586     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_descriptor_extractor.html">DescriptorExtractor</a>();
<a name="l01587"></a>01587 
<a name="l01588"></a>01588     <span class="comment">/*</span>
<a name="l01589"></a>01589 <span class="comment">     * Compute the descriptors for a set of keypoints in an image.</span>
<a name="l01590"></a>01590 <span class="comment">     * image        The image.</span>
<a name="l01591"></a>01591 <span class="comment">     * keypoints    The input keypoints. Keypoints for which a descriptor cannot be computed are removed.</span>
<a name="l01592"></a>01592 <span class="comment">     * descriptors  Copmputed descriptors. Row i is the descriptor for keypoint i.</span>
<a name="l01593"></a>01593 <span class="comment">     */</span>
<a name="l01594"></a>01594     <span class="keywordtype">void</span> compute( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; descriptors ) <span class="keyword">const</span>;
<a name="l01595"></a>01595 
<a name="l01596"></a>01596     <span class="comment">/*</span>
<a name="l01597"></a>01597 <span class="comment">     * Compute the descriptors for a keypoints collection detected in image collection.</span>
<a name="l01598"></a>01598 <span class="comment">     * images       Image collection.</span>
<a name="l01599"></a>01599 <span class="comment">     * keypoints    Input keypoints collection. keypoints[i] is keypoints detected in images[i].</span>
<a name="l01600"></a>01600 <span class="comment">     *              Keypoints for which a descriptor cannot be computed are removed.</span>
<a name="l01601"></a>01601 <span class="comment">     * descriptors  Descriptor collection. descriptors[i] are descriptors computed for set keypoints[i].</span>
<a name="l01602"></a>01602 <span class="comment">     */</span>
<a name="l01603"></a>01603     <span class="keywordtype">void</span> compute( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; images, vector&lt;vector&lt;KeyPoint&gt; &gt;&amp; keypoints, vector&lt;Mat&gt;&amp; descriptors ) <span class="keyword">const</span>;
<a name="l01604"></a>01604 
<a name="l01605"></a>01605     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; );
<a name="l01606"></a>01606     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; ) <span class="keyword">const</span>;
<a name="l01607"></a>01607 
<a name="l01608"></a>01608     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span> = 0;
<a name="l01609"></a>01609     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorType() <span class="keyword">const</span> = 0;
<a name="l01610"></a>01610 
<a name="l01611"></a>01611     <span class="keyword">static</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorExtractor&gt;</a> create( <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; descriptorExtractorType );
<a name="l01612"></a>01612 
<a name="l01613"></a>01613 <span class="keyword">protected</span>:
<a name="l01614"></a>01614         <span class="keyword">virtual</span> <span class="keywordtype">void</span> computeImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; descriptors ) <span class="keyword">const</span> = 0;
<a name="l01615"></a>01615 
<a name="l01616"></a>01616     <span class="comment">/*</span>
<a name="l01617"></a>01617 <span class="comment">     * Remove keypoints within borderPixels of an image edge.</span>
<a name="l01618"></a>01618 <span class="comment">     */</span>
<a name="l01619"></a>01619     <span class="keyword">static</span> <span class="keywordtype">void</span> removeBorderKeypoints( vector&lt;KeyPoint&gt;&amp; keypoints,
<a name="l01620"></a>01620                                        <a class="code" href="classcv_1_1_size__.html">Size</a> imageSize, <span class="keywordtype">int</span> borderSize );
<a name="l01621"></a>01621 };
<a name="l01622"></a>01622 
<a name="l01623"></a>01623 <span class="comment">/*</span>
<a name="l01624"></a>01624 <span class="comment"> * SiftDescriptorExtractor</span>
<a name="l01625"></a>01625 <span class="comment"> */</span>
<a name="l01626"></a><a class="code" href="classcv_1_1_sift_descriptor_extractor.html">01626</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_sift_descriptor_extractor.html">SiftDescriptorExtractor</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_descriptor_extractor.html">DescriptorExtractor</a>
<a name="l01627"></a>01627 {
<a name="l01628"></a>01628 <span class="keyword">public</span>:
<a name="l01629"></a>01629     <a class="code" href="classcv_1_1_sift_descriptor_extractor.html">SiftDescriptorExtractor</a>( <span class="keyword">const</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">SIFT::DescriptorParams</a>&amp; descriptorParams=<a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">SIFT::DescriptorParams</a>(),
<a name="l01630"></a>01630                              <span class="keyword">const</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">SIFT::CommonParams</a>&amp; commonParams=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">SIFT::CommonParams</a>() );
<a name="l01631"></a>01631     <a class="code" href="classcv_1_1_sift_descriptor_extractor.html">SiftDescriptorExtractor</a>( <span class="keywordtype">double</span> magnification, <span class="keywordtype">bool</span> isNormalize=<span class="keyword">true</span>, <span class="keywordtype">bool</span> recalculateAngles=<span class="keyword">true</span>,
<a name="l01632"></a>01632                              <span class="keywordtype">int</span> nOctaves=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a3516d8027be21337d54fa9f342f0de12">SIFT::CommonParams::DEFAULT_NOCTAVES</a>,
<a name="l01633"></a>01633                              <span class="keywordtype">int</span> nOctaveLayers=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#ac5b52d9fb2a3670b2a1e118635997d83">SIFT::CommonParams::DEFAULT_NOCTAVE_LAYERS</a>,
<a name="l01634"></a>01634                              <span class="keywordtype">int</span> firstOctave=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a1c06d5c17c1a277d3ab7331a2e1d6032">SIFT::CommonParams::DEFAULT_FIRST_OCTAVE</a>,
<a name="l01635"></a>01635                              <span class="keywordtype">int</span> angleMode=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a8b7c1636cbc9292dad6415b100b5e190a1c0fbeaa6583f475bcf560370d779071">SIFT::CommonParams::FIRST_ANGLE</a> );
<a name="l01636"></a>01636 
<a name="l01637"></a>01637     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a> &amp;fn );
<a name="l01638"></a>01638     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a> &amp;fs ) <span class="keyword">const</span>;
<a name="l01639"></a>01639 
<a name="l01640"></a>01640     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span>;
<a name="l01641"></a>01641     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorType() <span class="keyword">const</span>;
<a name="l01642"></a>01642 
<a name="l01643"></a>01643 <span class="keyword">protected</span>:
<a name="l01644"></a>01644         <span class="keyword">virtual</span> <span class="keywordtype">void</span> computeImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; descriptors ) <span class="keyword">const</span>;
<a name="l01645"></a>01645     
<a name="l01646"></a><a class="code" href="classcv_1_1_sift_descriptor_extractor.html#a6cb2456998b6d08cc412901c1509e5bb">01646</a>     <a class="code" href="classcv_1_1_s_i_f_t.html">SIFT</a> <a class="code" href="classcv_1_1_sift_descriptor_extractor.html#a6cb2456998b6d08cc412901c1509e5bb">sift</a>;
<a name="l01647"></a>01647 };
<a name="l01648"></a>01648 
<a name="l01649"></a>01649 <span class="comment">/*</span>
<a name="l01650"></a>01650 <span class="comment"> * SurfDescriptorExtractor</span>
<a name="l01651"></a>01651 <span class="comment"> */</span>
<a name="l01652"></a><a class="code" href="classcv_1_1_surf_descriptor_extractor.html">01652</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_surf_descriptor_extractor.html">SurfDescriptorExtractor</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_descriptor_extractor.html">DescriptorExtractor</a>
<a name="l01653"></a>01653 {
<a name="l01654"></a>01654 <span class="keyword">public</span>:
<a name="l01655"></a>01655     <a class="code" href="classcv_1_1_surf_descriptor_extractor.html">SurfDescriptorExtractor</a>( <span class="keywordtype">int</span> nOctaves=4, <span class="keywordtype">int</span> nOctaveLayers=2, <span class="keywordtype">bool</span> extended=<span class="keyword">false</span> );
<a name="l01656"></a>01656 
<a name="l01657"></a>01657     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a> &amp;fn );
<a name="l01658"></a>01658     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a> &amp;fs ) <span class="keyword">const</span>;
<a name="l01659"></a>01659 
<a name="l01660"></a>01660     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span>;
<a name="l01661"></a>01661     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorType() <span class="keyword">const</span>;
<a name="l01662"></a>01662 
<a name="l01663"></a>01663 <span class="keyword">protected</span>:
<a name="l01664"></a>01664         <span class="keyword">virtual</span> <span class="keywordtype">void</span> computeImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; descriptors ) <span class="keyword">const</span>;
<a name="l01665"></a>01665 
<a name="l01666"></a><a class="code" href="classcv_1_1_surf_descriptor_extractor.html#a064c1e780fbfbf0d407ffc74aee42944">01666</a>     <a class="code" href="classcv_1_1_s_u_r_f.html">SURF</a> <a class="code" href="classcv_1_1_surf_descriptor_extractor.html#a064c1e780fbfbf0d407ffc74aee42944">surf</a>;
<a name="l01667"></a>01667 };
<a name="l01668"></a>01668 
<a name="l01669"></a>01669 <span class="comment">/*</span>
<a name="l01670"></a>01670 <span class="comment"> * CalonderDescriptorExtractor</span>
<a name="l01671"></a>01671 <span class="comment"> */</span>
<a name="l01672"></a>01672 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l01673"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html">01673</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_calonder_descriptor_extractor.html">CalonderDescriptorExtractor</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_descriptor_extractor.html">DescriptorExtractor</a>
<a name="l01674"></a>01674 {
<a name="l01675"></a>01675 <span class="keyword">public</span>:
<a name="l01676"></a>01676     <a class="code" href="classcv_1_1_calonder_descriptor_extractor.html">CalonderDescriptorExtractor</a>( <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; classifierFile );
<a name="l01677"></a>01677 
<a name="l01678"></a>01678     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a> &amp;fn );
<a name="l01679"></a>01679     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a> &amp;fs ) <span class="keyword">const</span>;
<a name="l01680"></a>01680 
<a name="l01681"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#ab5a95030baf12190630fea5853898188">01681</a>     <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#ab5a95030baf12190630fea5853898188">descriptorSize</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> classifier_.classes(); }
<a name="l01682"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#abef1e377e15c604de3027281957254d4">01682</a>     <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#abef1e377e15c604de3027281957254d4">descriptorType</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classcv_1_1_data_type.html">DataType&lt;T&gt;::type</a>; }
<a name="l01683"></a>01683 
<a name="l01684"></a>01684 <span class="keyword">protected</span>:
<a name="l01685"></a>01685         <span class="keyword">virtual</span> <span class="keywordtype">void</span> computeImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; descriptors ) <span class="keyword">const</span>;
<a name="l01686"></a>01686 
<a name="l01687"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#a2ebb39dcbe82e7a5eb2f85e2c7300c55">01687</a>     <a class="code" href="classcv_1_1_r_tree_classifier.html">RTreeClassifier</a> <a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#a2ebb39dcbe82e7a5eb2f85e2c7300c55">classifier_</a>;
<a name="l01688"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#a2fe16a49d8fcfc8ee063d64d354204ee">01688</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> BORDER_SIZE = 16;
<a name="l01689"></a>01689 };
<a name="l01690"></a>01690 
<a name="l01691"></a>01691 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l01692"></a>01692 <a class="code" href="classcv_1_1_calonder_descriptor_extractor.html">CalonderDescriptorExtractor&lt;T&gt;::CalonderDescriptorExtractor</a>(<span class="keyword">const</span> std::string&amp; classifier_file)
<a name="l01693"></a>01693 {
<a name="l01694"></a>01694     classifier_.<a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#a68ee8ab88dabeeca169137848ca9f25b">read</a>( classifier_file.c_str() );
<a name="l01695"></a>01695 }
<a name="l01696"></a>01696 
<a name="l01697"></a>01697 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l01698"></a>01698 <span class="keywordtype">void</span> CalonderDescriptorExtractor&lt;T&gt;::computeImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">cv::Mat</a>&amp; image,
<a name="l01699"></a>01699                                               std::vector&lt;cv::KeyPoint&gt;&amp; keypoints,
<a name="l01700"></a>01700                                               <a class="code" href="classcv_1_1_mat.html">cv::Mat</a>&amp; descriptors)<span class="keyword"> const</span>
<a name="l01701"></a>01701 <span class="keyword"></span>{
<a name="l01702"></a>01702     <span class="comment">// Cannot compute descriptors for keypoints on the image border.</span>
<a name="l01703"></a>01703     removeBorderKeypoints(keypoints, image.<a class="code" href="classcv_1_1_mat.html#a5500ed91b9300d78a62528c4f7bf1869">size</a>(), BORDER_SIZE);
<a name="l01704"></a>01704 
<a name="l01706"></a>01706     descriptors.<a class="code" href="classcv_1_1_mat.html#aef6575da9c9d0286c4687d6ddbb00788" title="allocates new matrix data unless the matrix already has specified size and type.">create</a>(keypoints.size(), classifier_.classes(), <a class="code" href="classcv_1_1_data_type.html">cv::DataType&lt;T&gt;::type</a>);
<a name="l01707"></a>01707 
<a name="l01708"></a>01708     <span class="keywordtype">int</span> patchSize = <a class="code" href="classcv_1_1_randomized_tree.html#ad3a9c3171db3e1e0c95bdcce58335825">RandomizedTree::PATCH_SIZE</a>;
<a name="l01709"></a>01709     <span class="keywordtype">int</span> offset = patchSize / 2;
<a name="l01710"></a>01710     <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; keypoints.size(); ++i)
<a name="l01711"></a>01711     {
<a name="l01712"></a>01712         <a class="code" href="classcv_1_1_point__.html">cv::Point2f</a> pt = keypoints[i].pt;
<a name="l01713"></a>01713         <a class="code" href="struct___ipl_image.html">IplImage</a> ipl = image( <a class="code" href="namespacecv.html#a954f5c2ab7c3f0f5d4eed444cdabf038">Rect</a>((<span class="keywordtype">int</span>)(pt.<a class="code" href="classcv_1_1_point__.html#a4c96fa7bdbfe390be5ed356edb274ff3">x</a> - offset), (<span class="keywordtype">int</span>)(pt.<a class="code" href="classcv_1_1_point__.html#a157337197338ff199e5df1a393022f15">y</a> - offset), patchSize, patchSize) );
<a name="l01714"></a>01714         classifier_.getSignature( &amp;ipl, descriptors.<a class="code" href="classcv_1_1_mat.html#a04e52e996208b33202e66e29db2843ee" title="returns pointer to i0-th submatrix along the dimension #0">ptr</a>&lt;T&gt;(i));
<a name="l01715"></a>01715     }
<a name="l01716"></a>01716 }
<a name="l01717"></a>01717 
<a name="l01718"></a>01718 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l01719"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#a68ee8ab88dabeeca169137848ca9f25b">01719</a> <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_calonder_descriptor_extractor.html">CalonderDescriptorExtractor&lt;T&gt;::read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; )
<a name="l01720"></a>01720 {}
<a name="l01721"></a>01721 
<a name="l01722"></a>01722 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l01723"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#acaf9d180b75860622f5348ac17014c87">01723</a> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">CalonderDescriptorExtractor&lt;T&gt;::write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; )<span class="keyword"> const</span>
<a name="l01724"></a>01724 <span class="keyword"></span>{}
<a name="l01725"></a>01725 
<a name="l01726"></a>01726 <span class="comment">/*</span>
<a name="l01727"></a>01727 <span class="comment"> * OpponentColorDescriptorExtractor</span>
<a name="l01728"></a>01728 <span class="comment"> *</span>
<a name="l01729"></a>01729 <span class="comment"> * Adapts a descriptor extractor to compute descripors in Opponent Color Space</span>
<a name="l01730"></a>01730 <span class="comment"> * (refer to van de Sande et al., CGIV 2008 &quot;Color Descriptors for Object Category Recognition&quot;).</span>
<a name="l01731"></a>01731 <span class="comment"> * Input RGB image is transformed in Opponent Color Space. Then unadapted descriptor extractor</span>
<a name="l01732"></a>01732 <span class="comment"> * (set in constructor) computes descriptors on each of the three channel and concatenate</span>
<a name="l01733"></a>01733 <span class="comment"> * them into a single color descriptor.</span>
<a name="l01734"></a>01734 <span class="comment"> */</span>
<a name="l01735"></a><a class="code" href="classcv_1_1_opponent_color_descriptor_extractor.html">01735</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_opponent_color_descriptor_extractor.html">OpponentColorDescriptorExtractor</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_descriptor_extractor.html">DescriptorExtractor</a>
<a name="l01736"></a>01736 {
<a name="l01737"></a>01737 <span class="keyword">public</span>:
<a name="l01738"></a>01738     <a class="code" href="classcv_1_1_opponent_color_descriptor_extractor.html">OpponentColorDescriptorExtractor</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorExtractor&gt;</a>&amp; descriptorExtractor );
<a name="l01739"></a>01739 
<a name="l01740"></a>01740     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; );
<a name="l01741"></a>01741     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; ) <span class="keyword">const</span>;
<a name="l01742"></a>01742 
<a name="l01743"></a>01743     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span>;
<a name="l01744"></a>01744     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorType() <span class="keyword">const</span>;
<a name="l01745"></a>01745 
<a name="l01746"></a>01746 <span class="keyword">protected</span>:
<a name="l01747"></a>01747         <span class="keyword">virtual</span> <span class="keywordtype">void</span> computeImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; descriptors ) <span class="keyword">const</span>;
<a name="l01748"></a>01748 
<a name="l01749"></a><a class="code" href="classcv_1_1_opponent_color_descriptor_extractor.html#a0f6b54b3ff30cb30421f893349a7a7fd">01749</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorExtractor&gt;</a> <a class="code" href="classcv_1_1_opponent_color_descriptor_extractor.html#a0f6b54b3ff30cb30421f893349a7a7fd">descriptorExtractor</a>;
<a name="l01750"></a>01750 };
<a name="l01751"></a>01751 
<a name="l01752"></a>01752 <span class="comment">/*</span>
<a name="l01753"></a>01753 <span class="comment"> * BRIEF Descriptor</span>
<a name="l01754"></a>01754 <span class="comment"> */</span>
<a name="l01755"></a><a class="code" href="classcv_1_1_brief_descriptor_extractor.html">01755</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_brief_descriptor_extractor.html">BriefDescriptorExtractor</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_descriptor_extractor.html">DescriptorExtractor</a>
<a name="l01756"></a>01756 {
<a name="l01757"></a>01757 <span class="keyword">public</span>:
<a name="l01758"></a><a class="code" href="classcv_1_1_brief_descriptor_extractor.html#ab7f40648efa68f2149537234fa06e259">01758</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> PATCH_SIZE = 48;
<a name="l01759"></a><a class="code" href="classcv_1_1_brief_descriptor_extractor.html#ac7e2cbba76a5629cbc679e30d8bce066">01759</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> KERNEL_SIZE = 9;
<a name="l01760"></a>01760 
<a name="l01761"></a>01761     <span class="comment">// bytes is a length of descriptor in bytes. It can be equal 16, 32 or 64 bytes.</span>
<a name="l01762"></a>01762     <a class="code" href="classcv_1_1_brief_descriptor_extractor.html">BriefDescriptorExtractor</a>( <span class="keywordtype">int</span> bytes = 32 );
<a name="l01763"></a>01763 
<a name="l01764"></a>01764     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span>;
<a name="l01765"></a>01765     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorType() <span class="keyword">const</span>;
<a name="l01766"></a>01766 
<a name="l01768"></a>01768 
<a name="l01769"></a>01769 <span class="keyword">protected</span>:
<a name="l01770"></a>01770         <span class="keyword">virtual</span> <span class="keywordtype">void</span> computeImpl(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, std::vector&lt;KeyPoint&gt;&amp; keypoints, <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; descriptors) <span class="keyword">const</span>;
<a name="l01771"></a>01771 
<a name="l01772"></a><a class="code" href="classcv_1_1_brief_descriptor_extractor.html#afd69be5c687b86ed11e3c8de42e6c359">01772</a>     <span class="keyword">typedef</span> <a class="code" href="background__segm_8hpp.html#a8bb47f092d473522721002c86c13b94e">void</a>(*PixelTestFn)(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp;, <span class="keyword">const</span> std::vector&lt;KeyPoint&gt;&amp;, <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp;);
<a name="l01773"></a>01773 
<a name="l01774"></a><a class="code" href="classcv_1_1_brief_descriptor_extractor.html#a396e2541b0053129079754ec8141742a">01774</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_brief_descriptor_extractor.html#a396e2541b0053129079754ec8141742a">bytes_</a>;
<a name="l01775"></a><a class="code" href="classcv_1_1_brief_descriptor_extractor.html#a9d5d477c9bc4f616038ba4192524d771">01775</a>     PixelTestFn <a class="code" href="classcv_1_1_brief_descriptor_extractor.html#a9d5d477c9bc4f616038ba4192524d771">test_fn_</a>;
<a name="l01776"></a>01776 };
<a name="l01777"></a>01777 
<a name="l01778"></a>01778 <span class="comment">/****************************************************************************************\</span>
<a name="l01779"></a>01779 <span class="comment">*                                          Distance                                      *</span>
<a name="l01780"></a>01780 <span class="comment">\****************************************************************************************/</span>
<a name="l01781"></a>01781 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l01782"></a><a class="code" href="structcv_1_1_accumulator.html">01782</a> <span class="keyword">struct </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="structcv_1_1_accumulator.html">Accumulator</a>
<a name="l01783"></a>01783 {
<a name="l01784"></a><a class="code" href="structcv_1_1_accumulator.html#ad5bc00e84ea9780e0194fafdf2a95cbb">01784</a>     <span class="keyword">typedef</span> T <a class="code" href="structcv_1_1_accumulator.html#ad5bc00e84ea9780e0194fafdf2a95cbb">Type</a>;
<a name="l01785"></a>01785 };
<a name="l01786"></a>01786 
<a name="l01787"></a><a class="code" href="structcv_1_1_accumulator_3_01unsigned_01char_01_4.html#a56e36b86fad200b8ae19c219574a1ac2">01787</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1_accumulator.html">Accumulator</a>&lt;unsigned char&gt;  { <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_accumulator_3_01unsigned_01char_01_4.html#a56e36b86fad200b8ae19c219574a1ac2">Type</a>; };
<a name="l01788"></a><a class="code" href="structcv_1_1_accumulator_3_01unsigned_01short_01_4.html#a81f22b96482f59175a9db504ddcbf281">01788</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1_accumulator.html">Accumulator</a>&lt;unsigned short&gt; { <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_accumulator_3_01unsigned_01short_01_4.html#a81f22b96482f59175a9db504ddcbf281">Type</a>; };
<a name="l01789"></a><a class="code" href="structcv_1_1_accumulator_3_01char_01_4.html#a81b49efd978faaac393e11a4a93fbf26">01789</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1_accumulator.html">Accumulator</a>&lt;char&gt;   { <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_accumulator_3_01char_01_4.html#a81b49efd978faaac393e11a4a93fbf26">Type</a>; };
<a name="l01790"></a><a class="code" href="structcv_1_1_accumulator_3_01short_01_4.html#a77fcd7bec156efe951d0204bbb389d13">01790</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1_accumulator.html">Accumulator</a>&lt;short&gt;  { <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_accumulator_3_01short_01_4.html#a77fcd7bec156efe951d0204bbb389d13">Type</a>; };
<a name="l01791"></a>01791 
<a name="l01792"></a>01792 <span class="comment">/*</span>
<a name="l01793"></a>01793 <span class="comment"> * Squared Euclidean distance functor</span>
<a name="l01794"></a>01794 <span class="comment"> */</span>
<a name="l01795"></a>01795 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l01796"></a><a class="code" href="structcv_1_1_l2.html">01796</a> <span class="keyword">struct </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="structcv_1_1_l2.html">L2</a>
<a name="l01797"></a>01797 {
<a name="l01798"></a><a class="code" href="structcv_1_1_l2.html#ad25afc9e28cdb4d9dfde1a7b6feafd08">01798</a>     <span class="keyword">typedef</span> T <a class="code" href="structcv_1_1_l2.html#ad25afc9e28cdb4d9dfde1a7b6feafd08">ValueType</a>;
<a name="l01799"></a><a class="code" href="structcv_1_1_l2.html#a1452282c710b7f56201791008678b441">01799</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structcv_1_1_accumulator.html#ad5bc00e84ea9780e0194fafdf2a95cbb">Accumulator&lt;T&gt;::Type</a> <a class="code" href="structcv_1_1_l2.html#a1452282c710b7f56201791008678b441">ResultType</a>;
<a name="l01800"></a>01800 
<a name="l01801"></a><a class="code" href="structcv_1_1_l2.html#a3e6509f8374160ca68cc3e8f3c510ceb">01801</a>     <a class="code" href="structcv_1_1_l2.html#a1452282c710b7f56201791008678b441">ResultType</a> operator()( <span class="keyword">const</span> T* a, <span class="keyword">const</span> T* b, <span class="keywordtype">int</span> size )<span class="keyword"> const</span>
<a name="l01802"></a>01802 <span class="keyword">    </span>{
<a name="l01803"></a>01803         <a class="code" href="structcv_1_1_l2.html#a1452282c710b7f56201791008678b441">ResultType</a> result = <a class="code" href="structcv_1_1_l2.html#a1452282c710b7f56201791008678b441">ResultType</a>();
<a name="l01804"></a>01804         <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; size; i++ )
<a name="l01805"></a>01805         {
<a name="l01806"></a>01806             <a class="code" href="structcv_1_1_l2.html#a1452282c710b7f56201791008678b441">ResultType</a> diff = (<a class="code" href="structcv_1_1_l2.html#a1452282c710b7f56201791008678b441">ResultType</a>)(a[i] - b[i]);
<a name="l01807"></a>01807             result += diff*diff;
<a name="l01808"></a>01808         }
<a name="l01809"></a>01809         <span class="keywordflow">return</span> (<a class="code" href="structcv_1_1_l2.html#a1452282c710b7f56201791008678b441">ResultType</a>)<a class="code" href="namespacecv.html#ad4272ced40e7db7cf6b8e74b1c0c4b89" title="computes square root of each matrix element (dst = src**0.5)">sqrt</a>((<span class="keywordtype">double</span>)result);
<a name="l01810"></a>01810     }
<a name="l01811"></a>01811 };
<a name="l01812"></a>01812 
<a name="l01813"></a>01813 <span class="comment">/*</span>
<a name="l01814"></a>01814 <span class="comment"> * Manhattan distance (city block distance) functor</span>
<a name="l01815"></a>01815 <span class="comment"> */</span>
<a name="l01816"></a>01816 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l01817"></a><a class="code" href="structcv_1_1_l1.html">01817</a> <span class="keyword">struct </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="structcv_1_1_l1.html">L1</a>
<a name="l01818"></a>01818 {
<a name="l01819"></a><a class="code" href="structcv_1_1_l1.html#a03e450655ea3ca64f331f9296b510637">01819</a>     <span class="keyword">typedef</span> T <a class="code" href="structcv_1_1_l1.html#a03e450655ea3ca64f331f9296b510637">ValueType</a>;
<a name="l01820"></a><a class="code" href="structcv_1_1_l1.html#a4c4639a0c362606e96b3cf626dbac79b">01820</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structcv_1_1_accumulator.html#ad5bc00e84ea9780e0194fafdf2a95cbb">Accumulator&lt;T&gt;::Type</a> <a class="code" href="structcv_1_1_l1.html#a4c4639a0c362606e96b3cf626dbac79b">ResultType</a>;
<a name="l01821"></a>01821 
<a name="l01822"></a><a class="code" href="structcv_1_1_l1.html#a375c166b6e49b97846d560057f57a4ef">01822</a>     <a class="code" href="structcv_1_1_l1.html#a4c4639a0c362606e96b3cf626dbac79b">ResultType</a> operator()( <span class="keyword">const</span> T* a, <span class="keyword">const</span> T* b, <span class="keywordtype">int</span> size )<span class="keyword"> const</span>
<a name="l01823"></a>01823 <span class="keyword">    </span>{
<a name="l01824"></a>01824         <a class="code" href="structcv_1_1_l1.html#a4c4639a0c362606e96b3cf626dbac79b">ResultType</a> result = <a class="code" href="structcv_1_1_l1.html#a4c4639a0c362606e96b3cf626dbac79b">ResultType</a>();
<a name="l01825"></a>01825         <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; size; i++ )
<a name="l01826"></a>01826         {
<a name="l01827"></a>01827             <a class="code" href="structcv_1_1_l1.html#a4c4639a0c362606e96b3cf626dbac79b">ResultType</a> diff = a[i] - b[i];
<a name="l01828"></a>01828             result += (<a class="code" href="structcv_1_1_l1.html#a4c4639a0c362606e96b3cf626dbac79b">ResultType</a>)fabs( diff );
<a name="l01829"></a>01829         }
<a name="l01830"></a>01830         <span class="keywordflow">return</span> result;
<a name="l01831"></a>01831     }
<a name="l01832"></a>01832 };
<a name="l01833"></a>01833 
<a name="l01834"></a>01834 <span class="comment">/*</span>
<a name="l01835"></a>01835 <span class="comment"> * Hamming distance functor - counts the bit differences between two strings - useful for the Brief descriptor</span>
<a name="l01836"></a>01836 <span class="comment"> * bit count of A exclusive XOR&#39;ed with B</span>
<a name="l01837"></a>01837 <span class="comment"> */</span>
<a name="l01838"></a><a class="code" href="structcv_1_1_hamming_l_u_t.html">01838</a> <span class="keyword">struct </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="structcv_1_1_hamming_l_u_t.html">HammingLUT</a>
<a name="l01839"></a>01839 {
<a name="l01840"></a><a class="code" href="structcv_1_1_hamming_l_u_t.html#a26d98cffaa0fbe80066f1ae40a869eb4">01840</a>     <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structcv_1_1_hamming_l_u_t.html#a26d98cffaa0fbe80066f1ae40a869eb4">ValueType</a>;
<a name="l01841"></a><a class="code" href="structcv_1_1_hamming_l_u_t.html#a18ad15ad365023235dfefb52bbccaf4f">01841</a>     <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_hamming_l_u_t.html#a18ad15ad365023235dfefb52bbccaf4f">ResultType</a>;
<a name="l01842"></a>01842 
<a name="l01845"></a>01845     <a class="code" href="structcv_1_1_hamming_l_u_t.html#a18ad15ad365023235dfefb52bbccaf4f">ResultType</a> operator()( <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* a, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* b, <span class="keywordtype">int</span> size ) <span class="keyword">const</span>;
<a name="l01846"></a>01846 
<a name="l01852"></a>01852     <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> byteBitsLookUp(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> b);
<a name="l01853"></a>01853 };
<a name="l01854"></a>01854 
<a name="l01855"></a>01855 
<a name="l01859"></a><a class="code" href="structcv_1_1_hamming.html">01859</a> <span class="keyword">struct </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="structcv_1_1_hamming.html">Hamming</a>
<a name="l01860"></a>01860 {
<a name="l01861"></a><a class="code" href="structcv_1_1_hamming.html#ad95bdbcd7f1e66f2ac76168a75475976">01861</a>     <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structcv_1_1_hamming.html#ad95bdbcd7f1e66f2ac76168a75475976">ValueType</a>;
<a name="l01862"></a>01862 
<a name="l01864"></a>01864     <span class="comment">// in BruteForce if not</span>
<a name="l01865"></a><a class="code" href="structcv_1_1_hamming.html#ab8c5ba99d19941d5e2deb35a338da7b4">01865</a>     <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_hamming.html#ab8c5ba99d19941d5e2deb35a338da7b4" title="important that this is signed as weird behavior happens">ResultType</a>;
<a name="l01866"></a>01866 
<a name="l01869"></a>01869     <a class="code" href="structcv_1_1_hamming.html#ab8c5ba99d19941d5e2deb35a338da7b4" title="important that this is signed as weird behavior happens">ResultType</a> operator()(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* a, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* b, <span class="keywordtype">int</span> size) <span class="keyword">const</span>;
<a name="l01870"></a>01870 };
<a name="l01871"></a>01871 
<a name="l01872"></a>01872 
<a name="l01873"></a>01873 <span class="comment">/****************************************************************************************\</span>
<a name="l01874"></a>01874 <span class="comment">*                                      DMatch                                            *</span>
<a name="l01875"></a>01875 <span class="comment">\****************************************************************************************/</span>
<a name="l01876"></a>01876 <span class="comment">/*</span>
<a name="l01877"></a>01877 <span class="comment"> * Struct for matching: query descriptor index, train descriptor index, train image index and distance between descriptors.</span>
<a name="l01878"></a>01878 <span class="comment"> */</span>
<a name="l01879"></a><a class="code" href="structcv_1_1_d_match.html">01879</a> <span class="keyword">struct </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="structcv_1_1_d_match.html">DMatch</a>
<a name="l01880"></a>01880 {
<a name="l01881"></a><a class="code" href="structcv_1_1_d_match.html#a546ddb9a87898f06e510e015a6de596e">01881</a>     <a class="code" href="structcv_1_1_d_match.html#a546ddb9a87898f06e510e015a6de596e">DMatch</a>() : queryIdx(-1), trainIdx(-1), imgIdx(-1), distance(std::numeric_limits&lt;float&gt;::<a class="code" href="namespacecv.html#a57416e28468db6ec3f09e4a133a2c224" title="computes per-element maximum of two arrays (dst = max(src1, src2))">max</a>()) {}
<a name="l01882"></a><a class="code" href="structcv_1_1_d_match.html#abcedc39e3f9c605472793d81ff5eb318">01882</a>     <a class="code" href="structcv_1_1_d_match.html">DMatch</a>( <span class="keywordtype">int</span> _queryIdx, <span class="keywordtype">int</span> _trainIdx, <span class="keywordtype">float</span> _distance ) :
<a name="l01883"></a>01883             queryIdx(_queryIdx), trainIdx(_trainIdx), imgIdx(-1), distance(_distance) {}
<a name="l01884"></a><a class="code" href="structcv_1_1_d_match.html#a43d07332011940086bae0ae4a43da06e">01884</a>     <a class="code" href="structcv_1_1_d_match.html">DMatch</a>( <span class="keywordtype">int</span> _queryIdx, <span class="keywordtype">int</span> _trainIdx, <span class="keywordtype">int</span> _imgIdx, <span class="keywordtype">float</span> _distance ) :
<a name="l01885"></a>01885             queryIdx(_queryIdx), trainIdx(_trainIdx), imgIdx(_imgIdx), distance(_distance) {}
<a name="l01886"></a>01886 
<a name="l01887"></a><a class="code" href="structcv_1_1_d_match.html#a47475576327f6ba9cd39250881b4d330">01887</a>     <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_d_match.html#a47475576327f6ba9cd39250881b4d330">queryIdx</a>; <span class="comment">// query descriptor index</span>
<a name="l01888"></a><a class="code" href="structcv_1_1_d_match.html#a2320bcc822280c8a416b85f80f5a4453">01888</a>     <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_d_match.html#a2320bcc822280c8a416b85f80f5a4453">trainIdx</a>; <span class="comment">// train descriptor index</span>
<a name="l01889"></a><a class="code" href="structcv_1_1_d_match.html#ab9800c265dcb748a28aa1a2d4b45eea4">01889</a>     <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_d_match.html#ab9800c265dcb748a28aa1a2d4b45eea4">imgIdx</a>;   <span class="comment">// train image index</span>
<a name="l01890"></a>01890 
<a name="l01891"></a><a class="code" href="structcv_1_1_d_match.html#a1cb9bee47b20ad96e16de28f4b9cbdf1">01891</a>     <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_d_match.html#a1cb9bee47b20ad96e16de28f4b9cbdf1">distance</a>;
<a name="l01892"></a>01892 
<a name="l01893"></a>01893     <span class="comment">// less is better</span>
<a name="l01894"></a><a class="code" href="structcv_1_1_d_match.html#a25108da824f8541f11e54c4ab6e233f4">01894</a>     <span class="keywordtype">bool</span> <a class="code" href="namespacecv.html#ab6c79aec667fb141316985a596818fe5">operator&lt;</a>( <span class="keyword">const</span> <a class="code" href="structcv_1_1_d_match.html">DMatch</a> &amp;m )<span class="keyword"> const</span>
<a name="l01895"></a>01895 <span class="keyword">    </span>{
<a name="l01896"></a>01896         <span class="keywordflow">return</span> distance &lt; m.<a class="code" href="structcv_1_1_d_match.html#a1cb9bee47b20ad96e16de28f4b9cbdf1">distance</a>;
<a name="l01897"></a>01897     }
<a name="l01898"></a>01898 };
<a name="l01899"></a>01899 
<a name="l01900"></a>01900 <span class="comment">/****************************************************************************************\</span>
<a name="l01901"></a>01901 <span class="comment">*                                  DescriptorMatcher                                     *</span>
<a name="l01902"></a>01902 <span class="comment">\****************************************************************************************/</span>
<a name="l01903"></a>01903 <span class="comment">/*</span>
<a name="l01904"></a>01904 <span class="comment"> * Abstract base class for matching two sets of descriptors.</span>
<a name="l01905"></a>01905 <span class="comment"> */</span>
<a name="l01906"></a><a class="code" href="classcv_1_1_descriptor_matcher.html">01906</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_descriptor_matcher.html">DescriptorMatcher</a>
<a name="l01907"></a>01907 {
<a name="l01908"></a>01908 <span class="keyword">public</span>:
<a name="l01909"></a>01909     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_descriptor_matcher.html">DescriptorMatcher</a>();
<a name="l01910"></a>01910 
<a name="l01911"></a>01911         <span class="comment">/*</span>
<a name="l01912"></a>01912 <span class="comment">     * Add descriptors to train descriptor collection.</span>
<a name="l01913"></a>01913 <span class="comment">     * descriptors      Descriptors to add. Each descriptors[i] is a descriptors set from one image.</span>
<a name="l01914"></a>01914 <span class="comment">     */</span>
<a name="l01915"></a>01915     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a5fe1c189a97c40a07be2b31a7bc90e9e" title="adds one matrix to another (dst = src1 + src2)">add</a>( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; descriptors );
<a name="l01916"></a>01916     <span class="comment">/*</span>
<a name="l01917"></a>01917 <span class="comment">     * Get train descriptors collection.</span>
<a name="l01918"></a>01918 <span class="comment">     */</span>
<a name="l01919"></a>01919     <span class="keyword">const</span> vector&lt;Mat&gt;&amp; getTrainDescriptors() <span class="keyword">const</span>;
<a name="l01920"></a>01920     <span class="comment">/*</span>
<a name="l01921"></a>01921 <span class="comment">     * Clear train descriptors collection.</span>
<a name="l01922"></a>01922 <span class="comment">     */</span>
<a name="l01923"></a>01923     <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear();
<a name="l01924"></a>01924 
<a name="l01925"></a>01925     <span class="comment">/*</span>
<a name="l01926"></a>01926 <span class="comment">     * Return true if there are not train descriptors in collection.</span>
<a name="l01927"></a>01927 <span class="comment">     */</span>
<a name="l01928"></a>01928         <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l01929"></a>01929     <span class="comment">/*</span>
<a name="l01930"></a>01930 <span class="comment">     * Return true if the matcher supports mask in match methods.</span>
<a name="l01931"></a>01931 <span class="comment">     */</span>
<a name="l01932"></a>01932     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> isMaskSupported() <span class="keyword">const</span> = 0;
<a name="l01933"></a>01933 
<a name="l01934"></a>01934     <span class="comment">/*</span>
<a name="l01935"></a>01935 <span class="comment">     * Train matcher (e.g. train flann index).</span>
<a name="l01936"></a>01936 <span class="comment">     * In all methods to match the method train() is run every time before matching.</span>
<a name="l01937"></a>01937 <span class="comment">     * Some descriptor matchers (e.g. BruteForceMatcher) have empty implementation</span>
<a name="l01938"></a>01938 <span class="comment">     * of this method, other matchers realy train their inner structures</span>
<a name="l01939"></a>01939 <span class="comment">     * (e.g. FlannBasedMatcher trains flann::Index). So nonempty implementation</span>
<a name="l01940"></a>01940 <span class="comment">     * of train() should check the class object state and do traing/retraining</span>
<a name="l01941"></a>01941 <span class="comment">     * only if the state requires that (e.g. FlannBasedMatcher trains flann::Index</span>
<a name="l01942"></a>01942 <span class="comment">     * if it has not trained yet or if new descriptors have been added to the train</span>
<a name="l01943"></a>01943 <span class="comment">     * collection).</span>
<a name="l01944"></a>01944 <span class="comment">     */</span>
<a name="l01945"></a>01945     <span class="keyword">virtual</span> <span class="keywordtype">void</span> train();
<a name="l01946"></a>01946     <span class="comment">/*</span>
<a name="l01947"></a>01947 <span class="comment">     * Group of methods to match descriptors from image pair.</span>
<a name="l01948"></a>01948 <span class="comment">     * Method train() is run in this methods.</span>
<a name="l01949"></a>01949 <span class="comment">     */</span>
<a name="l01950"></a>01950     <span class="comment">// Find one best match for each query descriptor (if mask is empty).</span>
<a name="l01951"></a>01951     <span class="keywordtype">void</span> match( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; trainDescriptors,
<a name="l01952"></a>01952                 vector&lt;DMatch&gt;&amp; matches, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01953"></a>01953     <span class="comment">// Find k best matches for each query descriptor (in increasing order of distances).</span>
<a name="l01954"></a>01954     <span class="comment">// compactResult is used when mask is not empty. If compactResult is false matches</span>
<a name="l01955"></a>01955     <span class="comment">// vector will have the same size as queryDescriptors rows. If compactResult is true</span>
<a name="l01956"></a>01956     <span class="comment">// matches vector will not contain matches for fully masked out query descriptors.</span>
<a name="l01957"></a>01957     <span class="keywordtype">void</span> knnMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; trainDescriptors,
<a name="l01958"></a>01958                    vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l01959"></a>01959                    <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l01960"></a>01960     <span class="comment">// Find best matches for each query descriptor which have distance less than</span>
<a name="l01961"></a>01961     <span class="comment">// maxDistance (in increasing order of distances).</span>
<a name="l01962"></a>01962     <span class="keywordtype">void</span> radiusMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; trainDescriptors,
<a name="l01963"></a>01963                       vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l01964"></a>01964                       <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l01965"></a>01965     <span class="comment">/*</span>
<a name="l01966"></a>01966 <span class="comment">     * Group of methods to match descriptors from one image to image set.</span>
<a name="l01967"></a>01967 <span class="comment">     * See description of similar methods for matching image pair above.</span>
<a name="l01968"></a>01968 <span class="comment">     */</span>
<a name="l01969"></a>01969     <span class="keywordtype">void</span> match( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, vector&lt;DMatch&gt;&amp; matches,
<a name="l01970"></a>01970                 <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;() );
<a name="l01971"></a>01971     <span class="keywordtype">void</span> knnMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l01972"></a>01972            <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> );
<a name="l01973"></a>01973     <span class="keywordtype">void</span> radiusMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l01974"></a>01974                    <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> );
<a name="l01975"></a>01975 
<a name="l01976"></a>01976     <span class="comment">// Reads matcher object from a file node</span>
<a name="l01977"></a>01977     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; );
<a name="l01978"></a>01978     <span class="comment">// Writes matcher object to a file storage</span>
<a name="l01979"></a>01979     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; ) <span class="keyword">const</span>;
<a name="l01980"></a>01980 
<a name="l01981"></a>01981     <span class="comment">// Clone the matcher. If emptyTrainData is false the method create deep copy of the object, i.e. copies</span>
<a name="l01982"></a>01982     <span class="comment">// both parameters and train data. If emptyTrainData is true the method create object copy with current parameters</span>
<a name="l01983"></a>01983     <span class="comment">// but with empty train data.</span>
<a name="l01984"></a>01984     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a> clone( <span class="keywordtype">bool</span> emptyTrainData=<span class="keyword">false</span> ) <span class="keyword">const</span> = 0;
<a name="l01985"></a>01985 
<a name="l01986"></a>01986     <span class="keyword">static</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a> create( <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; descriptorMatcherType );
<a name="l01987"></a>01987 <span class="keyword">protected</span>:
<a name="l01988"></a>01988     <span class="comment">/*</span>
<a name="l01989"></a>01989 <span class="comment">     * Class to work with descriptors from several images as with one merged matrix.</span>
<a name="l01990"></a>01990 <span class="comment">     * It is used e.g. in FlannBasedMatcher.</span>
<a name="l01991"></a>01991 <span class="comment">     */</span>
<a name="l01992"></a><a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html">01992</a>     <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html">DescriptorCollection</a>
<a name="l01993"></a>01993     {
<a name="l01994"></a>01994     <span class="keyword">public</span>:
<a name="l01995"></a>01995         <a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html">DescriptorCollection</a>();
<a name="l01996"></a>01996         <a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html">DescriptorCollection</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html">DescriptorCollection</a>&amp; collection );
<a name="l01997"></a>01997         <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html">DescriptorCollection</a>();
<a name="l01998"></a>01998 
<a name="l01999"></a>01999         <span class="comment">// Vector of matrices &quot;descriptors&quot; will be merged to one matrix &quot;mergedDescriptors&quot; here.</span>
<a name="l02000"></a>02000         <span class="keywordtype">void</span> <span class="keyword">set</span>( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; descriptors );
<a name="l02001"></a>02001         <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear();
<a name="l02002"></a>02002 
<a name="l02003"></a>02003         <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; getDescriptors() <span class="keyword">const</span>;
<a name="l02004"></a>02004         <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a> getDescriptor( <span class="keywordtype">int</span> imgIdx, <span class="keywordtype">int</span> localDescIdx ) <span class="keyword">const</span>;
<a name="l02005"></a>02005         <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a> getDescriptor( <span class="keywordtype">int</span> globalDescIdx ) <span class="keyword">const</span>;
<a name="l02006"></a>02006         <span class="keywordtype">void</span> getLocalIdx( <span class="keywordtype">int</span> globalDescIdx, <span class="keywordtype">int</span>&amp; imgIdx, <span class="keywordtype">int</span>&amp; localDescIdx ) <span class="keyword">const</span>;
<a name="l02007"></a>02007 
<a name="l02008"></a>02008         <span class="keywordtype">int</span> size() <span class="keyword">const</span>;
<a name="l02009"></a>02009 
<a name="l02010"></a>02010     <span class="keyword">protected</span>:
<a name="l02011"></a><a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html#af89f9c161a310152714934252aef681f">02011</a>         <a class="code" href="classcv_1_1_mat.html">Mat</a> <a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html#af89f9c161a310152714934252aef681f">mergedDescriptors</a>;
<a name="l02012"></a><a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html#a97060c2e01d3b8266b7aabc1d2b3ccb4">02012</a>         vector&lt;int&gt; <a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html#a97060c2e01d3b8266b7aabc1d2b3ccb4">startIdxs</a>;
<a name="l02013"></a>02013     };
<a name="l02014"></a>02014 
<a name="l02015"></a>02015     <span class="comment">// In fact the matching is implemented only by the following two methods. These methods suppose</span>
<a name="l02016"></a>02016     <span class="comment">// that the class object has been trained already. Public match methods call these methods</span>
<a name="l02017"></a>02017     <span class="comment">// after calling train().</span>
<a name="l02018"></a>02018     <span class="keyword">virtual</span> <span class="keywordtype">void</span> knnMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02019"></a>02019            <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> ) = 0;
<a name="l02020"></a>02020     <span class="keyword">virtual</span> <span class="keywordtype">void</span> radiusMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02021"></a>02021            <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> ) = 0;
<a name="l02022"></a>02022 
<a name="l02023"></a>02023     <span class="keyword">static</span> <span class="keywordtype">bool</span> isPossibleMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>, <span class="keywordtype">int</span> queryIdx, <span class="keywordtype">int</span> trainIdx );
<a name="l02024"></a>02024     <span class="keyword">static</span> <span class="keywordtype">bool</span> isMaskedOut( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">int</span> queryIdx );
<a name="l02025"></a>02025 
<a name="l02026"></a><a class="code" href="classcv_1_1_descriptor_matcher.html#a7aa961c11ccdc6a9b1495f5aaf83d251">02026</a>     <span class="keyword">static</span> <a class="code" href="classcv_1_1_mat.html">Mat</a> <a class="code" href="classcv_1_1_descriptor_matcher.html#a7aa961c11ccdc6a9b1495f5aaf83d251">clone_op</a>( <a class="code" href="classcv_1_1_mat.html">Mat</a> m ) { <span class="keywordflow">return</span> m.<a class="code" href="classcv_1_1_mat.html#afb01ff6b2231b72f55618bfb66a5326b" title="returns deep copy of the matrix, i.e. the data is copied">clone</a>(); }
<a name="l02027"></a>02027         <span class="keywordtype">void</span> checkMasks( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">int</span> queryDescriptorsCount ) <span class="keyword">const</span>;
<a name="l02028"></a>02028 
<a name="l02029"></a>02029     <span class="comment">// Collection of descriptors from train images.</span>
<a name="l02030"></a><a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">02030</a>     vector&lt;Mat&gt; <a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>;
<a name="l02031"></a>02031 };
<a name="l02032"></a>02032 
<a name="l02033"></a>02033 <span class="comment">/*</span>
<a name="l02034"></a>02034 <span class="comment"> * Brute-force descriptor matcher.</span>
<a name="l02035"></a>02035 <span class="comment"> *</span>
<a name="l02036"></a>02036 <span class="comment"> * For each descriptor in the first set, this matcher finds the closest</span>
<a name="l02037"></a>02037 <span class="comment"> * descriptor in the second set by trying each one.</span>
<a name="l02038"></a>02038 <span class="comment"> *</span>
<a name="l02039"></a>02039 <span class="comment"> * For efficiency, BruteForceMatcher is templated on the distance metric.</span>
<a name="l02040"></a>02040 <span class="comment"> * For float descriptors, a common choice would be cv::L2&lt;float&gt;.</span>
<a name="l02041"></a>02041 <span class="comment"> */</span>
<a name="l02042"></a>02042 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Distance&gt;
<a name="l02043"></a><a class="code" href="classcv_1_1_brute_force_matcher.html">02043</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_descriptor_matcher.html">DescriptorMatcher</a>
<a name="l02044"></a>02044 {
<a name="l02045"></a>02045 <span class="keyword">public</span>:
<a name="l02046"></a><a class="code" href="classcv_1_1_brute_force_matcher.html#adafe4d7271b338e5ab13081acd15f80b">02046</a>     <a class="code" href="classcv_1_1_brute_force_matcher.html#adafe4d7271b338e5ab13081acd15f80b">BruteForceMatcher</a>( Distance d = Distance() ) : distance(d) {}
<a name="l02047"></a><a class="code" href="classcv_1_1_brute_force_matcher.html#ae517a3edef3a72eec3c8cea95949fff1">02047</a>     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_brute_force_matcher.html#ae517a3edef3a72eec3c8cea95949fff1">~BruteForceMatcher</a>() {}
<a name="l02048"></a>02048 
<a name="l02049"></a><a class="code" href="classcv_1_1_brute_force_matcher.html#ae928ee05fbba37e73697da82bfbbf1c4">02049</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_brute_force_matcher.html#ae928ee05fbba37e73697da82bfbbf1c4">isMaskSupported</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }
<a name="l02050"></a>02050 
<a name="l02051"></a>02051     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a> clone( <span class="keywordtype">bool</span> emptyTrainData=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l02052"></a>02052 
<a name="l02053"></a>02053 <span class="keyword">protected</span>:
<a name="l02054"></a>02054     <span class="keyword">virtual</span> <span class="keywordtype">void</span> knnMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02055"></a>02055            <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> );
<a name="l02056"></a>02056     <span class="keyword">virtual</span> <span class="keywordtype">void</span> radiusMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02057"></a>02057            <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> );
<a name="l02058"></a>02058 
<a name="l02059"></a><a class="code" href="classcv_1_1_brute_force_matcher.html#ae0aef10f6e9a325f8e807be067280f5a">02059</a>     Distance <a class="code" href="classcv_1_1_brute_force_matcher.html#ae0aef10f6e9a325f8e807be067280f5a">distance</a>;
<a name="l02060"></a>02060 
<a name="l02061"></a>02061 <span class="keyword">private</span>:
<a name="l02062"></a>02062     <span class="comment">/*</span>
<a name="l02063"></a>02063 <span class="comment">     * Next two methods are used to implement specialization.</span>
<a name="l02064"></a>02064 <span class="comment">     */</span>
<a name="l02065"></a>02065     <span class="keyword">static</span> <span class="keywordtype">void</span> commonKnnMatchImpl( <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher&lt;Distance&gt;</a>&amp; matcher,
<a name="l02066"></a>02066                     <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02067"></a>02067                     <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02068"></a>02068     <span class="keyword">static</span> <span class="keywordtype">void</span> commonRadiusMatchImpl( <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher&lt;Distance&gt;</a>&amp; matcher,
<a name="l02069"></a>02069                     <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02070"></a>02070                     <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02071"></a>02071 };
<a name="l02072"></a>02072 
<a name="l02073"></a>02073 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Distance&gt;
<a name="l02074"></a><a class="code" href="classcv_1_1_brute_force_matcher.html#a6fdec5ad3ddd56ca5cf1664316b97934">02074</a> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a> <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher&lt;Distance&gt;::clone</a>( <span class="keywordtype">bool</span> emptyTrainData )<span class="keyword"> const</span>
<a name="l02075"></a>02075 <span class="keyword"></span>{
<a name="l02076"></a>02076     <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher</a>* matcher = <span class="keyword">new</span> <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher</a>(distance);
<a name="l02077"></a>02077     <span class="keywordflow">if</span>( !emptyTrainData )
<a name="l02078"></a>02078     {
<a name="l02079"></a>02079         <a class="code" href="namespacecv.html#a2fc1afdc86c4b023c530a528d0a8ae3f" title="performs affine transformation of each element of multi-channel input matrix">transform</a>( trainDescCollection.begin(), trainDescCollection.end(),
<a name="l02080"></a>02080                    matcher-&gt;<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>.begin(), clone_op );
<a name="l02081"></a>02081     }
<a name="l02082"></a>02082     <span class="keywordflow">return</span> matcher;
<a name="l02083"></a>02083 }
<a name="l02084"></a>02084 
<a name="l02085"></a>02085 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Distance&gt;
<a name="l02086"></a><a class="code" href="classcv_1_1_brute_force_matcher.html#a4f1d7cfd202dbae10f461a969e9c1785">02086</a> <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher&lt;Distance&gt;::knnMatchImpl</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02087"></a>02087                                                 <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult )
<a name="l02088"></a>02088 {
<a name="l02089"></a>02089     commonKnnMatchImpl( *<span class="keyword">this</span>, queryDescriptors, matches, k, masks, compactResult );
<a name="l02090"></a>02090 }
<a name="l02091"></a>02091 
<a name="l02092"></a>02092 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Distance&gt;
<a name="l02093"></a><a class="code" href="classcv_1_1_brute_force_matcher.html#a140602008e0b635a7eb423d11282e65c">02093</a> <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher&lt;Distance&gt;::radiusMatchImpl</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches,
<a name="l02094"></a>02094                                                    <span class="keywordtype">float</span> maxDistance, <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult )
<a name="l02095"></a>02095 {
<a name="l02096"></a>02096     commonRadiusMatchImpl( *<span class="keyword">this</span>, queryDescriptors, matches, maxDistance, masks, compactResult );
<a name="l02097"></a>02097 }
<a name="l02098"></a>02098 
<a name="l02099"></a>02099 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Distance&gt;
<a name="l02100"></a>02100 <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher&lt;Distance&gt;::commonKnnMatchImpl</a>( <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher&lt;Distance&gt;</a>&amp; matcher,
<a name="l02101"></a>02101                           <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> knn,
<a name="l02102"></a>02102                           <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult )
<a name="l02103"></a>02103  {
<a name="l02104"></a>02104      <span class="keyword">typedef</span> <span class="keyword">typename</span> Distance::ValueType ValueType;
<a name="l02105"></a>02105      <span class="keyword">typedef</span> <span class="keyword">typename</span> Distance::ResultType DistanceType;
<a name="l02106"></a>02106          <a class="code" href="core_8hpp.html#afbcb487cba05bd288dbe18c433de4f6f">CV_DbgAssert</a>( !queryDescriptors.<a class="code" href="classcv_1_1_mat.html#a17d0777aef52a7cfbdb8d04d189fa5c3" title="returns true if matrix data is NULL">empty</a>() );
<a name="l02107"></a>02107      <a class="code" href="core_8hpp.html#af62bcd90f70e275191ab95136d85906b">CV_Assert</a>( <a class="code" href="classcv_1_1_data_type.html">DataType&lt;ValueType&gt;::type</a> == queryDescriptors.<a class="code" href="classcv_1_1_mat.html#aa6477efc7399fbe742418250ccf99a4b" title="returns element type, similar to CV_MAT_TYPE(cvmat-&amp;gt;type)">type</a>() );
<a name="l02108"></a>02108      
<a name="l02109"></a>02109      <span class="keywordtype">int</span> dimension = queryDescriptors.<a class="code" href="classcv_1_1_mat.html#aa3e5a47585c9ef6a0842556739155e3e">cols</a>;
<a name="l02110"></a>02110      matches.reserve(queryDescriptors.<a class="code" href="classcv_1_1_mat.html#abed816466c45234254d25bc59c31245e" title="the number of rows and columns or (-1, -1) when the matrix has more than 2 dimensions">rows</a>);
<a name="l02111"></a>02111 
<a name="l02112"></a>02112      <span class="keywordtype">size_t</span> imgCount = matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>.size();
<a name="l02113"></a>02113      vector&lt;Mat&gt; allDists( imgCount ); <span class="comment">// distances between one query descriptor and all train descriptors</span>
<a name="l02114"></a>02114      <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; imgCount; i++ )
<a name="l02115"></a>02115         allDists[i] = <a class="code" href="classcv_1_1_mat.html">Mat</a>( 1, matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>[i].rows, <a class="code" href="classcv_1_1_data_type.html">DataType&lt;DistanceType&gt;::type</a> );
<a name="l02116"></a>02116 
<a name="l02117"></a>02117      <span class="keywordflow">for</span>( <span class="keywordtype">int</span> qIdx = 0; qIdx &lt; queryDescriptors.<a class="code" href="classcv_1_1_mat.html#abed816466c45234254d25bc59c31245e" title="the number of rows and columns or (-1, -1) when the matrix has more than 2 dimensions">rows</a>; qIdx++ )
<a name="l02118"></a>02118      {
<a name="l02119"></a>02119          <span class="keywordflow">if</span>( matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a4ea827dc0c7a19406be3c34856e05f08">isMaskedOut</a>( masks, qIdx ) )
<a name="l02120"></a>02120          {
<a name="l02121"></a>02121              <span class="keywordflow">if</span>( !compactResult ) <span class="comment">// push empty vector</span>
<a name="l02122"></a>02122                  matches.<a class="code" href="classcv_1_1_mat.html#af11e514b13395e44909ba5bb52a1295e" title="adds element to the end of 1d matrix (or possibly multiple elements when _Tp=Mat)">push_back</a>( vector&lt;DMatch&gt;() );
<a name="l02123"></a>02123          }
<a name="l02124"></a>02124          <span class="keywordflow">else</span>
<a name="l02125"></a>02125          {
<a name="l02126"></a>02126              <span class="comment">// 1. compute distances between i-th query descriptor and all train descriptors</span>
<a name="l02127"></a>02127              <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> iIdx = 0; iIdx &lt; imgCount; iIdx++ )
<a name="l02128"></a>02128              {
<a name="l02129"></a>02129                  <a class="code" href="core_8hpp.html#af62bcd90f70e275191ab95136d85906b">CV_Assert</a>( DataType&lt;ValueType&gt;::type == matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>[iIdx].type() ||  matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>[iIdx].empty() );
<a name="l02130"></a>02130                                  <a class="code" href="core_8hpp.html#af62bcd90f70e275191ab95136d85906b">CV_Assert</a>( queryDescriptors.<a class="code" href="classcv_1_1_mat.html#aa3e5a47585c9ef6a0842556739155e3e">cols</a> == matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>[iIdx].cols || 
<a name="l02131"></a>02131                                             matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>[iIdx].empty() );
<a name="l02132"></a>02132 
<a name="l02133"></a>02133                  <span class="keyword">const</span> ValueType* d1 = (<span class="keyword">const</span> ValueType*)(queryDescriptors.<a class="code" href="classcv_1_1_mat.html#a4d33bed1c850265370d2af0ff02e1564" title="pointer to the data">data</a> + queryDescriptors.<a class="code" href="classcv_1_1_mat.html#acc7e087cdfcaaba5df75ab6e9def9e85">step</a>*qIdx);
<a name="l02134"></a>02134                  allDists[iIdx].setTo( <a class="code" href="classcv_1_1_scalar__.html#ae7411e333e610ee9d645f53d87a55757" title="returns a scalar with all elements set to v0">Scalar::all</a>(<a class="code" href="namespacecv.html#a57416e28468db6ec3f09e4a133a2c224" title="computes per-element maximum of two arrays (dst = max(src1, src2))">std::numeric_limits&lt;DistanceType&gt;::max</a>()) );
<a name="l02135"></a>02135                  <span class="keywordflow">for</span>( <span class="keywordtype">int</span> tIdx = 0; tIdx &lt; matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>[iIdx].rows; tIdx++ )
<a name="l02136"></a>02136                  {
<a name="l02137"></a>02137                      <span class="keywordflow">if</span>( masks.empty() || matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a3d8033c29676310a40e0cb2b4a602794">isPossibleMatch</a>(masks[iIdx], qIdx, tIdx) )
<a name="l02138"></a>02138                      {
<a name="l02139"></a>02139                          <span class="keyword">const</span> ValueType* d2 = (<span class="keyword">const</span> ValueType*)(matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>[iIdx].data +
<a name="l02140"></a>02140                                                                   matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>[iIdx].step*tIdx);
<a name="l02141"></a>02141                          allDists[iIdx].at&lt;DistanceType&gt;(0, tIdx) = matcher.<a class="code" href="classcv_1_1_brute_force_matcher.html#ae0aef10f6e9a325f8e807be067280f5a">distance</a>(d1, d2, dimension);
<a name="l02142"></a>02142                      }
<a name="l02143"></a>02143                  }
<a name="l02144"></a>02144              }
<a name="l02145"></a>02145 
<a name="l02146"></a>02146              <span class="comment">// 2. choose k nearest matches for query[i]</span>
<a name="l02147"></a>02147              matches.push_back( vector&lt;DMatch&gt;() );
<a name="l02148"></a>02148              vector&lt;vector&lt;DMatch&gt; &gt;::reverse_iterator curMatches = matches.rbegin();
<a name="l02149"></a>02149              <span class="keywordflow">for</span>( <span class="keywordtype">int</span> k = 0; k &lt; knn; k++ )
<a name="l02150"></a>02150              {
<a name="l02151"></a>02151                  DMatch bestMatch;
<a name="l02152"></a>02152                  bestMatch.distance = <a class="code" href="namespacecv.html#a57416e28468db6ec3f09e4a133a2c224" title="computes per-element maximum of two arrays (dst = max(src1, src2))">std::numeric_limits&lt;float&gt;::max</a>();
<a name="l02153"></a>02153                  <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> iIdx = 0; iIdx &lt; imgCount; iIdx++ )
<a name="l02154"></a>02154                  {
<a name="l02155"></a>02155                                          <span class="keywordflow">if</span>( !allDists[iIdx].empty() )
<a name="l02156"></a>02156                                          {
<a name="l02157"></a>02157                                                  <span class="keywordtype">double</span> minVal;
<a name="l02158"></a>02158                                                  <a class="code" href="namespacecv.html#a1e83eafb2d26b3c93f09e8338bcab192">Point</a> minLoc;
<a name="l02159"></a>02159                                                  <a class="code" href="namespacecv.html#a7afc836422a6e9a0a1d1b046f8bcd34b" title="finds global minimum and maximum array elements and returns their values and their locations...">minMaxLoc</a>( allDists[iIdx], &amp;minVal, 0, &amp;minLoc, 0 );
<a name="l02160"></a>02160                                                  <span class="keywordflow">if</span>( minVal &lt; bestMatch.distance )
<a name="l02161"></a>02161                                                          bestMatch = DMatch( qIdx, minLoc.x, (<span class="keywordtype">int</span>)iIdx, (<span class="keywordtype">float</span>)minVal );
<a name="l02162"></a>02162                                          }
<a name="l02163"></a>02163                  }
<a name="l02164"></a>02164                  <span class="keywordflow">if</span>( bestMatch.trainIdx == -1 )
<a name="l02165"></a>02165                      <span class="keywordflow">break</span>;
<a name="l02166"></a>02166 
<a name="l02167"></a>02167                  allDists[bestMatch.imgIdx].at&lt;DistanceType&gt;(0, bestMatch.trainIdx) = <a class="code" href="namespacecv.html#a57416e28468db6ec3f09e4a133a2c224" title="computes per-element maximum of two arrays (dst = max(src1, src2))">std::numeric_limits&lt;DistanceType&gt;::max</a>();
<a name="l02168"></a>02168                  curMatches-&gt;push_back( bestMatch );
<a name="l02169"></a>02169              }
<a name="l02170"></a>02170              <span class="comment">//TODO should already be sorted at this point?</span>
<a name="l02171"></a>02171              <a class="code" href="namespacecv.html#af66410d6ee3bba4d9c6628589574f9a9" title="sorts independently each matrix row or each matrix column">std::sort</a>( curMatches-&gt;begin(), curMatches-&gt;end() );
<a name="l02172"></a>02172          }
<a name="l02173"></a>02173      }
<a name="l02174"></a>02174 }
<a name="l02175"></a>02175 
<a name="l02176"></a>02176 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Distance&gt;
<a name="l02177"></a>02177 <span class="keyword">inline</span> <span class="keywordtype">void</span> BruteForceMatcher&lt;Distance&gt;::commonRadiusMatchImpl( BruteForceMatcher&lt;Distance&gt;&amp; matcher,
<a name="l02178"></a>02178                              <span class="keyword">const</span> Mat&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02179"></a>02179                              <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult )
<a name="l02180"></a>02180 {
<a name="l02181"></a>02181     <span class="keyword">typedef</span> <span class="keyword">typename</span> Distance::ValueType ValueType;
<a name="l02182"></a>02182     <span class="keyword">typedef</span> <span class="keyword">typename</span> Distance::ResultType DistanceType;
<a name="l02183"></a>02183         <a class="code" href="core_8hpp.html#afbcb487cba05bd288dbe18c433de4f6f">CV_DbgAssert</a>( !queryDescriptors.empty() );
<a name="l02184"></a>02184     <a class="code" href="core_8hpp.html#af62bcd90f70e275191ab95136d85906b">CV_Assert</a>( DataType&lt;ValueType&gt;::type == queryDescriptors.type() );
<a name="l02185"></a>02185     
<a name="l02186"></a>02186     <span class="keywordtype">int</span> dimension = queryDescriptors.cols;
<a name="l02187"></a>02187     matches.reserve(queryDescriptors.rows);
<a name="l02188"></a>02188 
<a name="l02189"></a>02189     <span class="keywordtype">size_t</span> imgCount = matcher.trainDescCollection.size();
<a name="l02190"></a>02190     <span class="keywordflow">for</span>( <span class="keywordtype">int</span> qIdx = 0; qIdx &lt; queryDescriptors.rows; qIdx++ )
<a name="l02191"></a>02191     {
<a name="l02192"></a>02192         <span class="keywordflow">if</span>( matcher.isMaskedOut( masks, qIdx ) )
<a name="l02193"></a>02193         {
<a name="l02194"></a>02194             <span class="keywordflow">if</span>( !compactResult ) <span class="comment">// push empty vector</span>
<a name="l02195"></a>02195                 matches.push_back( vector&lt;DMatch&gt;() );
<a name="l02196"></a>02196         }
<a name="l02197"></a>02197         <span class="keywordflow">else</span>
<a name="l02198"></a>02198         {
<a name="l02199"></a>02199             matches.push_back( vector&lt;DMatch&gt;() );
<a name="l02200"></a>02200             vector&lt;vector&lt;DMatch&gt; &gt;::reverse_iterator curMatches = matches.rbegin();
<a name="l02201"></a>02201             <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> iIdx = 0; iIdx &lt; imgCount; iIdx++ )
<a name="l02202"></a>02202             {
<a name="l02203"></a>02203                 <a class="code" href="core_8hpp.html#af62bcd90f70e275191ab95136d85906b">CV_Assert</a>( DataType&lt;ValueType&gt;::type == matcher.trainDescCollection[iIdx].type() ||
<a name="l02204"></a>02204                            matcher.trainDescCollection[iIdx].empty() );
<a name="l02205"></a>02205                 <a class="code" href="core_8hpp.html#af62bcd90f70e275191ab95136d85906b">CV_Assert</a>( queryDescriptors.cols == matcher.trainDescCollection[iIdx].cols ||
<a name="l02206"></a>02206                                                    matcher.trainDescCollection[iIdx].empty() );
<a name="l02207"></a>02207 
<a name="l02208"></a>02208                 <span class="keyword">const</span> ValueType* d1 = (<span class="keyword">const</span> ValueType*)(queryDescriptors.data + queryDescriptors.step*qIdx);
<a name="l02209"></a>02209                 <span class="keywordflow">for</span>( <span class="keywordtype">int</span> tIdx = 0; tIdx &lt; matcher.trainDescCollection[iIdx].rows; tIdx++ )
<a name="l02210"></a>02210                 {
<a name="l02211"></a>02211                     <span class="keywordflow">if</span>( masks.empty() || matcher.isPossibleMatch(masks[iIdx], qIdx, tIdx) )
<a name="l02212"></a>02212                     {
<a name="l02213"></a>02213                         <span class="keyword">const</span> ValueType* d2 = (<span class="keyword">const</span> ValueType*)(matcher.trainDescCollection[iIdx].data +
<a name="l02214"></a>02214                                                                  matcher.trainDescCollection[iIdx].step*tIdx);
<a name="l02215"></a>02215                         DistanceType d = matcher.distance(d1, d2, dimension);
<a name="l02216"></a>02216                         <span class="keywordflow">if</span>( d &lt; maxDistance )
<a name="l02217"></a>02217                             curMatches-&gt;push_back( DMatch( qIdx, tIdx, (<span class="keywordtype">int</span>)iIdx, (<span class="keywordtype">float</span>)d ) );
<a name="l02218"></a>02218                     }
<a name="l02219"></a>02219                 }
<a name="l02220"></a>02220             }
<a name="l02221"></a>02221             <a class="code" href="namespacecv.html#af66410d6ee3bba4d9c6628589574f9a9" title="sorts independently each matrix row or each matrix column">std::sort</a>( curMatches-&gt;begin(), curMatches-&gt;end() );
<a name="l02222"></a>02222         }
<a name="l02223"></a>02223     }
<a name="l02224"></a>02224 }
<a name="l02225"></a>02225 
<a name="l02226"></a>02226 <span class="comment">/*</span>
<a name="l02227"></a>02227 <span class="comment"> * BruteForceMatcher L2 specialization</span>
<a name="l02228"></a>02228 <span class="comment"> */</span>
<a name="l02229"></a>02229 <span class="keyword">template</span>&lt;&gt;
<a name="l02230"></a>02230 <span class="keywordtype">void</span> BruteForceMatcher&lt;L2&lt;float&gt; &gt;::knnMatchImpl( <span class="keyword">const</span> Mat&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02231"></a>02231                                                   <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02232"></a>02232 <span class="keyword">template</span>&lt;&gt;
<a name="l02233"></a>02233 <span class="keywordtype">void</span> BruteForceMatcher&lt;L2&lt;float&gt; &gt;::radiusMatchImpl( <span class="keyword">const</span> Mat&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches,
<a name="l02234"></a>02234                                                      <span class="keywordtype">float</span> maxDistance, <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02235"></a>02235 
<a name="l02236"></a>02236 <span class="comment">/*</span>
<a name="l02237"></a>02237 <span class="comment"> * Flann based matcher</span>
<a name="l02238"></a>02238 <span class="comment"> */</span>
<a name="l02239"></a><a class="code" href="classcv_1_1_flann_based_matcher.html">02239</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_flann_based_matcher.html">FlannBasedMatcher</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_descriptor_matcher.html">DescriptorMatcher</a>
<a name="l02240"></a>02240 {
<a name="l02241"></a>02241 <span class="keyword">public</span>:
<a name="l02242"></a>02242     <a class="code" href="classcv_1_1_flann_based_matcher.html">FlannBasedMatcher</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;flann::IndexParams&gt;</a>&amp; indexParams=<span class="keyword">new</span> flann::KDTreeIndexParams(),
<a name="l02243"></a>02243                        <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;flann::SearchParams&gt;</a>&amp; searchParams=<span class="keyword">new</span> flann::SearchParams() );
<a name="l02244"></a>02244 
<a name="l02245"></a>02245     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a5fe1c189a97c40a07be2b31a7bc90e9e" title="adds one matrix to another (dst = src1 + src2)">add</a>( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; descriptors );
<a name="l02246"></a>02246     <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear();
<a name="l02247"></a>02247 
<a name="l02248"></a>02248     <span class="keyword">virtual</span> <span class="keywordtype">void</span> train();
<a name="l02249"></a>02249     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> isMaskSupported() <span class="keyword">const</span>;
<a name="l02250"></a>02250         
<a name="l02251"></a>02251     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a> clone( <span class="keywordtype">bool</span> emptyTrainData=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l02252"></a>02252 
<a name="l02253"></a>02253 <span class="keyword">protected</span>:
<a name="l02254"></a>02254     <span class="keyword">static</span> <span class="keywordtype">void</span> convertToDMatches( <span class="keyword">const</span> DescriptorCollection&amp; descriptors,
<a name="l02255"></a>02255                                    <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; indices, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; distances,
<a name="l02256"></a>02256                                    vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches );
<a name="l02257"></a>02257 
<a name="l02258"></a>02258     <span class="keyword">virtual</span> <span class="keywordtype">void</span> knnMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02259"></a>02259                    <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> );
<a name="l02260"></a>02260     <span class="keyword">virtual</span> <span class="keywordtype">void</span> radiusMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02261"></a>02261                    <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> );
<a name="l02262"></a>02262 
<a name="l02263"></a><a class="code" href="classcv_1_1_flann_based_matcher.html#af2b50fb9c749ff4e14902192326247ad">02263</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;flann::IndexParams&gt;</a> <a class="code" href="classcv_1_1_flann_based_matcher.html#af2b50fb9c749ff4e14902192326247ad">indexParams</a>;
<a name="l02264"></a><a class="code" href="classcv_1_1_flann_based_matcher.html#af7f49c47216e18e7bdbefeb73884b891">02264</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;flann::SearchParams&gt;</a> <a class="code" href="classcv_1_1_flann_based_matcher.html#af7f49c47216e18e7bdbefeb73884b891">searchParams</a>;
<a name="l02265"></a><a class="code" href="classcv_1_1_flann_based_matcher.html#a293108def96df8a5f19ea0897e548ff2">02265</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;flann::Index&gt;</a> <a class="code" href="classcv_1_1_flann_based_matcher.html#a293108def96df8a5f19ea0897e548ff2">flannIndex</a>;
<a name="l02266"></a>02266 
<a name="l02267"></a><a class="code" href="classcv_1_1_flann_based_matcher.html#a990859c4f84b04b3ced4411b3a62e7cc">02267</a>     DescriptorCollection <a class="code" href="classcv_1_1_flann_based_matcher.html#a990859c4f84b04b3ced4411b3a62e7cc">mergedDescriptors</a>;
<a name="l02268"></a><a class="code" href="classcv_1_1_flann_based_matcher.html#a8854dcad3e17bab50c39f60ddff76d21">02268</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_flann_based_matcher.html#a8854dcad3e17bab50c39f60ddff76d21">addedDescCount</a>;
<a name="l02269"></a>02269 };
<a name="l02270"></a>02270 
<a name="l02271"></a>02271 <span class="comment">/****************************************************************************************\</span>
<a name="l02272"></a>02272 <span class="comment">*                                GenericDescriptorMatcher                                *</span>
<a name="l02273"></a>02273 <span class="comment">\****************************************************************************************/</span>
<a name="l02274"></a>02274 <span class="comment">/*</span>
<a name="l02275"></a>02275 <span class="comment"> *   Abstract interface for a keypoint descriptor and matcher</span>
<a name="l02276"></a>02276 <span class="comment"> */</span>
<a name="l02277"></a><a class="code" href="namespacecv.html#a6a31c291e295a1c7a4f66159705270d1">02277</a> <span class="keyword">class </span><a class="code" href="classcv_1_1_generic_descriptor_matcher.html">GenericDescriptorMatcher</a>;
<a name="l02278"></a>02278 <span class="keyword">typedef</span> <a class="code" href="classcv_1_1_generic_descriptor_matcher.html">GenericDescriptorMatcher</a> <a class="code" href="namespacecv.html#a6a31c291e295a1c7a4f66159705270d1">GenericDescriptorMatch</a>;
<a name="l02279"></a>02279 
<a name="l02280"></a><a class="code" href="classcv_1_1_generic_descriptor_matcher.html">02280</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_generic_descriptor_matcher.html">GenericDescriptorMatcher</a>
<a name="l02281"></a>02281 {
<a name="l02282"></a>02282 <span class="keyword">public</span>:
<a name="l02283"></a>02283     <a class="code" href="classcv_1_1_generic_descriptor_matcher.html">GenericDescriptorMatcher</a>();
<a name="l02284"></a>02284     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_generic_descriptor_matcher.html">GenericDescriptorMatcher</a>();
<a name="l02285"></a>02285 
<a name="l02286"></a>02286     <span class="comment">/*</span>
<a name="l02287"></a>02287 <span class="comment">     * Add train collection: images and keypoints from them.</span>
<a name="l02288"></a>02288 <span class="comment">     * images       A set of train images.</span>
<a name="l02289"></a>02289 <span class="comment">     * ketpoints    Keypoint collection that have been detected on train images.</span>
<a name="l02290"></a>02290 <span class="comment">     *</span>
<a name="l02291"></a>02291 <span class="comment">     * Keypoints for which a descriptor cannot be computed are removed. Such keypoints</span>
<a name="l02292"></a>02292 <span class="comment">     * must be filtered in this method befor adding keypoints to train collection &quot;trainPointCollection&quot;.</span>
<a name="l02293"></a>02293 <span class="comment">     * If inheritor class need perform such prefiltering the method add() must be overloaded.</span>
<a name="l02294"></a>02294 <span class="comment">     * In the other class methods programmer has access to the train keypoints by a constant link.</span>
<a name="l02295"></a>02295 <span class="comment">     */</span>
<a name="l02296"></a>02296     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a5fe1c189a97c40a07be2b31a7bc90e9e" title="adds one matrix to another (dst = src1 + src2)">add</a>( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; images,
<a name="l02297"></a>02297                       vector&lt;vector&lt;KeyPoint&gt; &gt;&amp; keypoints );
<a name="l02298"></a>02298 
<a name="l02299"></a>02299     <span class="keyword">const</span> vector&lt;Mat&gt;&amp; getTrainImages() <span class="keyword">const</span>;
<a name="l02300"></a>02300     <span class="keyword">const</span> vector&lt;vector&lt;KeyPoint&gt; &gt;&amp; getTrainKeypoints() <span class="keyword">const</span>;
<a name="l02301"></a>02301 
<a name="l02302"></a>02302     <span class="comment">/*</span>
<a name="l02303"></a>02303 <span class="comment">     * Clear images and keypoints storing in train collection.</span>
<a name="l02304"></a>02304 <span class="comment">     */</span>
<a name="l02305"></a>02305     <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear();
<a name="l02306"></a>02306     <span class="comment">/*</span>
<a name="l02307"></a>02307 <span class="comment">     * Returns true if matcher supports mask to match descriptors.</span>
<a name="l02308"></a>02308 <span class="comment">     */</span>
<a name="l02309"></a>02309     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> isMaskSupported() = 0;
<a name="l02310"></a>02310     <span class="comment">/*</span>
<a name="l02311"></a>02311 <span class="comment">     * Train some inner structures (e.g. flann index or decision trees).</span>
<a name="l02312"></a>02312 <span class="comment">     * train() methods is run every time in matching methods. So the method implementation</span>
<a name="l02313"></a>02313 <span class="comment">     * should has a check whether these inner structures need be trained/retrained or not.</span>
<a name="l02314"></a>02314 <span class="comment">     */</span>
<a name="l02315"></a>02315     <span class="keyword">virtual</span> <span class="keywordtype">void</span> train();
<a name="l02316"></a>02316 
<a name="l02317"></a>02317     <span class="comment">/*</span>
<a name="l02318"></a>02318 <span class="comment">     * Classifies query keypoints.</span>
<a name="l02319"></a>02319 <span class="comment">     * queryImage    The query image</span>
<a name="l02320"></a>02320 <span class="comment">     * queryKeypoints   Keypoints from the query image</span>
<a name="l02321"></a>02321 <span class="comment">     * trainImage    The train image</span>
<a name="l02322"></a>02322 <span class="comment">     * trainKeypoints   Keypoints from the train image</span>
<a name="l02323"></a>02323 <span class="comment">     */</span>
<a name="l02324"></a>02324     <span class="comment">// Classify keypoints from query image under one train image.</span>
<a name="l02325"></a>02325     <span class="keywordtype">void</span> classify( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02326"></a>02326                            <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; trainImage, vector&lt;KeyPoint&gt;&amp; trainKeypoints ) <span class="keyword">const</span>;
<a name="l02327"></a>02327     <span class="comment">// Classify keypoints from query image under train image collection.</span>
<a name="l02328"></a>02328     <span class="keywordtype">void</span> classify( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints );
<a name="l02329"></a>02329 
<a name="l02330"></a>02330     <span class="comment">/*</span>
<a name="l02331"></a>02331 <span class="comment">     * Group of methods to match keypoints from image pair.</span>
<a name="l02332"></a>02332 <span class="comment">     * Keypoints for which a descriptor cannot be computed are removed.</span>
<a name="l02333"></a>02333 <span class="comment">     * train() method is called here.</span>
<a name="l02334"></a>02334 <span class="comment">     */</span>
<a name="l02335"></a>02335     <span class="comment">// Find one best match for each query descriptor (if mask is empty).</span>
<a name="l02336"></a>02336     <span class="keywordtype">void</span> match( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02337"></a>02337                 <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; trainImage, vector&lt;KeyPoint&gt;&amp; trainKeypoints,
<a name="l02338"></a>02338                 vector&lt;DMatch&gt;&amp; matches, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>() ) <span class="keyword">const</span>;
<a name="l02339"></a>02339     <span class="comment">// Find k best matches for each query keypoint (in increasing order of distances).</span>
<a name="l02340"></a>02340     <span class="comment">// compactResult is used when mask is not empty. If compactResult is false matches</span>
<a name="l02341"></a>02341     <span class="comment">// vector will have the same size as queryDescriptors rows.</span>
<a name="l02342"></a>02342     <span class="comment">// If compactResult is true matches vector will not contain matches for fully masked out query descriptors.</span>
<a name="l02343"></a>02343     <span class="keywordtype">void</span> knnMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02344"></a>02344                    <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; trainImage, vector&lt;KeyPoint&gt;&amp; trainKeypoints,
<a name="l02345"></a>02345                    vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02346"></a>02346                    <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l02347"></a>02347     <span class="comment">// Find best matches for each query descriptor which have distance less than maxDistance (in increasing order of distances).</span>
<a name="l02348"></a>02348     <span class="keywordtype">void</span> radiusMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02349"></a>02349                       <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; trainImage, vector&lt;KeyPoint&gt;&amp; trainKeypoints,
<a name="l02350"></a>02350                       vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02351"></a>02351                       <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; <a class="code" href="namespacecv.html#a2efcf76b229625667f9c282f913f7d07">mask</a>=<a class="code" href="classcv_1_1_mat.html">Mat</a>(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l02352"></a>02352     <span class="comment">/*</span>
<a name="l02353"></a>02353 <span class="comment">     * Group of methods to match keypoints from one image to image set.</span>
<a name="l02354"></a>02354 <span class="comment">     * See description of similar methods for matching image pair above.</span>
<a name="l02355"></a>02355 <span class="comment">     */</span>
<a name="l02356"></a>02356     <span class="keywordtype">void</span> match( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02357"></a>02357                 vector&lt;DMatch&gt;&amp; matches, <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;() );
<a name="l02358"></a>02358     <span class="keywordtype">void</span> knnMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02359"></a>02359                    vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02360"></a>02360                    <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> );
<a name="l02361"></a>02361     <span class="keywordtype">void</span> radiusMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02362"></a>02362                       vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02363"></a>02363                       <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> );
<a name="l02364"></a>02364 
<a name="l02365"></a>02365     <span class="comment">// Reads matcher object from a file node</span>
<a name="l02366"></a>02366     <span class="keyword">virtual</span> <span class="keywordtype">void</span> read( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; );
<a name="l02367"></a>02367     <span class="comment">// Writes matcher object to a file storage</span>
<a name="l02368"></a>02368     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; ) <span class="keyword">const</span>;
<a name="l02369"></a>02369 
<a name="l02370"></a>02370     <span class="comment">// Clone the matcher. If emptyTrainData is false the method create deep copy of the object, i.e. copies</span>
<a name="l02371"></a>02371     <span class="comment">// both parameters and train data. If emptyTrainData is true the method create object copy with current parameters</span>
<a name="l02372"></a>02372     <span class="comment">// but with empty train data.</span>
<a name="l02373"></a>02373     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;GenericDescriptorMatcher&gt;</a> clone( <span class="keywordtype">bool</span> emptyTrainData=<span class="keyword">false</span> ) <span class="keyword">const</span> = 0;
<a name="l02374"></a>02374 
<a name="l02375"></a>02375     <span class="keyword">static</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;GenericDescriptorMatcher&gt;</a> create( <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; genericDescritptorMatcherType,
<a name="l02376"></a>02376                                                  <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;paramsFilename=<span class="keywordtype">string</span>() );
<a name="l02377"></a>02377 
<a name="l02378"></a>02378 <span class="keyword">protected</span>:
<a name="l02379"></a>02379     <span class="comment">// In fact the matching is implemented only by the following two methods. These methods suppose</span>
<a name="l02380"></a>02380     <span class="comment">// that the class object has been trained already. Public match methods call these methods</span>
<a name="l02381"></a>02381     <span class="comment">// after calling train().</span>
<a name="l02382"></a>02382     <span class="keyword">virtual</span> <span class="keywordtype">void</span> knnMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02383"></a>02383                                vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02384"></a>02384                                <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult ) = 0;
<a name="l02385"></a>02385     <span class="keyword">virtual</span> <span class="keywordtype">void</span> radiusMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02386"></a>02386                                   vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02387"></a>02387                                   <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult ) = 0;
<a name="l02388"></a>02388     <span class="comment">/*</span>
<a name="l02389"></a>02389 <span class="comment">     * A storage for sets of keypoints together with corresponding images and class IDs</span>
<a name="l02390"></a>02390 <span class="comment">     */</span>
<a name="l02391"></a><a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html">02391</a>     <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html">KeyPointCollection</a>
<a name="l02392"></a>02392     {
<a name="l02393"></a>02393     <span class="keyword">public</span>:
<a name="l02394"></a>02394         <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html">KeyPointCollection</a>();
<a name="l02395"></a>02395         <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html">KeyPointCollection</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html">KeyPointCollection</a>&amp; collection );
<a name="l02396"></a>02396         <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a5fe1c189a97c40a07be2b31a7bc90e9e" title="adds one matrix to another (dst = src1 + src2)">add</a>( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; images, <span class="keyword">const</span> vector&lt;vector&lt;KeyPoint&gt; &gt;&amp; keypoints );
<a name="l02397"></a>02397         <span class="keywordtype">void</span> clear();
<a name="l02398"></a>02398 
<a name="l02399"></a>02399         <span class="comment">// Returns the total number of keypoints in the collection</span>
<a name="l02400"></a>02400         <span class="keywordtype">size_t</span> keypointCount() <span class="keyword">const</span>;
<a name="l02401"></a>02401         <span class="keywordtype">size_t</span> imageCount() <span class="keyword">const</span>;
<a name="l02402"></a>02402 
<a name="l02403"></a>02403         <span class="keyword">const</span> vector&lt;vector&lt;KeyPoint&gt; &gt;&amp; getKeypoints() <span class="keyword">const</span>;
<a name="l02404"></a>02404         <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; getKeypoints( <span class="keywordtype">int</span> imgIdx ) <span class="keyword">const</span>;
<a name="l02405"></a>02405         <span class="keyword">const</span> <a class="code" href="classcv_1_1_key_point.html">KeyPoint</a>&amp; getKeyPoint( <span class="keywordtype">int</span> imgIdx, <span class="keywordtype">int</span> localPointIdx ) <span class="keyword">const</span>;
<a name="l02406"></a>02406         <span class="keyword">const</span> <a class="code" href="classcv_1_1_key_point.html">KeyPoint</a>&amp; getKeyPoint( <span class="keywordtype">int</span> globalPointIdx ) <span class="keyword">const</span>;
<a name="l02407"></a>02407         <span class="keywordtype">void</span> getLocalIdx( <span class="keywordtype">int</span> globalPointIdx, <span class="keywordtype">int</span>&amp; imgIdx, <span class="keywordtype">int</span>&amp; localPointIdx ) <span class="keyword">const</span>;
<a name="l02408"></a>02408 
<a name="l02409"></a>02409         <span class="keyword">const</span> vector&lt;Mat&gt;&amp; getImages() <span class="keyword">const</span>;
<a name="l02410"></a>02410         <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; getImage( <span class="keywordtype">int</span> imgIdx ) <span class="keyword">const</span>;
<a name="l02411"></a>02411 
<a name="l02412"></a>02412     <span class="keyword">protected</span>:
<a name="l02413"></a><a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html#a6cd45232fe7d6cbfc720f5475ba62218">02413</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html#a6cd45232fe7d6cbfc720f5475ba62218">pointCount</a>;
<a name="l02414"></a>02414 
<a name="l02415"></a><a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html#a56f4003deea32cac6e7f19818d61983c">02415</a>         vector&lt;Mat&gt; <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html#a56f4003deea32cac6e7f19818d61983c">images</a>;
<a name="l02416"></a><a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html#a5430eccdca179c4a3ff43eeb516a3c6b">02416</a>         vector&lt;vector&lt;KeyPoint&gt; &gt; <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html#a5430eccdca179c4a3ff43eeb516a3c6b">keypoints</a>;
<a name="l02417"></a>02417         <span class="comment">// global indices of the first points in each image, startIndices.size() = keypoints.size()</span>
<a name="l02418"></a><a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html#aae275d7f1de126e9cfe8761151d34f7e">02418</a>         vector&lt;int&gt; <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html#aae275d7f1de126e9cfe8761151d34f7e">startIndices</a>;
<a name="l02419"></a>02419 
<a name="l02420"></a>02420     <span class="keyword">private</span>:
<a name="l02421"></a>02421         <span class="keyword">static</span> <a class="code" href="classcv_1_1_mat.html">Mat</a> clone_op( <a class="code" href="classcv_1_1_mat.html">Mat</a> m ) { <span class="keywordflow">return</span> m.<a class="code" href="classcv_1_1_mat.html#afb01ff6b2231b72f55618bfb66a5326b" title="returns deep copy of the matrix, i.e. the data is copied">clone</a>(); }
<a name="l02422"></a>02422     };
<a name="l02423"></a>02423 
<a name="l02424"></a><a class="code" href="classcv_1_1_generic_descriptor_matcher.html#ae03d189ce147318f5572b2e1e5bb521e">02424</a>     <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html">KeyPointCollection</a> <a class="code" href="classcv_1_1_generic_descriptor_matcher.html#ae03d189ce147318f5572b2e1e5bb521e">trainPointCollection</a>;
<a name="l02425"></a>02425 };
<a name="l02426"></a>02426 
<a name="l02427"></a>02427 <span class="comment">/*</span>
<a name="l02428"></a>02428 <span class="comment"> *  OneWayDescriptorMatcher</span>
<a name="l02429"></a>02429 <span class="comment"> */</span>
<a name="l02430"></a><a class="code" href="namespacecv.html#a65db8d0a6d7276c360ed27a4c85cab03">02430</a> <span class="keyword">class </span><a class="code" href="classcv_1_1_one_way_descriptor_matcher.html">OneWayDescriptorMatcher</a>;
<a name="l02431"></a>02431 <span class="keyword">typedef</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher.html">OneWayDescriptorMatcher</a> <a class="code" href="namespacecv.html#a65db8d0a6d7276c360ed27a4c85cab03">OneWayDescriptorMatch</a>;
<a name="l02432"></a>02432 
<a name="l02433"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher.html">02433</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_one_way_descriptor_matcher.html">OneWayDescriptorMatcher</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_generic_descriptor_matcher.html">GenericDescriptorMatcher</a>
<a name="l02434"></a>02434 {
<a name="l02435"></a>02435 <span class="keyword">public</span>:
<a name="l02436"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html">02436</a>     <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html">Params</a>
<a name="l02437"></a>02437     {
<a name="l02438"></a>02438     <span class="keyword">public</span>:
<a name="l02439"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#afe9ba7c833615e52990d5ea47bc7d6b6">02439</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> POSE_COUNT = 500;
<a name="l02440"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a030eac6d016f1066f95202dd3c42e510">02440</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> PATCH_WIDTH = 24;
<a name="l02441"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#ab6f73ef0e70f23c52291e970de14013a">02441</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> PATCH_HEIGHT = 24;
<a name="l02442"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a41b5b450637c047649bf0a08efb30c4e">02442</a>         <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a41b5b450637c047649bf0a08efb30c4e">GET_MIN_SCALE</a>() { <span class="keywordflow">return</span> 0.7f; }
<a name="l02443"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#ad4697ec40e262082194bbc2baa1dbc6c">02443</a>         <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#ad4697ec40e262082194bbc2baa1dbc6c">GET_MAX_SCALE</a>() { <span class="keywordflow">return</span> 1.5f; }
<a name="l02444"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#ace48d9be5bf1569a068faf233ce6de11">02444</a>         <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#ace48d9be5bf1569a068faf233ce6de11">GET_STEP_SCALE</a>() { <span class="keywordflow">return</span> 1.2f; }
<a name="l02445"></a>02445 
<a name="l02446"></a>02446         <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html">Params</a>( <span class="keywordtype">int</span> poseCount = POSE_COUNT,
<a name="l02447"></a>02447                 <a class="code" href="classcv_1_1_size__.html">Size</a> patchSize = <a class="code" href="namespacecv.html#a346f563897249351a34549137c8532a0">Size</a>(PATCH_WIDTH, PATCH_HEIGHT),
<a name="l02448"></a>02448                 <span class="keywordtype">string</span> pcaFilename = <span class="keywordtype">string</span>(),
<a name="l02449"></a>02449                 <span class="keywordtype">string</span> trainPath = <span class="keywordtype">string</span>(), <span class="keywordtype">string</span> trainImagesList = <span class="keywordtype">string</span>(),
<a name="l02450"></a>02450                 <span class="keywordtype">float</span> minScale = GET_MIN_SCALE(), <span class="keywordtype">float</span> maxScale = GET_MAX_SCALE(),
<a name="l02451"></a>02451                 <span class="keywordtype">float</span> stepScale = GET_STEP_SCALE() );
<a name="l02452"></a>02452 
<a name="l02453"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a7f149030ee136a6f8f30be6d4ef41587">02453</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a7f149030ee136a6f8f30be6d4ef41587">poseCount</a>;
<a name="l02454"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#ac66cdab3c81898c472ac6397e1044474">02454</a>         <a class="code" href="classcv_1_1_size__.html">Size</a> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#ac66cdab3c81898c472ac6397e1044474">patchSize</a>;
<a name="l02455"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a5f673a5ded3dd8bd592a811776029a84">02455</a>         <span class="keywordtype">string</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a5f673a5ded3dd8bd592a811776029a84">pcaFilename</a>;
<a name="l02456"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a0d5d169bbe15b46ac3367af9ffe230c5">02456</a>         <span class="keywordtype">string</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a0d5d169bbe15b46ac3367af9ffe230c5">trainPath</a>;
<a name="l02457"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a0b450552f0e9d1e0febd7cd674d3335e">02457</a>         <span class="keywordtype">string</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a0b450552f0e9d1e0febd7cd674d3335e">trainImagesList</a>;
<a name="l02458"></a>02458 
<a name="l02459"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a6fea216dee92087fd1b70deb3ea88040">02459</a>         <span class="keywordtype">float</span> minScale, maxScale, <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a6fea216dee92087fd1b70deb3ea88040">stepScale</a>;
<a name="l02460"></a>02460     };
<a name="l02461"></a>02461 
<a name="l02462"></a>02462     <a class="code" href="classcv_1_1_one_way_descriptor_matcher.html">OneWayDescriptorMatcher</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html">Params</a>&amp; params=<a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html">Params</a>() );
<a name="l02463"></a>02463     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_one_way_descriptor_matcher.html">OneWayDescriptorMatcher</a>();
<a name="l02464"></a>02464 
<a name="l02465"></a>02465     <span class="keywordtype">void</span> initialize( <span class="keyword">const</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html">Params</a>&amp; params, <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;OneWayDescriptorBase&gt;</a>&amp; base=<a class="code" href="classcv_1_1_ptr.html">Ptr&lt;OneWayDescriptorBase&gt;</a>() );
<a name="l02466"></a>02466 
<a name="l02467"></a>02467     <span class="comment">// Clears keypoints storing in collection and OneWayDescriptorBase</span>
<a name="l02468"></a>02468     <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear();
<a name="l02469"></a>02469 
<a name="l02470"></a>02470     <span class="keyword">virtual</span> <span class="keywordtype">void</span> train();
<a name="l02471"></a>02471 
<a name="l02472"></a>02472     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> isMaskSupported();
<a name="l02473"></a>02473 
<a name="l02474"></a>02474     <span class="keyword">virtual</span> <span class="keywordtype">void</span> read( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a> &amp;fn );
<a name="l02475"></a>02475     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l02476"></a>02476 
<a name="l02477"></a>02477     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;GenericDescriptorMatcher&gt;</a> clone( <span class="keywordtype">bool</span> emptyTrainData=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l02478"></a>02478 
<a name="l02479"></a>02479 <span class="keyword">protected</span>:
<a name="l02480"></a>02480     <span class="comment">// Matches a set of keypoints from a single image of the training set. A rectangle with a center in a keypoint</span>
<a name="l02481"></a>02481     <span class="comment">// and size (patch_width/2*scale, patch_height/2*scale) is cropped from the source image for each</span>
<a name="l02482"></a>02482     <span class="comment">// keypoint. scale is iterated from DescriptorOneWayParams::min_scale to DescriptorOneWayParams::max_scale.</span>
<a name="l02483"></a>02483     <span class="comment">// The minimum distance to each training patch with all its affine poses is found over all scales.</span>
<a name="l02484"></a>02484     <span class="comment">// The class ID of a match is returned for each keypoint. The distance is calculated over PCA components</span>
<a name="l02485"></a>02485     <span class="comment">// loaded with DescriptorOneWay::Initialize, kd tree is used for finding minimum distances.</span>
<a name="l02486"></a>02486     <span class="keyword">virtual</span> <span class="keywordtype">void</span> knnMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02487"></a>02487                                vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02488"></a>02488                                <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02489"></a>02489     <span class="keyword">virtual</span> <span class="keywordtype">void</span> radiusMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02490"></a>02490                                   vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02491"></a>02491                                   <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02492"></a>02492 
<a name="l02493"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher.html#a15133d1c1c14cc9beb39d514133e4c29">02493</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;OneWayDescriptorBase&gt;</a> <a class="code" href="classcv_1_1_one_way_descriptor_matcher.html#a15133d1c1c14cc9beb39d514133e4c29">base</a>;
<a name="l02494"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher.html#a133feede492a09ce3dc29a726c68c534">02494</a>     <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html">Params</a> <a class="code" href="classcv_1_1_one_way_descriptor_matcher.html#a133feede492a09ce3dc29a726c68c534">params</a>;
<a name="l02495"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher.html#af5464b1a4b0d5d8420d8ec9707e2c7f6">02495</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher.html#af5464b1a4b0d5d8420d8ec9707e2c7f6">prevTrainCount</a>;
<a name="l02496"></a>02496 };
<a name="l02497"></a>02497 
<a name="l02498"></a>02498 <span class="comment">/*</span>
<a name="l02499"></a>02499 <span class="comment"> *  FernDescriptorMatcher</span>
<a name="l02500"></a>02500 <span class="comment"> */</span>
<a name="l02501"></a><a class="code" href="namespacecv.html#a545f14bb423cad0765fab6a9f6aaadaa">02501</a> <span class="keyword">class </span><a class="code" href="classcv_1_1_fern_descriptor_matcher.html">FernDescriptorMatcher</a>;
<a name="l02502"></a>02502 <span class="keyword">typedef</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher.html">FernDescriptorMatcher</a> <a class="code" href="namespacecv.html#a545f14bb423cad0765fab6a9f6aaadaa">FernDescriptorMatch</a>;
<a name="l02503"></a>02503 
<a name="l02504"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher.html">02504</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_fern_descriptor_matcher.html">FernDescriptorMatcher</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_generic_descriptor_matcher.html">GenericDescriptorMatcher</a>
<a name="l02505"></a>02505 {
<a name="l02506"></a>02506 <span class="keyword">public</span>:
<a name="l02507"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html">02507</a>     <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html">Params</a>
<a name="l02508"></a>02508     {
<a name="l02509"></a>02509     <span class="keyword">public</span>:
<a name="l02510"></a>02510         <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html">Params</a>( <span class="keywordtype">int</span> nclasses=0,
<a name="l02511"></a>02511                 <span class="keywordtype">int</span> patchSize=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002a24404de82f8919357a5f8e79ebbd9d1a">FernClassifier::PATCH_SIZE</a>,
<a name="l02512"></a>02512                 <span class="keywordtype">int</span> signatureSize=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002a4278805e49ddbabb97b52e29973b9d85">FernClassifier::DEFAULT_SIGNATURE_SIZE</a>,
<a name="l02513"></a>02513                 <span class="keywordtype">int</span> nstructs=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002ab6933cb0baa7f1218196052c4dbfe66c">FernClassifier::DEFAULT_STRUCTS</a>,
<a name="l02514"></a>02514                 <span class="keywordtype">int</span> structSize=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002ae6b19b111a3c9a6fd339907e6118d707">FernClassifier::DEFAULT_STRUCT_SIZE</a>,
<a name="l02515"></a>02515                 <span class="keywordtype">int</span> nviews=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002a333a37941aa3a8a7039ad179cb124216">FernClassifier::DEFAULT_VIEWS</a>,
<a name="l02516"></a>02516                 <span class="keywordtype">int</span> compressionMethod=<a class="code" href="classcv_1_1_fern_classifier.html#a26404ca20fc55943c1c830121eb8a002acc4c78b39eb783cc2b4fdd9fe1e87588">FernClassifier::COMPRESSION_NONE</a>,
<a name="l02517"></a>02517                 <span class="keyword">const</span> <a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>&amp; patchGenerator=<a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a>() );
<a name="l02518"></a>02518 
<a name="l02519"></a>02519         <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html">Params</a>( <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; filename );
<a name="l02520"></a>02520 
<a name="l02521"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#afce393801e5f2e968f413fb0a10449b7">02521</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#afce393801e5f2e968f413fb0a10449b7">nclasses</a>;
<a name="l02522"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a584a30dedeb05d405b0ca72ce11e9f2b">02522</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a584a30dedeb05d405b0ca72ce11e9f2b">patchSize</a>;
<a name="l02523"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a7cc0c9530f2409a887f9825dd8eb2e1e">02523</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a7cc0c9530f2409a887f9825dd8eb2e1e">signatureSize</a>;
<a name="l02524"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a31c03780ab26123ddcdc1ee569ffc4a7">02524</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a31c03780ab26123ddcdc1ee569ffc4a7">nstructs</a>;
<a name="l02525"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a929470c0b3d8d368c47b785e7bceb96e">02525</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a929470c0b3d8d368c47b785e7bceb96e">structSize</a>;
<a name="l02526"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a581315a4df6cd6bd12685f4fba78e410">02526</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a581315a4df6cd6bd12685f4fba78e410">nviews</a>;
<a name="l02527"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#adbf2b40ee2de360fef7910d4f596f551">02527</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#adbf2b40ee2de360fef7910d4f596f551">compressionMethod</a>;
<a name="l02528"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a65b27f9924d438ff122d051ff64bcbb5">02528</a>         <a class="code" href="classcv_1_1_patch_generator.html">PatchGenerator</a> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a65b27f9924d438ff122d051ff64bcbb5">patchGenerator</a>;
<a name="l02529"></a>02529 
<a name="l02530"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a0c03617635da4f943ba7fff0a16d855c">02530</a>         <span class="keywordtype">string</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a0c03617635da4f943ba7fff0a16d855c">filename</a>;
<a name="l02531"></a>02531     };
<a name="l02532"></a>02532 
<a name="l02533"></a>02533     <a class="code" href="classcv_1_1_fern_descriptor_matcher.html">FernDescriptorMatcher</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html">Params</a>&amp; params=<a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html">Params</a>() );
<a name="l02534"></a>02534     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_fern_descriptor_matcher.html">FernDescriptorMatcher</a>();
<a name="l02535"></a>02535 
<a name="l02536"></a>02536     <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear();
<a name="l02537"></a>02537 
<a name="l02538"></a>02538     <span class="keyword">virtual</span> <span class="keywordtype">void</span> train();
<a name="l02539"></a>02539 
<a name="l02540"></a>02540     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> isMaskSupported();
<a name="l02541"></a>02541 
<a name="l02542"></a>02542     <span class="keyword">virtual</span> <span class="keywordtype">void</span> read( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a> &amp;fn );
<a name="l02543"></a>02543     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l02544"></a>02544     
<a name="l02545"></a>02545     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;GenericDescriptorMatcher&gt;</a> clone( <span class="keywordtype">bool</span> emptyTrainData=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l02546"></a>02546 
<a name="l02547"></a>02547 <span class="keyword">protected</span>:
<a name="l02548"></a>02548     <span class="keyword">virtual</span> <span class="keywordtype">void</span> knnMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02549"></a>02549                                vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02550"></a>02550                                <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02551"></a>02551     <span class="keyword">virtual</span> <span class="keywordtype">void</span> radiusMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02552"></a>02552                                   vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02553"></a>02553                                   <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02554"></a>02554 
<a name="l02555"></a>02555     <span class="keywordtype">void</span> trainFernClassifier();
<a name="l02556"></a>02556     <span class="keywordtype">void</span> calcBestProbAndMatchIdx( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, <span class="keyword">const</span> <a class="code" href="classcv_1_1_point__.html">Point2f</a>&amp; pt,
<a name="l02557"></a>02557                                   <span class="keywordtype">float</span>&amp; bestProb, <span class="keywordtype">int</span>&amp; bestMatchIdx, vector&lt;float&gt;&amp; signature );
<a name="l02558"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher.html#aefa1380c6454cab847e6cd4b87b9ce04">02558</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;FernClassifier&gt;</a> <a class="code" href="classcv_1_1_fern_descriptor_matcher.html#aefa1380c6454cab847e6cd4b87b9ce04">classifier</a>;
<a name="l02559"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher.html#ab28afe87b16259911db05c86f984465d">02559</a>     <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html">Params</a> <a class="code" href="classcv_1_1_fern_descriptor_matcher.html#ab28afe87b16259911db05c86f984465d">params</a>;
<a name="l02560"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher.html#a53d50fd092627ec06b62a48e5a64dcda">02560</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher.html#a53d50fd092627ec06b62a48e5a64dcda">prevTrainCount</a>;
<a name="l02561"></a>02561 };
<a name="l02562"></a>02562 
<a name="l02563"></a>02563 <span class="comment">/****************************************************************************************\</span>
<a name="l02564"></a>02564 <span class="comment">*                                VectorDescriptorMatcher                                 *</span>
<a name="l02565"></a>02565 <span class="comment">\****************************************************************************************/</span>
<a name="l02566"></a>02566 
<a name="l02567"></a>02567 <span class="comment">/*</span>
<a name="l02568"></a>02568 <span class="comment"> *  A class used for matching descriptors that can be described as vectors in a finite-dimensional space</span>
<a name="l02569"></a>02569 <span class="comment"> */</span>
<a name="l02570"></a><a class="code" href="namespacecv.html#a70b3c5e1182198716609db7604acadb4">02570</a> <span class="keyword">class </span><a class="code" href="classcv_1_1_vector_descriptor_matcher.html">VectorDescriptorMatcher</a>;
<a name="l02571"></a>02571 <span class="keyword">typedef</span> <a class="code" href="classcv_1_1_vector_descriptor_matcher.html">VectorDescriptorMatcher</a> <a class="code" href="namespacecv.html#a70b3c5e1182198716609db7604acadb4">VectorDescriptorMatch</a>;
<a name="l02572"></a>02572 
<a name="l02573"></a><a class="code" href="classcv_1_1_vector_descriptor_matcher.html">02573</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_vector_descriptor_matcher.html">VectorDescriptorMatcher</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_generic_descriptor_matcher.html">GenericDescriptorMatcher</a>
<a name="l02574"></a>02574 {
<a name="l02575"></a>02575 <span class="keyword">public</span>:
<a name="l02576"></a>02576     <a class="code" href="classcv_1_1_vector_descriptor_matcher.html">VectorDescriptorMatcher</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorExtractor&gt;</a>&amp; extractor, <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a>&amp; matcher );
<a name="l02577"></a>02577     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_vector_descriptor_matcher.html">VectorDescriptorMatcher</a>();
<a name="l02578"></a>02578 
<a name="l02579"></a>02579     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a5fe1c189a97c40a07be2b31a7bc90e9e" title="adds one matrix to another (dst = src1 + src2)">add</a>( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; imgCollection,
<a name="l02580"></a>02580                       vector&lt;vector&lt;KeyPoint&gt; &gt;&amp; pointCollection );
<a name="l02581"></a>02581 
<a name="l02582"></a>02582     <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear();
<a name="l02583"></a>02583 
<a name="l02584"></a>02584     <span class="keyword">virtual</span> <span class="keywordtype">void</span> train();
<a name="l02585"></a>02585 
<a name="l02586"></a>02586     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> isMaskSupported();
<a name="l02587"></a>02587 
<a name="l02588"></a>02588     <span class="keyword">virtual</span> <span class="keywordtype">void</span> read( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html">FileNode</a>&amp; fn );
<a name="l02589"></a>02589     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l02590"></a>02590 
<a name="l02591"></a>02591     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;GenericDescriptorMatcher&gt;</a> clone( <span class="keywordtype">bool</span> emptyTrainData=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l02592"></a>02592 
<a name="l02593"></a>02593 <span class="keyword">protected</span>:
<a name="l02594"></a>02594     <span class="keyword">virtual</span> <span class="keywordtype">void</span> knnMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02595"></a>02595                                vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02596"></a>02596                                <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02597"></a>02597     <span class="keyword">virtual</span> <span class="keywordtype">void</span> radiusMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02598"></a>02598                                   vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02599"></a>02599                                   <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02600"></a>02600 
<a name="l02601"></a><a class="code" href="classcv_1_1_vector_descriptor_matcher.html#aadc74598817bb03809359305021c980e">02601</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorExtractor&gt;</a> <a class="code" href="classcv_1_1_vector_descriptor_matcher.html#aadc74598817bb03809359305021c980e">extractor</a>;
<a name="l02602"></a><a class="code" href="classcv_1_1_vector_descriptor_matcher.html#aa02a4318758a02b9e3fd8688312a2604">02602</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a> <a class="code" href="classcv_1_1_vector_descriptor_matcher.html#aa02a4318758a02b9e3fd8688312a2604">matcher</a>;
<a name="l02603"></a>02603 };
<a name="l02604"></a>02604 
<a name="l02605"></a>02605 <span class="comment">/****************************************************************************************\</span>
<a name="l02606"></a>02606 <span class="comment">*                                   Drawing functions                                    *</span>
<a name="l02607"></a>02607 <span class="comment">\****************************************************************************************/</span>
<a name="l02608"></a><a class="code" href="structcv_1_1_draw_matches_flags.html">02608</a> <span class="keyword">struct </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="structcv_1_1_draw_matches_flags.html">DrawMatchesFlags</a>
<a name="l02609"></a>02609 {
<a name="l02610"></a><a class="code" href="structcv_1_1_draw_matches_flags.html#acc7fdff4df748e604c7d1a808650886aa48e1d6053ba88b4f14bf1342e6795da6">02610</a>     <span class="keyword">enum</span>{ DEFAULT = 0, <span class="comment">// Output image matrix will be created (Mat::create),</span>
<a name="l02611"></a>02611                        <span class="comment">// i.e. existing memory of output image may be reused.</span>
<a name="l02612"></a>02612                        <span class="comment">// Two source image, matches and single keypoints will be drawn.</span>
<a name="l02613"></a>02613                        <span class="comment">// For each keypoint only the center point will be drawn (without</span>
<a name="l02614"></a>02614                        <span class="comment">// the circle around keypoint with keypoint size and orientation).</span>
<a name="l02615"></a><a class="code" href="structcv_1_1_draw_matches_flags.html#acc7fdff4df748e604c7d1a808650886aae3789c743c407146570e88f2f3db5cc1">02615</a>           DRAW_OVER_OUTIMG = 1, <span class="comment">// Output image matrix will not be created (Mat::create).</span>
<a name="l02616"></a>02616                                 <span class="comment">// Matches will be drawn on existing content of output image.</span>
<a name="l02617"></a><a class="code" href="structcv_1_1_draw_matches_flags.html#acc7fdff4df748e604c7d1a808650886aa846e25aca57b8bddd219d83cef3a06ac">02617</a>           NOT_DRAW_SINGLE_POINTS = 2, <span class="comment">// Single keypoints will not be drawn.</span>
<a name="l02618"></a><a class="code" href="structcv_1_1_draw_matches_flags.html#acc7fdff4df748e604c7d1a808650886aac22e71af97a4741038f2fc47437371b8">02618</a>           DRAW_RICH_KEYPOINTS = 4 <span class="comment">// For each keypoint the circle around keypoint with keypoint size and</span>
<a name="l02619"></a>02619                                   <span class="comment">// orientation will be drawn.</span>
<a name="l02620"></a>02620         };
<a name="l02621"></a>02621 };
<a name="l02622"></a>02622 
<a name="l02623"></a>02623 <span class="comment">// Draw keypoints.</span>
<a name="l02624"></a>02624 <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#aa6521f418c62fbfbeab8c7461395b708">drawKeypoints</a>( <span class="keyword">const</span> Mat&amp; image, <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints, Mat&amp; outImg,
<a name="l02625"></a>02625                                <span class="keyword">const</span> <a class="code" href="namespacecv.html#a599fe92e910c027be274233eccad7beb">Scalar</a>&amp; color=<a class="code" href="classcv_1_1_scalar__.html#ae7411e333e610ee9d645f53d87a55757" title="returns a scalar with all elements set to v0">Scalar::all</a>(-1), <span class="keywordtype">int</span> <a class="code" href="highgui__c_8h.html#a537e9e30547f68fff6358cc410095bb9">flags</a>=<a class="code" href="structcv_1_1_draw_matches_flags.html#acc7fdff4df748e604c7d1a808650886aa48e1d6053ba88b4f14bf1342e6795da6">DrawMatchesFlags::DEFAULT</a> );
<a name="l02626"></a>02626 
<a name="l02627"></a>02627 <span class="comment">// Draws matches of keypints from two images on output image.</span>
<a name="l02628"></a>02628 <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a18aabb4c0c494b3a5609a93be2c37642">drawMatches</a>( <span class="keyword">const</span> Mat&amp; img1, <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints1,
<a name="l02629"></a>02629                              <span class="keyword">const</span> Mat&amp; img2, <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints2,
<a name="l02630"></a>02630                              <span class="keyword">const</span> vector&lt;DMatch&gt;&amp; matches1to2, Mat&amp; outImg,
<a name="l02631"></a>02631                              <span class="keyword">const</span> <a class="code" href="namespacecv.html#a599fe92e910c027be274233eccad7beb">Scalar</a>&amp; matchColor=<a class="code" href="classcv_1_1_scalar__.html#ae7411e333e610ee9d645f53d87a55757" title="returns a scalar with all elements set to v0">Scalar::all</a>(-1), <span class="keyword">const</span> <a class="code" href="namespacecv.html#a599fe92e910c027be274233eccad7beb">Scalar</a>&amp; singlePointColor=<a class="code" href="classcv_1_1_scalar__.html#ae7411e333e610ee9d645f53d87a55757" title="returns a scalar with all elements set to v0">Scalar::all</a>(-1),
<a name="l02632"></a>02632                              <span class="keyword">const</span> vector&lt;char&gt;&amp; matchesMask=vector&lt;char&gt;(), <span class="keywordtype">int</span> <a class="code" href="highgui__c_8h.html#a537e9e30547f68fff6358cc410095bb9">flags</a>=<a class="code" href="structcv_1_1_draw_matches_flags.html#acc7fdff4df748e604c7d1a808650886aa48e1d6053ba88b4f14bf1342e6795da6">DrawMatchesFlags::DEFAULT</a> );
<a name="l02633"></a>02633 
<a name="l02634"></a>02634 <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a18aabb4c0c494b3a5609a93be2c37642">drawMatches</a>( <span class="keyword">const</span> Mat&amp; img1, <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints1,
<a name="l02635"></a>02635                              <span class="keyword">const</span> Mat&amp; img2, <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints2,
<a name="l02636"></a>02636                              <span class="keyword">const</span> vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches1to2, Mat&amp; outImg,
<a name="l02637"></a>02637                              <span class="keyword">const</span> <a class="code" href="namespacecv.html#a599fe92e910c027be274233eccad7beb">Scalar</a>&amp; matchColor=<a class="code" href="classcv_1_1_scalar__.html#ae7411e333e610ee9d645f53d87a55757" title="returns a scalar with all elements set to v0">Scalar::all</a>(-1), <span class="keyword">const</span> <a class="code" href="namespacecv.html#a599fe92e910c027be274233eccad7beb">Scalar</a>&amp; singlePointColor=<a class="code" href="classcv_1_1_scalar__.html#ae7411e333e610ee9d645f53d87a55757" title="returns a scalar with all elements set to v0">Scalar::all</a>(-1),
<a name="l02638"></a>02638                              <span class="keyword">const</span> vector&lt;vector&lt;char&gt; &gt;&amp; matchesMask=vector&lt;vector&lt;char&gt; &gt;(), <span class="keywordtype">int</span> <a class="code" href="highgui__c_8h.html#a537e9e30547f68fff6358cc410095bb9">flags</a>=<a class="code" href="structcv_1_1_draw_matches_flags.html#acc7fdff4df748e604c7d1a808650886aa48e1d6053ba88b4f14bf1342e6795da6">DrawMatchesFlags::DEFAULT</a> );
<a name="l02639"></a>02639 
<a name="l02640"></a>02640 <span class="comment">/****************************************************************************************\</span>
<a name="l02641"></a>02641 <span class="comment">*   Functions to evaluate the feature detectors and [generic] descriptor extractors      *</span>
<a name="l02642"></a>02642 <span class="comment">\****************************************************************************************/</span>
<a name="l02643"></a>02643 
<a name="l02644"></a>02644 <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#ae57e4e7ebcfe95b5678b67f4f740ca48">evaluateFeatureDetector</a>( <span class="keyword">const</span> Mat&amp; img1, <span class="keyword">const</span> Mat&amp; img2, <span class="keyword">const</span> Mat&amp; H1to2,
<a name="l02645"></a>02645                                          vector&lt;KeyPoint&gt;* keypoints1, vector&lt;KeyPoint&gt;* keypoints2,
<a name="l02646"></a>02646                                          <span class="keywordtype">float</span>&amp; repeatability, <span class="keywordtype">int</span>&amp; correspCount,
<a name="l02647"></a>02647                                          <span class="keyword">const</span> Ptr&lt;FeatureDetector&gt;&amp; fdetector=Ptr&lt;FeatureDetector&gt;() );
<a name="l02648"></a>02648 
<a name="l02649"></a>02649 <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#af06d4d1657f3feea365988c2abfe4fd0">computeRecallPrecisionCurve</a>( <span class="keyword">const</span> vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches1to2,
<a name="l02650"></a>02650                                              <span class="keyword">const</span> vector&lt;vector&lt;uchar&gt; &gt;&amp; correctMatches1to2Mask,
<a name="l02651"></a>02651                                              vector&lt;Point2f&gt;&amp; recallPrecisionCurve );
<a name="l02652"></a>02652 <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <span class="keywordtype">float</span> <a class="code" href="namespacecv.html#adfe16d7b2dcb64c5f065460c4d4f017b">getRecall</a>( <span class="keyword">const</span> vector&lt;Point2f&gt;&amp; recallPrecisionCurve, <span class="keywordtype">float</span> l_precision );
<a name="l02653"></a>02653 
<a name="l02654"></a>02654 <a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a78926a55ac085c661b4cd59a55900bd9">evaluateGenericDescriptorMatcher</a>( <span class="keyword">const</span> Mat&amp; img1, <span class="keyword">const</span> Mat&amp; img2, <span class="keyword">const</span> Mat&amp; H1to2,
<a name="l02655"></a>02655                                                   vector&lt;KeyPoint&gt;&amp; keypoints1, vector&lt;KeyPoint&gt;&amp; keypoints2,
<a name="l02656"></a>02656                                                   vector&lt;vector&lt;DMatch&gt; &gt;* matches1to2, vector&lt;vector&lt;uchar&gt; &gt;* correctMatches1to2Mask,
<a name="l02657"></a>02657                                                   vector&lt;Point2f&gt;&amp; recallPrecisionCurve,
<a name="l02658"></a>02658                                                   <span class="keyword">const</span> Ptr&lt;GenericDescriptorMatcher&gt;&amp; dmatch=Ptr&lt;GenericDescriptorMatcher&gt;() );
<a name="l02659"></a>02659 
<a name="l02660"></a>02660 
<a name="l02661"></a>02661 <span class="comment">/****************************************************************************************\</span>
<a name="l02662"></a>02662 <span class="comment">*                                     Bag of visual words                                *</span>
<a name="l02663"></a>02663 <span class="comment">\****************************************************************************************/</span>
<a name="l02664"></a>02664 <span class="comment">/*</span>
<a name="l02665"></a>02665 <span class="comment"> * Abstract base class for training of a &#39;bag of visual words&#39; vocabulary from a set of descriptors</span>
<a name="l02666"></a>02666 <span class="comment"> */</span>
<a name="l02667"></a><a class="code" href="classcv_1_1_b_o_w_trainer.html">02667</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_b_o_w_trainer.html">BOWTrainer</a>
<a name="l02668"></a>02668 {
<a name="l02669"></a>02669 <span class="keyword">public</span>:
<a name="l02670"></a>02670     <a class="code" href="classcv_1_1_b_o_w_trainer.html">BOWTrainer</a>();
<a name="l02671"></a>02671     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_b_o_w_trainer.html">BOWTrainer</a>();
<a name="l02672"></a>02672 
<a name="l02673"></a>02673     <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a5fe1c189a97c40a07be2b31a7bc90e9e" title="adds one matrix to another (dst = src1 + src2)">add</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; descriptors );
<a name="l02674"></a>02674     <span class="keyword">const</span> vector&lt;Mat&gt;&amp; getDescriptors() <span class="keyword">const</span>;
<a name="l02675"></a>02675     <span class="keywordtype">int</span> descripotorsCount() <span class="keyword">const</span>;
<a name="l02676"></a>02676 
<a name="l02677"></a>02677     <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear();
<a name="l02678"></a>02678 
<a name="l02679"></a>02679     <span class="comment">/*</span>
<a name="l02680"></a>02680 <span class="comment">     * Train visual words vocabulary, that is cluster training descriptors and</span>
<a name="l02681"></a>02681 <span class="comment">     * compute cluster centers.</span>
<a name="l02682"></a>02682 <span class="comment">     * Returns cluster centers.</span>
<a name="l02683"></a>02683 <span class="comment">     *</span>
<a name="l02684"></a>02684 <span class="comment">     * descriptors      Training descriptors computed on images keypoints.</span>
<a name="l02685"></a>02685 <span class="comment">     */</span>
<a name="l02686"></a>02686     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_mat.html">Mat</a> cluster() <span class="keyword">const</span> = 0;
<a name="l02687"></a>02687     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_mat.html">Mat</a> cluster( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; descriptors ) <span class="keyword">const</span> = 0;
<a name="l02688"></a>02688 
<a name="l02689"></a>02689 <span class="keyword">protected</span>:
<a name="l02690"></a><a class="code" href="classcv_1_1_b_o_w_trainer.html#af01a3706e549495d8da6b01ecc1ba598">02690</a>     vector&lt;Mat&gt; <a class="code" href="classcv_1_1_b_o_w_trainer.html#af01a3706e549495d8da6b01ecc1ba598">descriptors</a>;
<a name="l02691"></a><a class="code" href="classcv_1_1_b_o_w_trainer.html#a0aa1b9d10cb5790c13977c7ef3d60589">02691</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_b_o_w_trainer.html#a0aa1b9d10cb5790c13977c7ef3d60589">size</a>;
<a name="l02692"></a>02692 };
<a name="l02693"></a>02693 
<a name="l02694"></a>02694 <span class="comment">/*</span>
<a name="l02695"></a>02695 <span class="comment"> * This is BOWTrainer using cv::kmeans to get vocabulary.</span>
<a name="l02696"></a>02696 <span class="comment"> */</span>
<a name="l02697"></a><a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html">02697</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html">BOWKMeansTrainer</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_b_o_w_trainer.html">BOWTrainer</a>
<a name="l02698"></a>02698 {
<a name="l02699"></a>02699 <span class="keyword">public</span>:
<a name="l02700"></a>02700     <a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html">BOWKMeansTrainer</a>( <span class="keywordtype">int</span> clusterCount, <span class="keyword">const</span> <a class="code" href="classcv_1_1_term_criteria.html">TermCriteria</a>&amp; termcrit=<a class="code" href="classcv_1_1_term_criteria.html">TermCriteria</a>(),
<a name="l02701"></a>02701                       <span class="keywordtype">int</span> attempts=3, <span class="keywordtype">int</span> <a class="code" href="highgui__c_8h.html#a537e9e30547f68fff6358cc410095bb9">flags</a>=<a class="code" href="namespacecv.html#a234057c65114861f52a325c0aa192adda78ddd00a99cd51db10ed63c024eb1e62">KMEANS_PP_CENTERS</a> );
<a name="l02702"></a>02702     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html">BOWKMeansTrainer</a>();
<a name="l02703"></a>02703 
<a name="l02704"></a>02704     <span class="comment">// Returns trained vocabulary (i.e. cluster centers).</span>
<a name="l02705"></a>02705     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_mat.html">Mat</a> cluster() <span class="keyword">const</span>;
<a name="l02706"></a>02706     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_mat.html">Mat</a> cluster( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; descriptors ) <span class="keyword">const</span>;
<a name="l02707"></a>02707 
<a name="l02708"></a>02708 <span class="keyword">protected</span>:
<a name="l02709"></a>02709 
<a name="l02710"></a><a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html#aec28a6dd06354f4b13462434e1f39e03">02710</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html#aec28a6dd06354f4b13462434e1f39e03">clusterCount</a>;
<a name="l02711"></a><a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html#a6858ee26d31e8537ce6a8ae33d883d4c">02711</a>     <a class="code" href="classcv_1_1_term_criteria.html">TermCriteria</a> <a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html#a6858ee26d31e8537ce6a8ae33d883d4c">termcrit</a>;
<a name="l02712"></a><a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html#a38cc72f20413df1fd2de0f2e10ef9af2">02712</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html#a38cc72f20413df1fd2de0f2e10ef9af2">attempts</a>;
<a name="l02713"></a><a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html#aa0a8079aa21df8ab4d8fd7769eedf79a">02713</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html#aa0a8079aa21df8ab4d8fd7769eedf79a">flags</a>;
<a name="l02714"></a>02714 };
<a name="l02715"></a>02715 
<a name="l02716"></a>02716 <span class="comment">/*</span>
<a name="l02717"></a>02717 <span class="comment"> * Class to compute image descriptor using bag of visual words.</span>
<a name="l02718"></a>02718 <span class="comment"> */</span>
<a name="l02719"></a><a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html">02719</a> <span class="keyword">class </span><a class="code" href="core_2include_2opencv2_2core_2types__c_8h.html#a1bf9f0e121b54272da02379cfccd0a2b">CV_EXPORTS</a> <a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html">BOWImgDescriptorExtractor</a>
<a name="l02720"></a>02720 {
<a name="l02721"></a>02721 <span class="keyword">public</span>:
<a name="l02722"></a>02722     <a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html">BOWImgDescriptorExtractor</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorExtractor&gt;</a>&amp; dextractor,
<a name="l02723"></a>02723                                <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a>&amp; dmatcher );
<a name="l02724"></a>02724     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html">BOWImgDescriptorExtractor</a>();
<a name="l02725"></a>02725 
<a name="l02726"></a>02726     <span class="keywordtype">void</span> setVocabulary( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; vocabulary );
<a name="l02727"></a>02727     <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; getVocabulary() <span class="keyword">const</span>;
<a name="l02728"></a>02728     <span class="keywordtype">void</span> compute( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <a class="code" href="classcv_1_1_mat.html">Mat</a>&amp; imgDescriptor,
<a name="l02729"></a>02729                   vector&lt;vector&lt;int&gt; &gt;* pointIdxsOfClusters=0, <a class="code" href="classcv_1_1_mat.html">Mat</a>* descriptors=0 );
<a name="l02730"></a>02730     <span class="comment">// compute() is not constant because DescriptorMatcher::match is not constant</span>
<a name="l02731"></a>02731 
<a name="l02732"></a>02732     <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span>;
<a name="l02733"></a>02733     <span class="keywordtype">int</span> descriptorType() <span class="keyword">const</span>;
<a name="l02734"></a>02734 
<a name="l02735"></a>02735 <span class="keyword">protected</span>:
<a name="l02736"></a><a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html#ab5753a53d4f4c6e2c18b61e1b4559b98">02736</a>     <a class="code" href="classcv_1_1_mat.html">Mat</a> <a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html#ab5753a53d4f4c6e2c18b61e1b4559b98">vocabulary</a>;
<a name="l02737"></a><a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html#acd0f100ac2f377432931062ce02f16cb">02737</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorExtractor&gt;</a> <a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html#acd0f100ac2f377432931062ce02f16cb">dextractor</a>;
<a name="l02738"></a><a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html#a43311e57fce860293560e05a7e933424">02738</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a> <a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html#a43311e57fce860293560e05a7e933424">dmatcher</a>;
<a name="l02739"></a>02739 };
<a name="l02740"></a>02740 
<a name="l02741"></a>02741 } <span class="comment">/* namespace cv */</span>
<a name="l02742"></a>02742 
<a name="l02743"></a>02743 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
<a name="l02744"></a>02744 
<a name="l02745"></a>02745 <span class="preprocessor">#endif</span>
<a name="l02746"></a>02746 <span class="preprocessor"></span>
<a name="l02747"></a>02747 <span class="comment">/* End of file. */</span>
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Mon Feb 21 2011 10:00:48 for opencv by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
